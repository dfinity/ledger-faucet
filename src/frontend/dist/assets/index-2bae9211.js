var eo=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)};var to=(t,e,r)=>(eo(t,e,"read from private field"),r?r.call(t):e.get(t)),kn=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)};var Nr=(t,e,r)=>(eo(t,e,"access private method"),r);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const f of a.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&n(f)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}})();/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var Xi;const di=window,Wr=di.trustedTypes,ro=Wr?Wr.createPolicy("lit-html",{createHTML:t=>t}):void 0,bs="$lit$",rr=`lit$${(Math.random()+"").slice(9)}$`,na="?"+rr,Tu=`<${na}>`,Er=document,yn=()=>Er.createComment(""),gn=t=>t===null||typeof t!="object"&&typeof t!="function",ia=Array.isArray,Su=t=>ia(t)||typeof(t==null?void 0:t[Symbol.iterator])=="function",Ji=`[ 	
\f\r]`,sn=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,no=/-->/g,io=/>/g,or=RegExp(`>|${Ji}(?:([^\\s"'>=/]+)(${Ji}*=${Ji}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),so=/'/g,oo=/"/g,sa=/^(?:script|style|textarea|title)$/i,Nu=t=>(e,...r)=>({_$litType$:t,strings:e,values:r}),Iu=Nu(1),wn=Symbol.for("lit-noChange"),ze=Symbol.for("lit-nothing"),ao=new WeakMap,dr=Er.createTreeWalker(Er,129,null,!1);function oa(t,e){if(!Array.isArray(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return ro!==void 0?ro.createHTML(e):e}const Ru=(t,e)=>{const r=t.length-1,n=[];let i,a=e===2?"<svg>":"",f=sn;for(let s=0;s<r;s++){const p=t[s];let w,S,v=-1,b=0;for(;b<p.length&&(f.lastIndex=b,S=f.exec(p),S!==null);)b=f.lastIndex,f===sn?S[1]==="!--"?f=no:S[1]!==void 0?f=io:S[2]!==void 0?(sa.test(S[2])&&(i=RegExp("</"+S[2],"g")),f=or):S[3]!==void 0&&(f=or):f===or?S[0]===">"?(f=i??sn,v=-1):S[1]===void 0?v=-2:(v=f.lastIndex-S[2].length,w=S[1],f=S[3]===void 0?or:S[3]==='"'?oo:so):f===oo||f===so?f=or:f===no||f===io?f=sn:(f=or,i=void 0);const m=f===or&&t[s+1].startsWith("/>")?" ":"";a+=f===sn?p+Tu:v>=0?(n.push(w),p.slice(0,v)+bs+p.slice(v)+rr+m):p+rr+(v===-2?(n.push(void 0),s):m)}return[oa(t,a+(t[r]||"<?>")+(e===2?"</svg>":"")),n]};class mn{constructor({strings:e,_$litType$:r},n){let i;this.parts=[];let a=0,f=0;const s=e.length-1,p=this.parts,[w,S]=Ru(e,r);if(this.el=mn.createElement(w,n),dr.currentNode=this.el.content,r===2){const v=this.el.content,b=v.firstChild;b.remove(),v.append(...b.childNodes)}for(;(i=dr.nextNode())!==null&&p.length<s;){if(i.nodeType===1){if(i.hasAttributes()){const v=[];for(const b of i.getAttributeNames())if(b.endsWith(bs)||b.startsWith(rr)){const m=S[f++];if(v.push(b),m!==void 0){const g=i.getAttribute(m.toLowerCase()+bs).split(rr),k=/([.?@])?(.*)/.exec(m);p.push({type:1,index:a,name:k[2],strings:g,ctor:k[1]==="."?Ou:k[1]==="?"?$u:k[1]==="@"?Mu:Si})}else p.push({type:6,index:a})}for(const b of v)i.removeAttribute(b)}if(sa.test(i.tagName)){const v=i.textContent.split(rr),b=v.length-1;if(b>0){i.textContent=Wr?Wr.emptyScript:"";for(let m=0;m<b;m++)i.append(v[m],yn()),dr.nextNode(),p.push({type:2,index:++a});i.append(v[b],yn())}}}else if(i.nodeType===8)if(i.data===na)p.push({type:2,index:a});else{let v=-1;for(;(v=i.data.indexOf(rr,v+1))!==-1;)p.push({type:7,index:a}),v+=rr.length-1}a++}}static createElement(e,r){const n=Er.createElement("template");return n.innerHTML=e,n}}function zr(t,e,r=t,n){var i,a,f,s;if(e===wn)return e;let p=n!==void 0?(i=r._$Co)===null||i===void 0?void 0:i[n]:r._$Cl;const w=gn(e)?void 0:e._$litDirective$;return(p==null?void 0:p.constructor)!==w&&((a=p==null?void 0:p._$AO)===null||a===void 0||a.call(p,!1),w===void 0?p=void 0:(p=new w(t),p._$AT(t,r,n)),n!==void 0?((f=(s=r)._$Co)!==null&&f!==void 0?f:s._$Co=[])[n]=p:r._$Cl=p),p!==void 0&&(e=zr(t,p._$AS(t,e.values),p,n)),e}class Uu{constructor(e,r){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=r}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){var r;const{el:{content:n},parts:i}=this._$AD,a=((r=e==null?void 0:e.creationScope)!==null&&r!==void 0?r:Er).importNode(n,!0);dr.currentNode=a;let f=dr.nextNode(),s=0,p=0,w=i[0];for(;w!==void 0;){if(s===w.index){let S;w.type===2?S=new Tn(f,f.nextSibling,this,e):w.type===1?S=new w.ctor(f,w.name,w.strings,this,e):w.type===6&&(S=new ku(f,this,e)),this._$AV.push(S),w=i[++p]}s!==(w==null?void 0:w.index)&&(f=dr.nextNode(),s++)}return dr.currentNode=Er,a}v(e){let r=0;for(const n of this._$AV)n!==void 0&&(n.strings!==void 0?(n._$AI(e,n,r),r+=n.strings.length-2):n._$AI(e[r])),r++}}class Tn{constructor(e,r,n,i){var a;this.type=2,this._$AH=ze,this._$AN=void 0,this._$AA=e,this._$AB=r,this._$AM=n,this.options=i,this._$Cp=(a=i==null?void 0:i.isConnected)===null||a===void 0||a}get _$AU(){var e,r;return(r=(e=this._$AM)===null||e===void 0?void 0:e._$AU)!==null&&r!==void 0?r:this._$Cp}get parentNode(){let e=this._$AA.parentNode;const r=this._$AM;return r!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=r.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,r=this){e=zr(this,e,r),gn(e)?e===ze||e==null||e===""?(this._$AH!==ze&&this._$AR(),this._$AH=ze):e!==this._$AH&&e!==wn&&this._(e):e._$litType$!==void 0?this.g(e):e.nodeType!==void 0?this.$(e):Su(e)?this.T(e):this._(e)}k(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}$(e){this._$AH!==e&&(this._$AR(),this._$AH=this.k(e))}_(e){this._$AH!==ze&&gn(this._$AH)?this._$AA.nextSibling.data=e:this.$(Er.createTextNode(e)),this._$AH=e}g(e){var r;const{values:n,_$litType$:i}=e,a=typeof i=="number"?this._$AC(e):(i.el===void 0&&(i.el=mn.createElement(oa(i.h,i.h[0]),this.options)),i);if(((r=this._$AH)===null||r===void 0?void 0:r._$AD)===a)this._$AH.v(n);else{const f=new Uu(a,this),s=f.u(this.options);f.v(n),this.$(s),this._$AH=f}}_$AC(e){let r=ao.get(e.strings);return r===void 0&&ao.set(e.strings,r=new mn(e)),r}T(e){ia(this._$AH)||(this._$AH=[],this._$AR());const r=this._$AH;let n,i=0;for(const a of e)i===r.length?r.push(n=new Tn(this.k(yn()),this.k(yn()),this,this.options)):n=r[i],n._$AI(a),i++;i<r.length&&(this._$AR(n&&n._$AB.nextSibling,i),r.length=i)}_$AR(e=this._$AA.nextSibling,r){var n;for((n=this._$AP)===null||n===void 0||n.call(this,!1,!0,r);e&&e!==this._$AB;){const i=e.nextSibling;e.remove(),e=i}}setConnected(e){var r;this._$AM===void 0&&(this._$Cp=e,(r=this._$AP)===null||r===void 0||r.call(this,e))}}class Si{constructor(e,r,n,i,a){this.type=1,this._$AH=ze,this._$AN=void 0,this.element=e,this.name=r,this._$AM=i,this.options=a,n.length>2||n[0]!==""||n[1]!==""?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=ze}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(e,r=this,n,i){const a=this.strings;let f=!1;if(a===void 0)e=zr(this,e,r,0),f=!gn(e)||e!==this._$AH&&e!==wn,f&&(this._$AH=e);else{const s=e;let p,w;for(e=a[0],p=0;p<a.length-1;p++)w=zr(this,s[n+p],r,p),w===wn&&(w=this._$AH[p]),f||(f=!gn(w)||w!==this._$AH[p]),w===ze?e=ze:e!==ze&&(e+=(w??"")+a[p+1]),this._$AH[p]=w}f&&!i&&this.j(e)}j(e){e===ze?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class Ou extends Si{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===ze?void 0:e}}const Fu=Wr?Wr.emptyScript:"";class $u extends Si{constructor(){super(...arguments),this.type=4}j(e){e&&e!==ze?this.element.setAttribute(this.name,Fu):this.element.removeAttribute(this.name)}}class Mu extends Si{constructor(e,r,n,i,a){super(e,r,n,i,a),this.type=5}_$AI(e,r=this){var n;if((e=(n=zr(this,e,r,0))!==null&&n!==void 0?n:ze)===wn)return;const i=this._$AH,a=e===ze&&i!==ze||e.capture!==i.capture||e.once!==i.once||e.passive!==i.passive,f=e!==ze&&(i===ze||a);a&&this.element.removeEventListener(this.name,this,i),f&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var r,n;typeof this._$AH=="function"?this._$AH.call((n=(r=this.options)===null||r===void 0?void 0:r.host)!==null&&n!==void 0?n:this.element,e):this._$AH.handleEvent(e)}}class ku{constructor(e,r,n){this.element=e,this.type=6,this._$AN=void 0,this._$AM=r,this.options=n}get _$AU(){return this._$AM._$AU}_$AI(e){zr(this,e)}}const co=di.litHtmlPolyfillSupport;co==null||co(mn,Tn),((Xi=di.litHtmlVersions)!==null&&Xi!==void 0?Xi:di.litHtmlVersions=[]).push("2.8.0");const Pu=(t,e,r)=>{var n,i;const a=(n=r==null?void 0:r.renderBefore)!==null&&n!==void 0?n:e;let f=a._$litPart$;if(f===void 0){const s=(i=r==null?void 0:r.renderBefore)!==null&&i!==void 0?i:null;a._$litPart$=f=new Tn(e.insertBefore(yn(),s),s,void 0,r??{})}return f._$AI(t),f};var Lr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Cu(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var aa={},Sn={};Sn.byteLength=Gu;Sn.toByteArray=ju;Sn.fromByteArray=Ku;var Rt=[],ht=[],qu=typeof Uint8Array<"u"?Uint8Array:Array,Qi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Ir=0,Vu=Qi.length;Ir<Vu;++Ir)Rt[Ir]=Qi[Ir],ht[Qi.charCodeAt(Ir)]=Ir;ht["-".charCodeAt(0)]=62;ht["_".charCodeAt(0)]=63;function ca(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function Gu(t){var e=ca(t),r=e[0],n=e[1];return(r+n)*3/4-n}function Hu(t,e,r){return(e+r)*3/4-r}function ju(t){var e,r=ca(t),n=r[0],i=r[1],a=new qu(Hu(t,n,i)),f=0,s=i>0?n-4:n,p;for(p=0;p<s;p+=4)e=ht[t.charCodeAt(p)]<<18|ht[t.charCodeAt(p+1)]<<12|ht[t.charCodeAt(p+2)]<<6|ht[t.charCodeAt(p+3)],a[f++]=e>>16&255,a[f++]=e>>8&255,a[f++]=e&255;return i===2&&(e=ht[t.charCodeAt(p)]<<2|ht[t.charCodeAt(p+1)]>>4,a[f++]=e&255),i===1&&(e=ht[t.charCodeAt(p)]<<10|ht[t.charCodeAt(p+1)]<<4|ht[t.charCodeAt(p+2)]>>2,a[f++]=e>>8&255,a[f++]=e&255),a}function Yu(t){return Rt[t>>18&63]+Rt[t>>12&63]+Rt[t>>6&63]+Rt[t&63]}function Zu(t,e,r){for(var n,i=[],a=e;a<r;a+=3)n=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(t[a+2]&255),i.push(Yu(n));return i.join("")}function Ku(t){for(var e,r=t.length,n=r%3,i=[],a=16383,f=0,s=r-n;f<s;f+=a)i.push(Zu(t,f,f+a>s?s:f+a));return n===1?(e=t[r-1],i.push(Rt[e>>2]+Rt[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],i.push(Rt[e>>10]+Rt[e>>4&63]+Rt[e<<2&63]+"=")),i.join("")}var Nn={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Nn.read=function(t,e,r,n,i){var a,f,s=i*8-n-1,p=(1<<s)-1,w=p>>1,S=-7,v=r?i-1:0,b=r?-1:1,m=t[e+v];for(v+=b,a=m&(1<<-S)-1,m>>=-S,S+=s;S>0;a=a*256+t[e+v],v+=b,S-=8);for(f=a&(1<<-S)-1,a>>=-S,S+=n;S>0;f=f*256+t[e+v],v+=b,S-=8);if(a===0)a=1-w;else{if(a===p)return f?NaN:(m?-1:1)*(1/0);f=f+Math.pow(2,n),a=a-w}return(m?-1:1)*f*Math.pow(2,a-n)};Nn.write=function(t,e,r,n,i,a){var f,s,p,w=a*8-i-1,S=(1<<w)-1,v=S>>1,b=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,m=n?0:a-1,g=n?1:-1,k=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,f=S):(f=Math.floor(Math.log(e)/Math.LN2),e*(p=Math.pow(2,-f))<1&&(f--,p*=2),f+v>=1?e+=b/p:e+=b*Math.pow(2,1-v),e*p>=2&&(f++,p/=2),f+v>=S?(s=0,f=S):f+v>=1?(s=(e*p-1)*Math.pow(2,i),f=f+v):(s=e*Math.pow(2,v-1)*Math.pow(2,i),f=0));i>=8;t[r+m]=s&255,m+=g,s/=256,i-=8);for(f=f<<i|s,w+=i;w>0;t[r+m]=f&255,m+=g,f/=256,w-=8);t[r+m-g]|=k*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){const e=Sn,r=Nn,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=s,t.SlowBuffer=K,t.INSPECT_MAX_BYTES=50;const i=2147483647;t.kMaxLength=i,s.TYPED_ARRAY_SUPPORT=a(),!s.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function a(){try{const d=new Uint8Array(1),u={foo:function(){return 42}};return Object.setPrototypeOf(u,Uint8Array.prototype),Object.setPrototypeOf(d,u),d.foo()===42}catch{return!1}}Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}});function f(d){if(d>i)throw new RangeError('The value "'+d+'" is invalid for option "size"');const u=new Uint8Array(d);return Object.setPrototypeOf(u,s.prototype),u}function s(d,u,l){if(typeof d=="number"){if(typeof u=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return v(d)}return p(d,u,l)}s.poolSize=8192;function p(d,u,l){if(typeof d=="string")return b(d,u);if(ArrayBuffer.isView(d))return g(d);if(d==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof d);if(Y(d,ArrayBuffer)||d&&Y(d.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Y(d,SharedArrayBuffer)||d&&Y(d.buffer,SharedArrayBuffer)))return k(d,u,l);if(typeof d=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const B=d.valueOf&&d.valueOf();if(B!=null&&B!==d)return s.from(B,u,l);const M=q(d);if(M)return M;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof d[Symbol.toPrimitive]=="function")return s.from(d[Symbol.toPrimitive]("string"),u,l);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof d)}s.from=function(d,u,l){return p(d,u,l)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array);function w(d){if(typeof d!="number")throw new TypeError('"size" argument must be of type number');if(d<0)throw new RangeError('The value "'+d+'" is invalid for option "size"')}function S(d,u,l){return w(d),d<=0?f(d):u!==void 0?typeof l=="string"?f(d).fill(u,l):f(d).fill(u):f(d)}s.alloc=function(d,u,l){return S(d,u,l)};function v(d){return w(d),f(d<0?0:X(d)|0)}s.allocUnsafe=function(d){return v(d)},s.allocUnsafeSlow=function(d){return v(d)};function b(d,u){if((typeof u!="string"||u==="")&&(u="utf8"),!s.isEncoding(u))throw new TypeError("Unknown encoding: "+u);const l=j(d,u)|0;let B=f(l);const M=B.write(d,u);return M!==l&&(B=B.slice(0,M)),B}function m(d){const u=d.length<0?0:X(d.length)|0,l=f(u);for(let B=0;B<u;B+=1)l[B]=d[B]&255;return l}function g(d){if(Y(d,Uint8Array)){const u=new Uint8Array(d);return k(u.buffer,u.byteOffset,u.byteLength)}return m(d)}function k(d,u,l){if(u<0||d.byteLength<u)throw new RangeError('"offset" is outside of buffer bounds');if(d.byteLength<u+(l||0))throw new RangeError('"length" is outside of buffer bounds');let B;return u===void 0&&l===void 0?B=new Uint8Array(d):l===void 0?B=new Uint8Array(d,u):B=new Uint8Array(d,u,l),Object.setPrototypeOf(B,s.prototype),B}function q(d){if(s.isBuffer(d)){const u=X(d.length)|0,l=f(u);return l.length===0||d.copy(l,0,0,u),l}if(d.length!==void 0)return typeof d.length!="number"||se(d.length)?f(0):m(d);if(d.type==="Buffer"&&Array.isArray(d.data))return m(d.data)}function X(d){if(d>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return d|0}function K(d){return+d!=d&&(d=0),s.alloc(+d)}s.isBuffer=function(u){return u!=null&&u._isBuffer===!0&&u!==s.prototype},s.compare=function(u,l){if(Y(u,Uint8Array)&&(u=s.from(u,u.offset,u.byteLength)),Y(l,Uint8Array)&&(l=s.from(l,l.offset,l.byteLength)),!s.isBuffer(u)||!s.isBuffer(l))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(u===l)return 0;let B=u.length,M=l.length;for(let W=0,Z=Math.min(B,M);W<Z;++W)if(u[W]!==l[W]){B=u[W],M=l[W];break}return B<M?-1:M<B?1:0},s.isEncoding=function(u){switch(String(u).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(u,l){if(!Array.isArray(u))throw new TypeError('"list" argument must be an Array of Buffers');if(u.length===0)return s.alloc(0);let B;if(l===void 0)for(l=0,B=0;B<u.length;++B)l+=u[B].length;const M=s.allocUnsafe(l);let W=0;for(B=0;B<u.length;++B){let Z=u[B];if(Y(Z,Uint8Array))W+Z.length>M.length?(s.isBuffer(Z)||(Z=s.from(Z)),Z.copy(M,W)):Uint8Array.prototype.set.call(M,Z,W);else if(s.isBuffer(Z))Z.copy(M,W);else throw new TypeError('"list" argument must be an Array of Buffers');W+=Z.length}return M};function j(d,u){if(s.isBuffer(d))return d.length;if(ArrayBuffer.isView(d)||Y(d,ArrayBuffer))return d.byteLength;if(typeof d!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof d);const l=d.length,B=arguments.length>2&&arguments[2]===!0;if(!B&&l===0)return 0;let M=!1;for(;;)switch(u){case"ascii":case"latin1":case"binary":return l;case"utf8":case"utf-8":return o(d).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return l*2;case"hex":return l>>>1;case"base64":return _(d).length;default:if(M)return B?-1:o(d).length;u=(""+u).toLowerCase(),M=!0}}s.byteLength=j;function D(d,u,l){let B=!1;if((u===void 0||u<0)&&(u=0),u>this.length||((l===void 0||l>this.length)&&(l=this.length),l<=0)||(l>>>=0,u>>>=0,l<=u))return"";for(d||(d="utf8");;)switch(d){case"hex":return ne(this,u,l);case"utf8":case"utf-8":return N(this,u,l);case"ascii":return ee(this,u,l);case"latin1":case"binary":return Q(this,u,l);case"base64":return x(this,u,l);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return he(this,u,l);default:if(B)throw new TypeError("Unknown encoding: "+d);d=(d+"").toLowerCase(),B=!0}}s.prototype._isBuffer=!0;function R(d,u,l){const B=d[u];d[u]=d[l],d[l]=B}s.prototype.swap16=function(){const u=this.length;if(u%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let l=0;l<u;l+=2)R(this,l,l+1);return this},s.prototype.swap32=function(){const u=this.length;if(u%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let l=0;l<u;l+=4)R(this,l,l+3),R(this,l+1,l+2);return this},s.prototype.swap64=function(){const u=this.length;if(u%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let l=0;l<u;l+=8)R(this,l,l+7),R(this,l+1,l+6),R(this,l+2,l+5),R(this,l+3,l+4);return this},s.prototype.toString=function(){const u=this.length;return u===0?"":arguments.length===0?N(this,0,u):D.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(u){if(!s.isBuffer(u))throw new TypeError("Argument must be a Buffer");return this===u?!0:s.compare(this,u)===0},s.prototype.inspect=function(){let u="";const l=t.INSPECT_MAX_BYTES;return u=this.toString("hex",0,l).replace(/(.{2})/g,"$1 ").trim(),this.length>l&&(u+=" ... "),"<Buffer "+u+">"},n&&(s.prototype[n]=s.prototype.inspect),s.prototype.compare=function(u,l,B,M,W){if(Y(u,Uint8Array)&&(u=s.from(u,u.offset,u.byteLength)),!s.isBuffer(u))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof u);if(l===void 0&&(l=0),B===void 0&&(B=u?u.length:0),M===void 0&&(M=0),W===void 0&&(W=this.length),l<0||B>u.length||M<0||W>this.length)throw new RangeError("out of range index");if(M>=W&&l>=B)return 0;if(M>=W)return-1;if(l>=B)return 1;if(l>>>=0,B>>>=0,M>>>=0,W>>>=0,this===u)return 0;let Z=W-M,ge=B-l;const be=Math.min(Z,ge),we=this.slice(M,W),ye=u.slice(l,B);for(let Te=0;Te<be;++Te)if(we[Te]!==ye[Te]){Z=we[Te],ge=ye[Te];break}return Z<ge?-1:ge<Z?1:0};function C(d,u,l,B,M){if(d.length===0)return-1;if(typeof l=="string"?(B=l,l=0):l>2147483647?l=2147483647:l<-2147483648&&(l=-2147483648),l=+l,se(l)&&(l=M?0:d.length-1),l<0&&(l=d.length+l),l>=d.length){if(M)return-1;l=d.length-1}else if(l<0)if(M)l=0;else return-1;if(typeof u=="string"&&(u=s.from(u,B)),s.isBuffer(u))return u.length===0?-1:z(d,u,l,B,M);if(typeof u=="number")return u=u&255,typeof Uint8Array.prototype.indexOf=="function"?M?Uint8Array.prototype.indexOf.call(d,u,l):Uint8Array.prototype.lastIndexOf.call(d,u,l):z(d,[u],l,B,M);throw new TypeError("val must be string, number or Buffer")}function z(d,u,l,B,M){let W=1,Z=d.length,ge=u.length;if(B!==void 0&&(B=String(B).toLowerCase(),B==="ucs2"||B==="ucs-2"||B==="utf16le"||B==="utf-16le")){if(d.length<2||u.length<2)return-1;W=2,Z/=2,ge/=2,l/=2}function be(ye,Te){return W===1?ye[Te]:ye.readUInt16BE(Te*W)}let we;if(M){let ye=-1;for(we=l;we<Z;we++)if(be(d,we)===be(u,ye===-1?0:we-ye)){if(ye===-1&&(ye=we),we-ye+1===ge)return ye*W}else ye!==-1&&(we-=we-ye),ye=-1}else for(l+ge>Z&&(l=Z-ge),we=l;we>=0;we--){let ye=!0;for(let Te=0;Te<ge;Te++)if(be(d,we+Te)!==be(u,Te)){ye=!1;break}if(ye)return we}return-1}s.prototype.includes=function(u,l,B){return this.indexOf(u,l,B)!==-1},s.prototype.indexOf=function(u,l,B){return C(this,u,l,B,!0)},s.prototype.lastIndexOf=function(u,l,B){return C(this,u,l,B,!1)};function te(d,u,l,B){l=Number(l)||0;const M=d.length-l;B?(B=Number(B),B>M&&(B=M)):B=M;const W=u.length;B>W/2&&(B=W/2);let Z;for(Z=0;Z<B;++Z){const ge=parseInt(u.substr(Z*2,2),16);if(se(ge))return Z;d[l+Z]=ge}return Z}function re(d,u,l,B){return I(o(u,d.length-l),d,l,B)}function U(d,u,l,B){return I(c(u),d,l,B)}function H(d,u,l,B){return I(_(u),d,l,B)}function J(d,u,l,B){return I(y(u,d.length-l),d,l,B)}s.prototype.write=function(u,l,B,M){if(l===void 0)M="utf8",B=this.length,l=0;else if(B===void 0&&typeof l=="string")M=l,B=this.length,l=0;else if(isFinite(l))l=l>>>0,isFinite(B)?(B=B>>>0,M===void 0&&(M="utf8")):(M=B,B=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const W=this.length-l;if((B===void 0||B>W)&&(B=W),u.length>0&&(B<0||l<0)||l>this.length)throw new RangeError("Attempt to write outside buffer bounds");M||(M="utf8");let Z=!1;for(;;)switch(M){case"hex":return te(this,u,l,B);case"utf8":case"utf-8":return re(this,u,l,B);case"ascii":case"latin1":case"binary":return U(this,u,l,B);case"base64":return H(this,u,l,B);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return J(this,u,l,B);default:if(Z)throw new TypeError("Unknown encoding: "+M);M=(""+M).toLowerCase(),Z=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function x(d,u,l){return u===0&&l===d.length?e.fromByteArray(d):e.fromByteArray(d.slice(u,l))}function N(d,u,l){l=Math.min(d.length,l);const B=[];let M=u;for(;M<l;){const W=d[M];let Z=null,ge=W>239?4:W>223?3:W>191?2:1;if(M+ge<=l){let be,we,ye,Te;switch(ge){case 1:W<128&&(Z=W);break;case 2:be=d[M+1],(be&192)===128&&(Te=(W&31)<<6|be&63,Te>127&&(Z=Te));break;case 3:be=d[M+1],we=d[M+2],(be&192)===128&&(we&192)===128&&(Te=(W&15)<<12|(be&63)<<6|we&63,Te>2047&&(Te<55296||Te>57343)&&(Z=Te));break;case 4:be=d[M+1],we=d[M+2],ye=d[M+3],(be&192)===128&&(we&192)===128&&(ye&192)===128&&(Te=(W&15)<<18|(be&63)<<12|(we&63)<<6|ye&63,Te>65535&&Te<1114112&&(Z=Te))}}Z===null?(Z=65533,ge=1):Z>65535&&(Z-=65536,B.push(Z>>>10&1023|55296),Z=56320|Z&1023),B.push(Z),M+=ge}return L(B)}const $=4096;function L(d){const u=d.length;if(u<=$)return String.fromCharCode.apply(String,d);let l="",B=0;for(;B<u;)l+=String.fromCharCode.apply(String,d.slice(B,B+=$));return l}function ee(d,u,l){let B="";l=Math.min(d.length,l);for(let M=u;M<l;++M)B+=String.fromCharCode(d[M]&127);return B}function Q(d,u,l){let B="";l=Math.min(d.length,l);for(let M=u;M<l;++M)B+=String.fromCharCode(d[M]);return B}function ne(d,u,l){const B=d.length;(!u||u<0)&&(u=0),(!l||l<0||l>B)&&(l=B);let M="";for(let W=u;W<l;++W)M+=ue[d[W]];return M}function he(d,u,l){const B=d.slice(u,l);let M="";for(let W=0;W<B.length-1;W+=2)M+=String.fromCharCode(B[W]+B[W+1]*256);return M}s.prototype.slice=function(u,l){const B=this.length;u=~~u,l=l===void 0?B:~~l,u<0?(u+=B,u<0&&(u=0)):u>B&&(u=B),l<0?(l+=B,l<0&&(l=0)):l>B&&(l=B),l<u&&(l=u);const M=this.subarray(u,l);return Object.setPrototypeOf(M,s.prototype),M};function oe(d,u,l){if(d%1!==0||d<0)throw new RangeError("offset is not uint");if(d+u>l)throw new RangeError("Trying to access beyond buffer length")}s.prototype.readUintLE=s.prototype.readUIntLE=function(u,l,B){u=u>>>0,l=l>>>0,B||oe(u,l,this.length);let M=this[u],W=1,Z=0;for(;++Z<l&&(W*=256);)M+=this[u+Z]*W;return M},s.prototype.readUintBE=s.prototype.readUIntBE=function(u,l,B){u=u>>>0,l=l>>>0,B||oe(u,l,this.length);let M=this[u+--l],W=1;for(;l>0&&(W*=256);)M+=this[u+--l]*W;return M},s.prototype.readUint8=s.prototype.readUInt8=function(u,l){return u=u>>>0,l||oe(u,1,this.length),this[u]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(u,l){return u=u>>>0,l||oe(u,2,this.length),this[u]|this[u+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(u,l){return u=u>>>0,l||oe(u,2,this.length),this[u]<<8|this[u+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(u,l){return u=u>>>0,l||oe(u,4,this.length),(this[u]|this[u+1]<<8|this[u+2]<<16)+this[u+3]*16777216},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(u,l){return u=u>>>0,l||oe(u,4,this.length),this[u]*16777216+(this[u+1]<<16|this[u+2]<<8|this[u+3])},s.prototype.readBigUInt64LE=fe(function(u){u=u>>>0,V(u,"offset");const l=this[u],B=this[u+7];(l===void 0||B===void 0)&&P(u,this.length-8);const M=l+this[++u]*2**8+this[++u]*2**16+this[++u]*2**24,W=this[++u]+this[++u]*2**8+this[++u]*2**16+B*2**24;return BigInt(M)+(BigInt(W)<<BigInt(32))}),s.prototype.readBigUInt64BE=fe(function(u){u=u>>>0,V(u,"offset");const l=this[u],B=this[u+7];(l===void 0||B===void 0)&&P(u,this.length-8);const M=l*2**24+this[++u]*2**16+this[++u]*2**8+this[++u],W=this[++u]*2**24+this[++u]*2**16+this[++u]*2**8+B;return(BigInt(M)<<BigInt(32))+BigInt(W)}),s.prototype.readIntLE=function(u,l,B){u=u>>>0,l=l>>>0,B||oe(u,l,this.length);let M=this[u],W=1,Z=0;for(;++Z<l&&(W*=256);)M+=this[u+Z]*W;return W*=128,M>=W&&(M-=Math.pow(2,8*l)),M},s.prototype.readIntBE=function(u,l,B){u=u>>>0,l=l>>>0,B||oe(u,l,this.length);let M=l,W=1,Z=this[u+--M];for(;M>0&&(W*=256);)Z+=this[u+--M]*W;return W*=128,Z>=W&&(Z-=Math.pow(2,8*l)),Z},s.prototype.readInt8=function(u,l){return u=u>>>0,l||oe(u,1,this.length),this[u]&128?(255-this[u]+1)*-1:this[u]},s.prototype.readInt16LE=function(u,l){u=u>>>0,l||oe(u,2,this.length);const B=this[u]|this[u+1]<<8;return B&32768?B|4294901760:B},s.prototype.readInt16BE=function(u,l){u=u>>>0,l||oe(u,2,this.length);const B=this[u+1]|this[u]<<8;return B&32768?B|4294901760:B},s.prototype.readInt32LE=function(u,l){return u=u>>>0,l||oe(u,4,this.length),this[u]|this[u+1]<<8|this[u+2]<<16|this[u+3]<<24},s.prototype.readInt32BE=function(u,l){return u=u>>>0,l||oe(u,4,this.length),this[u]<<24|this[u+1]<<16|this[u+2]<<8|this[u+3]},s.prototype.readBigInt64LE=fe(function(u){u=u>>>0,V(u,"offset");const l=this[u],B=this[u+7];(l===void 0||B===void 0)&&P(u,this.length-8);const M=this[u+4]+this[u+5]*2**8+this[u+6]*2**16+(B<<24);return(BigInt(M)<<BigInt(32))+BigInt(l+this[++u]*2**8+this[++u]*2**16+this[++u]*2**24)}),s.prototype.readBigInt64BE=fe(function(u){u=u>>>0,V(u,"offset");const l=this[u],B=this[u+7];(l===void 0||B===void 0)&&P(u,this.length-8);const M=(l<<24)+this[++u]*2**16+this[++u]*2**8+this[++u];return(BigInt(M)<<BigInt(32))+BigInt(this[++u]*2**24+this[++u]*2**16+this[++u]*2**8+B)}),s.prototype.readFloatLE=function(u,l){return u=u>>>0,l||oe(u,4,this.length),r.read(this,u,!0,23,4)},s.prototype.readFloatBE=function(u,l){return u=u>>>0,l||oe(u,4,this.length),r.read(this,u,!1,23,4)},s.prototype.readDoubleLE=function(u,l){return u=u>>>0,l||oe(u,8,this.length),r.read(this,u,!0,52,8)},s.prototype.readDoubleBE=function(u,l){return u=u>>>0,l||oe(u,8,this.length),r.read(this,u,!1,52,8)};function ie(d,u,l,B,M,W){if(!s.isBuffer(d))throw new TypeError('"buffer" argument must be a Buffer instance');if(u>M||u<W)throw new RangeError('"value" argument is out of bounds');if(l+B>d.length)throw new RangeError("Index out of range")}s.prototype.writeUintLE=s.prototype.writeUIntLE=function(u,l,B,M){if(u=+u,l=l>>>0,B=B>>>0,!M){const ge=Math.pow(2,8*B)-1;ie(this,u,l,B,ge,0)}let W=1,Z=0;for(this[l]=u&255;++Z<B&&(W*=256);)this[l+Z]=u/W&255;return l+B},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(u,l,B,M){if(u=+u,l=l>>>0,B=B>>>0,!M){const ge=Math.pow(2,8*B)-1;ie(this,u,l,B,ge,0)}let W=B-1,Z=1;for(this[l+W]=u&255;--W>=0&&(Z*=256);)this[l+W]=u/Z&255;return l+B},s.prototype.writeUint8=s.prototype.writeUInt8=function(u,l,B){return u=+u,l=l>>>0,B||ie(this,u,l,1,255,0),this[l]=u&255,l+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(u,l,B){return u=+u,l=l>>>0,B||ie(this,u,l,2,65535,0),this[l]=u&255,this[l+1]=u>>>8,l+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(u,l,B){return u=+u,l=l>>>0,B||ie(this,u,l,2,65535,0),this[l]=u>>>8,this[l+1]=u&255,l+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(u,l,B){return u=+u,l=l>>>0,B||ie(this,u,l,4,4294967295,0),this[l+3]=u>>>24,this[l+2]=u>>>16,this[l+1]=u>>>8,this[l]=u&255,l+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(u,l,B){return u=+u,l=l>>>0,B||ie(this,u,l,4,4294967295,0),this[l]=u>>>24,this[l+1]=u>>>16,this[l+2]=u>>>8,this[l+3]=u&255,l+4};function Se(d,u,l,B,M){O(u,B,M,d,l,7);let W=Number(u&BigInt(4294967295));d[l++]=W,W=W>>8,d[l++]=W,W=W>>8,d[l++]=W,W=W>>8,d[l++]=W;let Z=Number(u>>BigInt(32)&BigInt(4294967295));return d[l++]=Z,Z=Z>>8,d[l++]=Z,Z=Z>>8,d[l++]=Z,Z=Z>>8,d[l++]=Z,l}function A(d,u,l,B,M){O(u,B,M,d,l,7);let W=Number(u&BigInt(4294967295));d[l+7]=W,W=W>>8,d[l+6]=W,W=W>>8,d[l+5]=W,W=W>>8,d[l+4]=W;let Z=Number(u>>BigInt(32)&BigInt(4294967295));return d[l+3]=Z,Z=Z>>8,d[l+2]=Z,Z=Z>>8,d[l+1]=Z,Z=Z>>8,d[l]=Z,l+8}s.prototype.writeBigUInt64LE=fe(function(u,l=0){return Se(this,u,l,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeBigUInt64BE=fe(function(u,l=0){return A(this,u,l,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeIntLE=function(u,l,B,M){if(u=+u,l=l>>>0,!M){const be=Math.pow(2,8*B-1);ie(this,u,l,B,be-1,-be)}let W=0,Z=1,ge=0;for(this[l]=u&255;++W<B&&(Z*=256);)u<0&&ge===0&&this[l+W-1]!==0&&(ge=1),this[l+W]=(u/Z>>0)-ge&255;return l+B},s.prototype.writeIntBE=function(u,l,B,M){if(u=+u,l=l>>>0,!M){const be=Math.pow(2,8*B-1);ie(this,u,l,B,be-1,-be)}let W=B-1,Z=1,ge=0;for(this[l+W]=u&255;--W>=0&&(Z*=256);)u<0&&ge===0&&this[l+W+1]!==0&&(ge=1),this[l+W]=(u/Z>>0)-ge&255;return l+B},s.prototype.writeInt8=function(u,l,B){return u=+u,l=l>>>0,B||ie(this,u,l,1,127,-128),u<0&&(u=255+u+1),this[l]=u&255,l+1},s.prototype.writeInt16LE=function(u,l,B){return u=+u,l=l>>>0,B||ie(this,u,l,2,32767,-32768),this[l]=u&255,this[l+1]=u>>>8,l+2},s.prototype.writeInt16BE=function(u,l,B){return u=+u,l=l>>>0,B||ie(this,u,l,2,32767,-32768),this[l]=u>>>8,this[l+1]=u&255,l+2},s.prototype.writeInt32LE=function(u,l,B){return u=+u,l=l>>>0,B||ie(this,u,l,4,2147483647,-2147483648),this[l]=u&255,this[l+1]=u>>>8,this[l+2]=u>>>16,this[l+3]=u>>>24,l+4},s.prototype.writeInt32BE=function(u,l,B){return u=+u,l=l>>>0,B||ie(this,u,l,4,2147483647,-2147483648),u<0&&(u=4294967295+u+1),this[l]=u>>>24,this[l+1]=u>>>16,this[l+2]=u>>>8,this[l+3]=u&255,l+4},s.prototype.writeBigInt64LE=fe(function(u,l=0){return Se(this,u,l,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),s.prototype.writeBigInt64BE=fe(function(u,l=0){return A(this,u,l,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Fe(d,u,l,B,M,W){if(l+B>d.length)throw new RangeError("Index out of range");if(l<0)throw new RangeError("Index out of range")}function Be(d,u,l,B,M){return u=+u,l=l>>>0,M||Fe(d,u,l,4),r.write(d,u,l,B,23,4),l+4}s.prototype.writeFloatLE=function(u,l,B){return Be(this,u,l,!0,B)},s.prototype.writeFloatBE=function(u,l,B){return Be(this,u,l,!1,B)};function $e(d,u,l,B,M){return u=+u,l=l>>>0,M||Fe(d,u,l,8),r.write(d,u,l,B,52,8),l+8}s.prototype.writeDoubleLE=function(u,l,B){return $e(this,u,l,!0,B)},s.prototype.writeDoubleBE=function(u,l,B){return $e(this,u,l,!1,B)},s.prototype.copy=function(u,l,B,M){if(!s.isBuffer(u))throw new TypeError("argument should be a Buffer");if(B||(B=0),!M&&M!==0&&(M=this.length),l>=u.length&&(l=u.length),l||(l=0),M>0&&M<B&&(M=B),M===B||u.length===0||this.length===0)return 0;if(l<0)throw new RangeError("targetStart out of bounds");if(B<0||B>=this.length)throw new RangeError("Index out of range");if(M<0)throw new RangeError("sourceEnd out of bounds");M>this.length&&(M=this.length),u.length-l<M-B&&(M=u.length-l+B);const W=M-B;return this===u&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(l,B,M):Uint8Array.prototype.set.call(u,this.subarray(B,M),l),W},s.prototype.fill=function(u,l,B,M){if(typeof u=="string"){if(typeof l=="string"?(M=l,l=0,B=this.length):typeof B=="string"&&(M=B,B=this.length),M!==void 0&&typeof M!="string")throw new TypeError("encoding must be a string");if(typeof M=="string"&&!s.isEncoding(M))throw new TypeError("Unknown encoding: "+M);if(u.length===1){const Z=u.charCodeAt(0);(M==="utf8"&&Z<128||M==="latin1")&&(u=Z)}}else typeof u=="number"?u=u&255:typeof u=="boolean"&&(u=Number(u));if(l<0||this.length<l||this.length<B)throw new RangeError("Out of range index");if(B<=l)return this;l=l>>>0,B=B===void 0?this.length:B>>>0,u||(u=0);let W;if(typeof u=="number")for(W=l;W<B;++W)this[W]=u;else{const Z=s.isBuffer(u)?u:s.from(u,M),ge=Z.length;if(ge===0)throw new TypeError('The value "'+u+'" is invalid for argument "value"');for(W=0;W<B-l;++W)this[W+l]=Z[W%ge]}return this};const ce={};function de(d,u,l){ce[d]=class extends l{constructor(){super(),Object.defineProperty(this,"message",{value:u.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${d}]`,this.stack,delete this.name}get code(){return d}set code(M){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:M,writable:!0})}toString(){return`${this.name} [${d}]: ${this.message}`}}}de("ERR_BUFFER_OUT_OF_BOUNDS",function(d){return d?`${d} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),de("ERR_INVALID_ARG_TYPE",function(d,u){return`The "${d}" argument must be of type number. Received type ${typeof u}`},TypeError),de("ERR_OUT_OF_RANGE",function(d,u,l){let B=`The value of "${d}" is out of range.`,M=l;return Number.isInteger(l)&&Math.abs(l)>2**32?M=E(String(l)):typeof l=="bigint"&&(M=String(l),(l>BigInt(2)**BigInt(32)||l<-(BigInt(2)**BigInt(32)))&&(M=E(M)),M+="n"),B+=` It must be ${u}. Received ${M}`,B},RangeError);function E(d){let u="",l=d.length;const B=d[0]==="-"?1:0;for(;l>=B+4;l-=3)u=`_${d.slice(l-3,l)}${u}`;return`${d.slice(0,l)}${u}`}function T(d,u,l){V(u,"offset"),(d[u]===void 0||d[u+l]===void 0)&&P(u,d.length-(l+1))}function O(d,u,l,B,M,W){if(d>l||d<u){const Z=typeof u=="bigint"?"n":"";let ge;throw W>3?u===0||u===BigInt(0)?ge=`>= 0${Z} and < 2${Z} ** ${(W+1)*8}${Z}`:ge=`>= -(2${Z} ** ${(W+1)*8-1}${Z}) and < 2 ** ${(W+1)*8-1}${Z}`:ge=`>= ${u}${Z} and <= ${l}${Z}`,new ce.ERR_OUT_OF_RANGE("value",ge,d)}T(B,M,W)}function V(d,u){if(typeof d!="number")throw new ce.ERR_INVALID_ARG_TYPE(u,"number",d)}function P(d,u,l){throw Math.floor(d)!==d?(V(d,l),new ce.ERR_OUT_OF_RANGE(l||"offset","an integer",d)):u<0?new ce.ERR_BUFFER_OUT_OF_BOUNDS:new ce.ERR_OUT_OF_RANGE(l||"offset",`>= ${l?1:0} and <= ${u}`,d)}const G=/[^+/0-9A-Za-z-_]/g;function h(d){if(d=d.split("=")[0],d=d.trim().replace(G,""),d.length<2)return"";for(;d.length%4!==0;)d=d+"=";return d}function o(d,u){u=u||1/0;let l;const B=d.length;let M=null;const W=[];for(let Z=0;Z<B;++Z){if(l=d.charCodeAt(Z),l>55295&&l<57344){if(!M){if(l>56319){(u-=3)>-1&&W.push(239,191,189);continue}else if(Z+1===B){(u-=3)>-1&&W.push(239,191,189);continue}M=l;continue}if(l<56320){(u-=3)>-1&&W.push(239,191,189),M=l;continue}l=(M-55296<<10|l-56320)+65536}else M&&(u-=3)>-1&&W.push(239,191,189);if(M=null,l<128){if((u-=1)<0)break;W.push(l)}else if(l<2048){if((u-=2)<0)break;W.push(l>>6|192,l&63|128)}else if(l<65536){if((u-=3)<0)break;W.push(l>>12|224,l>>6&63|128,l&63|128)}else if(l<1114112){if((u-=4)<0)break;W.push(l>>18|240,l>>12&63|128,l>>6&63|128,l&63|128)}else throw new Error("Invalid code point")}return W}function c(d){const u=[];for(let l=0;l<d.length;++l)u.push(d.charCodeAt(l)&255);return u}function y(d,u){let l,B,M;const W=[];for(let Z=0;Z<d.length&&!((u-=2)<0);++Z)l=d.charCodeAt(Z),B=l>>8,M=l%256,W.push(M),W.push(B);return W}function _(d){return e.toByteArray(h(d))}function I(d,u,l,B){let M;for(M=0;M<B&&!(M+l>=u.length||M>=d.length);++M)u[M+l]=d[M];return M}function Y(d,u){return d instanceof u||d!=null&&d.constructor!=null&&d.constructor.name!=null&&d.constructor.name===u.name}function se(d){return d!==d}const ue=function(){const d="0123456789abcdef",u=new Array(256);for(let l=0;l<16;++l){const B=l*16;for(let M=0;M<16;++M)u[B+M]=d[l]+d[M]}return u}();function fe(d){return typeof BigInt>"u"?me:d}function me(){throw new Error("BigInt not supported")}})(aa);var _s;(function(t){t[t.SysFatal=1]="SysFatal",t[t.SysTransient=2]="SysTransient",t[t.DestinationInvalid=3]="DestinationInvalid",t[t.CanisterReject=4]="CanisterReject",t[t.CanisterError=5]="CanisterError"})(_s||(_s={}));const Wu="modulepreload",zu=function(t){return"/"+t},uo={},Lu=function(e,r,n){if(!r||r.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(r.map(a=>{if(a=zu(a),a in uo)return;uo[a]=!0;const f=a.endsWith(".css"),s=f?'[rel="stylesheet"]':"";if(!!n)for(let S=i.length-1;S>=0;S--){const v=i[S];if(v.href===a&&(!f||v.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${a}"]${s}`))return;const w=document.createElement("link");if(w.rel=f?"stylesheet":Wu,f||(w.as="script",w.crossOrigin=""),w.href=a,document.head.appendChild(w),f)return new Promise((S,v)=>{w.addEventListener("load",S),w.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${a}`)))})})).then(()=>e()).catch(a=>{const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=a,window.dispatchEvent(f),!f.defaultPrevented)throw a})},pi="abcdefghijklmnopqrstuvwxyz234567",Xr=Object.create(null);for(let t=0;t<pi.length;t++)Xr[pi[t]]=t;Xr[0]=Xr.o;Xr[1]=Xr.i;function Xu(t){let e=0,r=0,n="";function i(a){return e<0?r|=a>>-e:r=a<<e&248,e>3?(e-=8,1):(e<4&&(n+=pi[r>>3],e+=5),0)}for(let a=0;a<t.length;)a+=i(t[a]);return n+(e<0?pi[r>>3]:"")}function Ju(t){let e=0,r=0;const n=new Uint8Array(t.length*4/3|0);let i=0;function a(f){let s=Xr[f.toLowerCase()];if(s===void 0)throw new Error(`Invalid character: ${JSON.stringify(f)}`);s<<=3,r|=s>>>e,e+=5,e>=8&&(n[i++]=r,e-=8,e>0?r=s<<5-e&255:r=0)}for(const f of t)a(f);return n.slice(0,i)}const Qu=new Uint32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]);function Du(t){const e=new Uint8Array(t);let r=-1;for(let n=0;n<e.length;n++){const a=(e[n]^r)&255;r=Qu[a]^r>>>8}return(r^-1)>>>0}const Rr=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function qs(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function ef(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function it(t,...e){if(!qs(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function fo(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function tf(t,e){it(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}function bn(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function Di(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Et(t,e){return t<<32-e|t>>>e}const ua=(()=>typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function")(),rf=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Jr(t){if(it(t),ua)return t.toHex();let e="";for(let r=0;r<t.length;r++)e+=rf[t[r]];return e}const $t={_0:48,_9:57,A:65,F:70,a:97,f:102};function lo(t){if(t>=$t._0&&t<=$t._9)return t-$t._0;if(t>=$t.A&&t<=$t.F)return t-($t.A-10);if(t>=$t.a&&t<=$t.f)return t-($t.a-10)}function fa(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(ua)return Uint8Array.fromHex(t);const e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(r);for(let i=0,a=0;i<r;i++,a+=2){const f=lo(t.charCodeAt(a)),s=lo(t.charCodeAt(a+1));if(f===void 0||s===void 0){const p=t[a]+t[a+1];throw new Error('hex string expected, got non-hex character "'+p+'" at index '+a)}n[i]=f*16+s}return n}function In(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function la(t){return typeof t=="string"&&(t=In(t)),it(t),t}function Ce(...t){let e=0;for(let n=0;n<t.length;n++){const i=t[n];it(i),e+=i.length}const r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){const a=t[n];r.set(a,i),i+=a.length}return r}class nf{}function Vs(t){const e=n=>t().update(la(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function ha(t=32){if(Rr&&typeof Rr.getRandomValues=="function")return Rr.getRandomValues(new Uint8Array(t));if(Rr&&typeof Rr.randomBytes=="function")return Uint8Array.from(Rr.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}function sf(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const i=BigInt(32),a=BigInt(4294967295),f=Number(r>>i&a),s=Number(r&a),p=n?4:0,w=n?0:4;t.setUint32(e+p,f,n),t.setUint32(e+w,s,n)}function of(t,e,r){return t&e^~t&r}function af(t,e,r){return t&e^t&r^e&r}class da extends nf{constructor(e,r,n,i){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=i,this.buffer=new Uint8Array(e),this.view=Di(this.buffer)}update(e){fo(this),e=la(e),it(e);const{view:r,buffer:n,blockLen:i}=this,a=e.length;for(let f=0;f<a;){const s=Math.min(i-this.pos,a-f);if(s===i){const p=Di(e);for(;i<=a-f;f+=i)this.process(p,f);continue}n.set(e.subarray(f,f+s),this.pos),this.pos+=s,f+=s,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){fo(this),tf(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:i,isLE:a}=this;let{pos:f}=this;r[f++]=128,bn(this.buffer.subarray(f)),this.padOffset>i-f&&(this.process(n,0),f=0);for(let v=f;v<i;v++)r[v]=0;sf(n,i-8,BigInt(this.length*8),a),this.process(n,0);const s=Di(e),p=this.outputLen;if(p%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const w=p/4,S=this.get();if(w>S.length)throw new Error("_sha2: outputLen bigger than state");for(let v=0;v<w;v++)s.setUint32(4*v,S[v],a)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:i,finished:a,destroyed:f,pos:s}=this;return e.destroyed=f,e.finished=a,e.length=i,e.pos=s,i%r&&e.buffer.set(n),e}clone(){return this._cloneInto()}}const Wt=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),zt=Uint32Array.from([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]),De=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),Pn=BigInt(2**32-1),ho=BigInt(32);function cf(t,e=!1){return e?{h:Number(t&Pn),l:Number(t>>ho&Pn)}:{h:Number(t>>ho&Pn)|0,l:Number(t&Pn)|0}}function uf(t,e=!1){const r=t.length;let n=new Uint32Array(r),i=new Uint32Array(r);for(let a=0;a<r;a++){const{h:f,l:s}=cf(t[a],e);[n[a],i[a]]=[f,s]}return[n,i]}const po=(t,e,r)=>t>>>r,yo=(t,e,r)=>t<<32-r|e>>>r,Ur=(t,e,r)=>t>>>r|e<<32-r,Or=(t,e,r)=>t<<32-r|e>>>r,Cn=(t,e,r)=>t<<64-r|e>>>r-32,qn=(t,e,r)=>t>>>r-32|e<<64-r;function Mt(t,e,r,n){const i=(e>>>0)+(n>>>0);return{h:t+r+(i/2**32|0)|0,l:i|0}}const ff=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),lf=(t,e,r,n)=>e+r+n+(t/2**32|0)|0,hf=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),df=(t,e,r,n,i)=>e+r+n+i+(t/2**32|0)|0,pf=(t,e,r,n,i)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(i>>>0),yf=(t,e,r,n,i,a)=>e+r+n+i+a+(t/2**32|0)|0,gf=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Lt=new Uint32Array(64);class pa extends da{constructor(e=32){super(64,e,8,!1),this.A=Wt[0]|0,this.B=Wt[1]|0,this.C=Wt[2]|0,this.D=Wt[3]|0,this.E=Wt[4]|0,this.F=Wt[5]|0,this.G=Wt[6]|0,this.H=Wt[7]|0}get(){const{A:e,B:r,C:n,D:i,E:a,F:f,G:s,H:p}=this;return[e,r,n,i,a,f,s,p]}set(e,r,n,i,a,f,s,p){this.A=e|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=a|0,this.F=f|0,this.G=s|0,this.H=p|0}process(e,r){for(let v=0;v<16;v++,r+=4)Lt[v]=e.getUint32(r,!1);for(let v=16;v<64;v++){const b=Lt[v-15],m=Lt[v-2],g=Et(b,7)^Et(b,18)^b>>>3,k=Et(m,17)^Et(m,19)^m>>>10;Lt[v]=k+Lt[v-7]+g+Lt[v-16]|0}let{A:n,B:i,C:a,D:f,E:s,F:p,G:w,H:S}=this;for(let v=0;v<64;v++){const b=Et(s,6)^Et(s,11)^Et(s,25),m=S+b+of(s,p,w)+gf[v]+Lt[v]|0,k=(Et(n,2)^Et(n,13)^Et(n,22))+af(n,i,a)|0;S=w,w=p,p=s,s=f+m|0,f=a,a=i,i=n,n=m+k|0}n=n+this.A|0,i=i+this.B|0,a=a+this.C|0,f=f+this.D|0,s=s+this.E|0,p=p+this.F|0,w=w+this.G|0,S=S+this.H|0,this.set(n,i,a,f,s,p,w,S)}roundClean(){bn(Lt)}destroy(){this.set(0,0,0,0,0,0,0,0),bn(this.buffer)}}class wf extends pa{constructor(){super(28),this.A=zt[0]|0,this.B=zt[1]|0,this.C=zt[2]|0,this.D=zt[3]|0,this.E=zt[4]|0,this.F=zt[5]|0,this.G=zt[6]|0,this.H=zt[7]|0}}const ya=(()=>uf(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))))(),mf=(()=>ya[0])(),bf=(()=>ya[1])(),Xt=new Uint32Array(80),Jt=new Uint32Array(80);class _f extends da{constructor(e=64){super(128,e,16,!1),this.Ah=De[0]|0,this.Al=De[1]|0,this.Bh=De[2]|0,this.Bl=De[3]|0,this.Ch=De[4]|0,this.Cl=De[5]|0,this.Dh=De[6]|0,this.Dl=De[7]|0,this.Eh=De[8]|0,this.El=De[9]|0,this.Fh=De[10]|0,this.Fl=De[11]|0,this.Gh=De[12]|0,this.Gl=De[13]|0,this.Hh=De[14]|0,this.Hl=De[15]|0}get(){const{Ah:e,Al:r,Bh:n,Bl:i,Ch:a,Cl:f,Dh:s,Dl:p,Eh:w,El:S,Fh:v,Fl:b,Gh:m,Gl:g,Hh:k,Hl:q}=this;return[e,r,n,i,a,f,s,p,w,S,v,b,m,g,k,q]}set(e,r,n,i,a,f,s,p,w,S,v,b,m,g,k,q){this.Ah=e|0,this.Al=r|0,this.Bh=n|0,this.Bl=i|0,this.Ch=a|0,this.Cl=f|0,this.Dh=s|0,this.Dl=p|0,this.Eh=w|0,this.El=S|0,this.Fh=v|0,this.Fl=b|0,this.Gh=m|0,this.Gl=g|0,this.Hh=k|0,this.Hl=q|0}process(e,r){for(let j=0;j<16;j++,r+=4)Xt[j]=e.getUint32(r),Jt[j]=e.getUint32(r+=4);for(let j=16;j<80;j++){const D=Xt[j-15]|0,R=Jt[j-15]|0,C=Ur(D,R,1)^Ur(D,R,8)^po(D,R,7),z=Or(D,R,1)^Or(D,R,8)^yo(D,R,7),te=Xt[j-2]|0,re=Jt[j-2]|0,U=Ur(te,re,19)^Cn(te,re,61)^po(te,re,6),H=Or(te,re,19)^qn(te,re,61)^yo(te,re,6),J=hf(z,H,Jt[j-7],Jt[j-16]),x=df(J,C,U,Xt[j-7],Xt[j-16]);Xt[j]=x|0,Jt[j]=J|0}let{Ah:n,Al:i,Bh:a,Bl:f,Ch:s,Cl:p,Dh:w,Dl:S,Eh:v,El:b,Fh:m,Fl:g,Gh:k,Gl:q,Hh:X,Hl:K}=this;for(let j=0;j<80;j++){const D=Ur(v,b,14)^Ur(v,b,18)^Cn(v,b,41),R=Or(v,b,14)^Or(v,b,18)^qn(v,b,41),C=v&m^~v&k,z=b&g^~b&q,te=pf(K,R,z,bf[j],Jt[j]),re=yf(te,X,D,C,mf[j],Xt[j]),U=te|0,H=Ur(n,i,28)^Cn(n,i,34)^Cn(n,i,39),J=Or(n,i,28)^qn(n,i,34)^qn(n,i,39),x=n&a^n&s^a&s,N=i&f^i&p^f&p;X=k|0,K=q|0,k=m|0,q=g|0,m=v|0,g=b|0,{h:v,l:b}=Mt(w|0,S|0,re|0,U|0),w=s|0,S=p|0,s=a|0,p=f|0,a=n|0,f=i|0;const $=ff(U,J,N);n=lf($,re,H,x),i=$|0}({h:n,l:i}=Mt(this.Ah|0,this.Al|0,n|0,i|0)),{h:a,l:f}=Mt(this.Bh|0,this.Bl|0,a|0,f|0),{h:s,l:p}=Mt(this.Ch|0,this.Cl|0,s|0,p|0),{h:w,l:S}=Mt(this.Dh|0,this.Dl|0,w|0,S|0),{h:v,l:b}=Mt(this.Eh|0,this.El|0,v|0,b|0),{h:m,l:g}=Mt(this.Fh|0,this.Fl|0,m|0,g|0),{h:k,l:q}=Mt(this.Gh|0,this.Gl|0,k|0,q|0),{h:X,l:K}=Mt(this.Hh|0,this.Hl|0,X|0,K|0),this.set(n,i,a,f,s,p,w,S,v,b,m,g,k,q,X,K)}roundClean(){bn(Xt,Jt)}destroy(){bn(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Gs=Vs(()=>new pa),xf=Vs(()=>new wf),Ef=Vs(()=>new _f),Af=Gs,vf=xf;function Bf(t){return vf.create().update(new Uint8Array(t)).digest()}const Vn="__principal__",Tf=2,go=4,Sf="aaaaa-aa",Nf=t=>{var e;return new Uint8Array(((e=t.match(/.{1,2}/g))!==null&&e!==void 0?e:[]).map(r=>parseInt(r,16)))},If=t=>t.reduce((e,r)=>e+r.toString(16).padStart(2,"0"),"");let _e=class zn{constructor(e){this._arr=e,this._isPrincipal=!0}static anonymous(){return new this(new Uint8Array([go]))}static managementCanister(){return this.fromText(Sf)}static selfAuthenticating(e){const r=Bf(e);return new this(new Uint8Array([...r,Tf]))}static from(e){if(typeof e=="string")return zn.fromText(e);if(Object.getPrototypeOf(e)===Uint8Array.prototype)return new zn(e);if(typeof e=="object"&&e!==null&&e._isPrincipal===!0)return new zn(e._arr);throw new Error(`Impossible to convert ${JSON.stringify(e)} to Principal.`)}static fromHex(e){return new this(Nf(e))}static fromText(e){let r=e;if(e.includes(Vn)){const f=JSON.parse(e);Vn in f&&(r=f[Vn])}const n=r.toLowerCase().replace(/-/g,"");let i=Ju(n);i=i.slice(4,i.length);const a=new this(i);if(a.toText()!==r)throw new Error(`Principal "${a.toText()}" does not have a valid checksum (original value "${r}" may not be a valid Principal ID).`);return a}static fromUint8Array(e){return new this(e)}isAnonymous(){return this._arr.byteLength===1&&this._arr[0]===go}toUint8Array(){return this._arr}toHex(){return If(this._arr).toUpperCase()}toText(){const e=new ArrayBuffer(4);new DataView(e).setUint32(0,Du(this._arr));const n=new Uint8Array(e),i=Uint8Array.from(this._arr),a=new Uint8Array([...n,...i]),s=Xu(a).match(/.{1,5}/g);if(!s)throw new Error;return s.join("-")}toString(){return this.toText()}toJSON(){return{[Vn]:this.toText()}}compareTo(e){for(let r=0;r<Math.min(this._arr.length,e._arr.length);r++){if(this._arr[r]<e._arr[r])return"lt";if(this._arr[r]>e._arr[r])return"gt"}return this._arr.length<e._arr.length?"lt":this._arr.length>e._arr.length?"gt":"eq"}ltEq(e){const r=this.compareTo(e);return r=="lt"||r=="eq"}gtEq(e){const r=this.compareTo(e);return r=="gt"||r=="eq"}};function Ot(...t){const e=new Uint8Array(t.reduce((n,i)=>n+i.byteLength,0));let r=0;for(const n of t)e.set(new Uint8Array(n),r),r+=n.byteLength;return e.buffer}function We(t){return[...new Uint8Array(t)].map(e=>e.toString(16).padStart(2,"0")).join("")}const Rf=new RegExp(/^[0-9a-fA-F]+$/);function yi(t){if(!Rf.test(t))throw new Error("Invalid hexadecimal string.");const e=[...t].reduce((r,n,i)=>(r[i/2|0]=(r[i/2|0]||"")+n,r),[]).map(r=>Number.parseInt(r,16));return new Uint8Array(e).buffer}function ga(t,e){if(t.byteLength!==e.byteLength)return t.byteLength-e.byteLength;const r=new Uint8Array(t),n=new Uint8Array(e);for(let i=0;i<r.length;i++)if(r[i]!==n[i])return r[i]-n[i];return 0}function Ni(t,e){return ga(t,e)===0}function Ln(t){return new DataView(t.buffer,t.byteOffset,t.byteLength).buffer}function an(t){return t instanceof Uint8Array?Ln(t):t instanceof ArrayBuffer?t:Array.isArray(t)?Ln(new Uint8Array(t)):"buffer"in t?an(t.buffer):Ln(new Uint8Array(t))}class Me extends Error{constructor(e){super(e),this.message=e,this.name="AgentError",this.__proto__=Me.prototype,Object.setPrototypeOf(this,Me.prototype)}}function Ne(...t){const e=new Uint8Array(t.reduce((n,i)=>n+i.byteLength,0));let r=0;for(const n of t)e.set(new Uint8Array(n),r),r+=n.byteLength;return e}class tn{constructor(e,r=(e==null?void 0:e.byteLength)||0){this._buffer=gi(e||new ArrayBuffer(0)),this._view=new Uint8Array(this._buffer,0,r)}save(){return this._view}restore(e){this._view=e}get buffer(){return gi(this._view.slice())}get byteLength(){return this._view.byteLength}read(e){const r=this._view.subarray(0,e);return this._view=this._view.subarray(e),r.slice().buffer}readUint8(){const e=this._view[0];return this._view=this._view.subarray(1),e}write(e){const r=new Uint8Array(e),n=this._view.byteLength;this._view.byteOffset+this._view.byteLength+r.byteLength>=this._buffer.byteLength?this.alloc(r.byteLength):this._view=new Uint8Array(this._buffer,this._view.byteOffset,this._view.byteLength+r.byteLength),this._view.set(r,n)}get end(){return this._view.byteLength===0}alloc(e){const r=new ArrayBuffer((this._buffer.byteLength+e)*1.2|0),n=new Uint8Array(r,0,this._view.byteLength+e);n.set(this._view),this._buffer=r,this._view=n}}function es(t){return new DataView(t.buffer,t.byteOffset,t.byteLength).buffer}function gi(t){return t instanceof Uint8Array?es(t):t instanceof ArrayBuffer?t:Array.isArray(t)?es(new Uint8Array(t)):"buffer"in t?gi(t.buffer):es(new Uint8Array(t))}function Uf(t){const r=new TextEncoder().encode(t);let n=0;for(const i of r)n=(n*223+i)%2**32;return n}function Ut(t){if(/^_\d+_$/.test(t)||/^_0x[0-9a-fA-F]+_$/.test(t)){const e=+t.slice(1,-1);if(Number.isSafeInteger(e)&&e>=0&&e<2**32)return e}return Uf(t)}function wa(){throw new Error("unexpected end of buffer")}function Ar(t,e){return t.byteLength<e&&wa(),t.read(e)}function vr(t){const e=t.readUint8();return e===void 0&&wa(),e}function ke(t){if(typeof t=="number"&&(t=BigInt(t)),t<BigInt(0))throw new Error("Cannot leb encode negative values.");const e=(t===BigInt(0)?0:Math.ceil(Math.log2(Number(t))))+1,r=new tn(new ArrayBuffer(e),0);for(;;){const n=Number(t&BigInt(127));if(t/=BigInt(128),t===BigInt(0)){r.write(new Uint8Array([n]));break}else r.write(new Uint8Array([n|128]))}return r.buffer}function Ke(t){let e=BigInt(1),r=BigInt(0),n;do n=vr(t),r+=BigInt(n&127).valueOf()*e,e*=BigInt(128);while(n>=128);return r}function je(t){typeof t=="number"&&(t=BigInt(t));const e=t<BigInt(0);e&&(t=-t-BigInt(1));const r=(t===BigInt(0)?0:Math.ceil(Math.log2(Number(t))))+1,n=new tn(new ArrayBuffer(r),0);for(;;){const a=i(t);if(t/=BigInt(128),e&&t===BigInt(0)&&a&64||!e&&t===BigInt(0)&&!(a&64)){n.write(new Uint8Array([a]));break}else n.write(new Uint8Array([a|128]))}function i(a){const f=a%BigInt(128);return Number(e?BigInt(128)-f-BigInt(1):f)}return n.buffer}function Dt(t){const e=new Uint8Array(t.buffer);let r=0;for(;r<e.byteLength;r++)if(e[r]<128){if(!(e[r]&64))return Ke(t);break}const n=new Uint8Array(Ar(t,r+1));let i=BigInt(0);for(let a=n.byteLength-1;a>=0;a--)i=i*BigInt(128)+BigInt(128-(n[a]&127)-1);return-i-BigInt(1)}function Of(t,e){if(BigInt(t)<BigInt(0))throw new Error("Cannot write negative values.");return ma(t,e)}function ma(t,e){t=BigInt(t);const r=new tn(new ArrayBuffer(Math.min(1,e)),0);let n=0,i=BigInt(256),a=BigInt(0),f=Number(t%i);for(r.write(new Uint8Array([f]));++n<e;)t<0&&a===BigInt(0)&&f!==0&&(a=BigInt(1)),f=Number((t/i-a)%BigInt(256)),r.write(new Uint8Array([f])),i*=BigInt(256);return r.buffer}function ba(t,e){let r=BigInt(vr(t)),n=BigInt(1),i=0;for(;++i<e;){n*=BigInt(256);const a=BigInt(vr(t));r=r+n*a}return r}function Ff(t,e){let r=ba(t,e);const n=BigInt(2)**(BigInt(8)*BigInt(e-1)+BigInt(7));return r>=n&&(r-=n*BigInt(2)),r}function xs(t){const e=BigInt(t);if(t<0)throw new RangeError("Input must be non-negative");return BigInt(1)<<e}const Xn="DIDL",wo=400;function _n(t,e,r){return t.map((n,i)=>r(n,e[i]))}class $f{constructor(){this._typs=[],this._idx=new Map}has(e){return this._idx.has(e.name)}add(e,r){const n=this._typs.length;this._idx.set(e.name,n),this._typs.push(r)}merge(e,r){const n=this._idx.get(e.name),i=this._idx.get(r);if(n===void 0)throw new Error("Missing type index for "+e);if(i===void 0)throw new Error("Missing type index for "+r);this._typs[n]=this._typs[i],this._typs.splice(i,1),this._idx.delete(r)}encode(){const e=ke(this._typs.length),r=Ne(...this._typs);return Ne(e,r)}indexOf(e){if(!this._idx.has(e))throw new Error("Missing type index for "+e);return je(this._idx.get(e)||0)}}class Mf{visitType(e,r){throw new Error("Not implemented")}visitPrimitive(e,r){return this.visitType(e,r)}visitEmpty(e,r){return this.visitPrimitive(e,r)}visitBool(e,r){return this.visitPrimitive(e,r)}visitNull(e,r){return this.visitPrimitive(e,r)}visitReserved(e,r){return this.visitPrimitive(e,r)}visitText(e,r){return this.visitPrimitive(e,r)}visitNumber(e,r){return this.visitPrimitive(e,r)}visitInt(e,r){return this.visitNumber(e,r)}visitNat(e,r){return this.visitNumber(e,r)}visitFloat(e,r){return this.visitPrimitive(e,r)}visitFixedInt(e,r){return this.visitNumber(e,r)}visitFixedNat(e,r){return this.visitNumber(e,r)}visitPrincipal(e,r){return this.visitPrimitive(e,r)}visitConstruct(e,r){return this.visitType(e,r)}visitVec(e,r,n){return this.visitConstruct(e,n)}visitOpt(e,r,n){return this.visitConstruct(e,n)}visitRecord(e,r,n){return this.visitConstruct(e,n)}visitTuple(e,r,n){const i=r.map((a,f)=>[`_${f}_`,a]);return this.visitRecord(e,i,n)}visitVariant(e,r,n){return this.visitConstruct(e,n)}visitRec(e,r,n){return this.visitConstruct(r,n)}visitFunc(e,r){return this.visitConstruct(e,r)}visitService(e,r){return this.visitConstruct(e,r)}}class Ii{display(){return this.name}valueToString(e){return qe(e)}buildTypeTable(e){e.has(this)||this._buildTypeTableImpl(e)}}class yt extends Ii{checkType(e){if(this.name!==e.name)throw new Error(`type mismatch: type on the wire ${e.name}, expect type ${this.name}`);return e}_buildTypeTableImpl(e){}}class ir extends Ii{checkType(e){if(e instanceof Zt){const r=e.getType();if(typeof r>"u")throw new Error("type mismatch with uninitialized type");return r}throw new Error(`type mismatch: type on the wire ${e.name}, expect type ${this.name}`)}encodeType(e){return e.indexOf(this.name)}}class _a extends yt{accept(e,r){return e.visitEmpty(this,r)}covariant(e){throw new Error(`Invalid ${this.display()} argument: ${qe(e)}`)}encodeValue(){throw new Error("Empty cannot appear as a function argument")}valueToString(){throw new Error("Empty cannot appear as a value")}encodeType(){return je(-17)}decodeValue(){throw new Error("Empty cannot appear as an output")}get name(){return"empty"}}class xa extends Ii{checkType(e){throw new Error("Method not implemented for unknown.")}accept(e,r){throw e.visitType(this,r)}covariant(e){throw new Error(`Invalid ${this.display()} argument: ${qe(e)}`)}encodeValue(){throw new Error("Unknown cannot appear as a function argument")}valueToString(){throw new Error("Unknown cannot appear as a value")}encodeType(){throw new Error("Unknown cannot be serialized")}decodeValue(e,r){let n=r.decodeValue(e,r);Object(n)!==n&&(n=Object(n));let i;return r instanceof Zt?i=()=>r.getType():i=()=>r,Object.defineProperty(n,"type",{value:i,writable:!0,enumerable:!1,configurable:!0}),n}_buildTypeTableImpl(){throw new Error("Unknown cannot be serialized")}get name(){return"Unknown"}}class Ea extends yt{accept(e,r){return e.visitBool(this,r)}covariant(e){if(typeof e=="boolean")return!0;throw new Error(`Invalid ${this.display()} argument: ${qe(e)}`)}encodeValue(e){return new Uint8Array([e?1:0])}encodeType(){return je(-2)}decodeValue(e,r){switch(this.checkType(r),vr(e)){case 0:return!1;case 1:return!0;default:throw new Error("Boolean value out of range")}}get name(){return"bool"}}class wi extends yt{accept(e,r){return e.visitNull(this,r)}covariant(e){if(e===null)return!0;throw new Error(`Invalid ${this.display()} argument: ${qe(e)}`)}encodeValue(){return new ArrayBuffer(0)}encodeType(){return je(-1)}decodeValue(e,r){return this.checkType(r),null}get name(){return"null"}}class Qr extends yt{accept(e,r){return e.visitReserved(this,r)}covariant(e){return!0}encodeValue(){return new ArrayBuffer(0)}encodeType(){return je(-16)}decodeValue(e,r){return r.name!==this.name&&r.decodeValue(e,r),null}get name(){return"reserved"}}class Aa extends yt{accept(e,r){return e.visitText(this,r)}covariant(e){if(typeof e=="string")return!0;throw new Error(`Invalid ${this.display()} argument: ${qe(e)}`)}encodeValue(e){const r=new TextEncoder().encode(e),n=ke(r.byteLength);return Ne(n,r)}encodeType(){return je(-15)}decodeValue(e,r){this.checkType(r);const n=Ke(e),i=Ar(e,Number(n));return new TextDecoder("utf8",{fatal:!0}).decode(i)}get name(){return"text"}valueToString(e){return'"'+e+'"'}}class va extends yt{accept(e,r){return e.visitInt(this,r)}covariant(e){if(typeof e=="bigint"||Number.isInteger(e))return!0;throw new Error(`Invalid ${this.display()} argument: ${qe(e)}`)}encodeValue(e){return je(e)}encodeType(){return je(-4)}decodeValue(e,r){return this.checkType(r),Dt(e)}get name(){return"int"}valueToString(e){return e.toString()}}class Ba extends yt{accept(e,r){return e.visitNat(this,r)}covariant(e){if(typeof e=="bigint"&&e>=BigInt(0)||Number.isInteger(e)&&e>=0)return!0;throw new Error(`Invalid ${this.display()} argument: ${qe(e)}`)}encodeValue(e){return ke(e)}encodeType(){return je(-3)}decodeValue(e,r){return this.checkType(r),Ke(e)}get name(){return"nat"}valueToString(e){return e.toString()}}class Hs extends yt{constructor(e){if(super(),this._bits=e,e!==32&&e!==64)throw new Error("not a valid float type")}accept(e,r){return e.visitFloat(this,r)}covariant(e){if(typeof e=="number"||e instanceof Number)return!0;throw new Error(`Invalid ${this.display()} argument: ${qe(e)}`)}encodeValue(e){const r=new ArrayBuffer(this._bits/8),n=new DataView(r);return this._bits===32?n.setFloat32(0,e,!0):n.setFloat64(0,e,!0),r}encodeType(){const e=this._bits===32?-13:-14;return je(e)}decodeValue(e,r){this.checkType(r);const n=Ar(e,this._bits/8),i=new DataView(n);return this._bits===32?i.getFloat32(0,!0):i.getFloat64(0,!0)}get name(){return"float"+this._bits}valueToString(e){return e.toString()}}class Br extends yt{constructor(e){super(),this._bits=e}accept(e,r){return e.visitFixedInt(this,r)}covariant(e){const r=xs(this._bits-1)*BigInt(-1),n=xs(this._bits-1)-BigInt(1);let i=!1;if(typeof e=="bigint")i=e>=r&&e<=n;else if(Number.isInteger(e)){const a=BigInt(e);i=a>=r&&a<=n}else i=!1;if(i)return!0;throw new Error(`Invalid ${this.display()} argument: ${qe(e)}`)}encodeValue(e){return ma(e,this._bits/8)}encodeType(){const e=Math.log2(this._bits)-3;return je(-9-e)}decodeValue(e,r){this.checkType(r);const n=Ff(e,this._bits/8);return this._bits<=32?Number(n):n}get name(){return`int${this._bits}`}valueToString(e){return e.toString()}}class nr extends yt{constructor(e){super(),this._bits=e}accept(e,r){return e.visitFixedNat(this,r)}covariant(e){const r=xs(this._bits);let n=!1;if(typeof e=="bigint"&&e>=BigInt(0)?n=e<r:Number.isInteger(e)&&e>=0?n=BigInt(e)<r:n=!1,n)return!0;throw new Error(`Invalid ${this.display()} argument: ${qe(e)}`)}encodeValue(e){return Of(e,this._bits/8)}encodeType(){const e=Math.log2(this._bits)-3;return je(-5-e)}decodeValue(e,r){this.checkType(r);const n=ba(e,this._bits/8);return this._bits<=32?Number(n):n}get name(){return`nat${this._bits}`}valueToString(e){return e.toString()}}class Ri extends ir{constructor(e){super(),this._type=e,this._blobOptimization=!1,e instanceof nr&&e._bits===8&&(this._blobOptimization=!0)}accept(e,r){return e.visitVec(this,this._type,r)}covariant(e){const r=this._type instanceof nr?this._type._bits:this._type instanceof Br?this._type._bits:0;if(ArrayBuffer.isView(e)&&r==e.BYTES_PER_ELEMENT*8||Array.isArray(e)&&e.every((n,i)=>{try{return this._type.covariant(n)}catch(a){throw new Error(`Invalid ${this.display()} argument: 

index ${i} -> ${a.message}`)}}))return!0;throw new Error(`Invalid ${this.display()} argument: ${qe(e)}`)}encodeValue(e){const r=ke(e.length);if(this._blobOptimization)return Ne(r,new Uint8Array(e));if(ArrayBuffer.isView(e))return Ne(r,new Uint8Array(e.buffer));const n=new tn(new ArrayBuffer(r.byteLength+e.length),0);n.write(r);for(const i of e){const a=this._type.encodeValue(i);n.write(new Uint8Array(a))}return n.buffer}_buildTypeTableImpl(e){this._type.buildTypeTable(e);const r=je(-19),n=this._type.encodeType(e);e.add(this,Ne(r,n))}decodeValue(e,r){const n=this.checkType(r);if(!(n instanceof Ri))throw new Error("Not a vector type");const i=Number(Ke(e));if(this._type instanceof nr){if(this._type._bits==8)return new Uint8Array(e.read(i));if(this._type._bits==16)return new Uint16Array(e.read(i*2));if(this._type._bits==32)return new Uint32Array(e.read(i*4));if(this._type._bits==64)return new BigUint64Array(e.read(i*8))}if(this._type instanceof Br){if(this._type._bits==8)return new Int8Array(e.read(i));if(this._type._bits==16)return new Int16Array(e.read(i*2));if(this._type._bits==32)return new Int32Array(e.read(i*4));if(this._type._bits==64)return new BigInt64Array(e.read(i*8))}const a=[];for(let f=0;f<i;f++)a.push(this._type.decodeValue(e,n._type));return a}get name(){return`vec ${this._type.name}`}display(){return`vec ${this._type.display()}`}valueToString(e){return"vec {"+e.map(n=>this._type.valueToString(n)).join("; ")+"}"}}class Tr extends ir{constructor(e){super(),this._type=e}accept(e,r){return e.visitOpt(this,this._type,r)}covariant(e){try{if(Array.isArray(e)&&(e.length===0||e.length===1&&this._type.covariant(e[0])))return!0}catch(r){throw new Error(`Invalid ${this.display()} argument: ${qe(e)} 

-> ${r.message}`)}throw new Error(`Invalid ${this.display()} argument: ${qe(e)}`)}encodeValue(e){return e.length===0?new Uint8Array([0]):Ne(new Uint8Array([1]),this._type.encodeValue(e[0]))}_buildTypeTableImpl(e){this._type.buildTypeTable(e);const r=je(-18),n=this._type.encodeType(e);e.add(this,Ne(r,n))}decodeValue(e,r){if(r instanceof wi)return[];if(r instanceof Qr)return[];let n=r;if(r instanceof Zt){const i=r.getType();if(typeof i>"u")throw new Error("type mismatch with uninitialized type");n=i}if(n instanceof Tr)switch(vr(e)){case 0:return[];case 1:{const i=e.save();try{return[this._type.decodeValue(e,n._type)]}catch{return e.restore(i),n._type.decodeValue(e,n._type),[]}}default:throw new Error("Not an option value")}else{if(this._type instanceof wi||this._type instanceof Tr||this._type instanceof Qr)return n.decodeValue(e,n),[];{const i=e.save();try{return[this._type.decodeValue(e,r)]}catch{return e.restore(i),n.decodeValue(e,r),[]}}}}get name(){return`opt ${this._type.name}`}display(){return`opt ${this._type.display()}`}valueToString(e){return e.length===0?"null":`opt ${this._type.valueToString(e[0])}`}}class Rn extends ir{constructor(e={}){super(),this._fields=Object.entries(e).sort((r,n)=>Ut(r[0])-Ut(n[0]))}accept(e,r){return e.visitRecord(this,this._fields,r)}tryAsTuple(){const e=[];for(let r=0;r<this._fields.length;r++){const[n,i]=this._fields[r];if(n!==`_${r}_`)return null;e.push(i)}return e}covariant(e){if(typeof e=="object"&&this._fields.every(([r,n])=>{if(!e.hasOwnProperty(r))throw new Error(`Record is missing key "${r}".`);try{return n.covariant(e[r])}catch(i){throw new Error(`Invalid ${this.display()} argument: 

field ${r} -> ${i.message}`)}}))return!0;throw new Error(`Invalid ${this.display()} argument: ${qe(e)}`)}encodeValue(e){const r=this._fields.map(([i])=>e[i]),n=_n(this._fields,r,([,i],a)=>i.encodeValue(a));return Ne(...n)}_buildTypeTableImpl(e){this._fields.forEach(([a,f])=>f.buildTypeTable(e));const r=je(-20),n=ke(this._fields.length),i=this._fields.map(([a,f])=>Ne(ke(Ut(a)),f.encodeType(e)));e.add(this,Ne(r,n,Ne(...i)))}decodeValue(e,r){const n=this.checkType(r);if(!(n instanceof Rn))throw new Error("Not a record type");const i={};let a=0,f=0;for(;f<n._fields.length;){const[s,p]=n._fields[f];if(a>=this._fields.length){p.decodeValue(e,p),f++;continue}const[w,S]=this._fields[a],v=Ut(this._fields[a][0]),b=Ut(s);if(v===b)i[w]=S.decodeValue(e,p),a++,f++;else if(b>v)if(S instanceof Tr||S instanceof Qr)i[w]=[],a++;else throw new Error("Cannot find required field "+w);else p.decodeValue(e,p),f++}for(const[s,p]of this._fields.slice(a))if(p instanceof Tr||p instanceof Qr)i[s]=[];else throw new Error("Cannot find required field "+s);return i}get name(){return`record {${this._fields.map(([r,n])=>r+":"+n.name).join("; ")}}`}display(){return`record {${this._fields.map(([r,n])=>r+":"+n.display()).join("; ")}}`}valueToString(e){const r=this._fields.map(([i])=>e[i]);return`record {${_n(this._fields,r,([i,a],f)=>i+"="+a.valueToString(f)).join("; ")}}`}}class Ui extends Rn{constructor(e){const r={};e.forEach((n,i)=>r["_"+i+"_"]=n),super(r),this._components=e}accept(e,r){return e.visitTuple(this,this._components,r)}covariant(e){if(Array.isArray(e)&&e.length>=this._fields.length&&this._components.every((r,n)=>{try{return r.covariant(e[n])}catch(i){throw new Error(`Invalid ${this.display()} argument: 

index ${n} -> ${i.message}`)}}))return!0;throw new Error(`Invalid ${this.display()} argument: ${qe(e)}`)}encodeValue(e){const r=_n(this._components,e,(n,i)=>n.encodeValue(i));return Ne(...r)}decodeValue(e,r){const n=this.checkType(r);if(!(n instanceof Ui))throw new Error("not a tuple type");if(n._components.length<this._components.length)throw new Error("tuple mismatch");const i=[];for(const[a,f]of n._components.entries())a>=this._components.length?f.decodeValue(e,f):i.push(this._components[a].decodeValue(e,f));return i}display(){return`record {${this._components.map(r=>r.display()).join("; ")}}`}valueToString(e){return`record {${_n(this._components,e,(n,i)=>n.valueToString(i)).join("; ")}}`}}class Oi extends ir{constructor(e={}){super(),this._fields=Object.entries(e).sort((r,n)=>Ut(r[0])-Ut(n[0]))}accept(e,r){return e.visitVariant(this,this._fields,r)}covariant(e){if(typeof e=="object"&&Object.entries(e).length===1&&this._fields.every(([r,n])=>{try{return!e.hasOwnProperty(r)||n.covariant(e[r])}catch(i){throw new Error(`Invalid ${this.display()} argument: 

variant ${r} -> ${i.message}`)}}))return!0;throw new Error(`Invalid ${this.display()} argument: ${qe(e)}`)}encodeValue(e){for(let r=0;r<this._fields.length;r++){const[n,i]=this._fields[r];if(e.hasOwnProperty(n)){const a=ke(r),f=i.encodeValue(e[n]);return Ne(a,f)}}throw Error("Variant has no data: "+e)}_buildTypeTableImpl(e){this._fields.forEach(([,a])=>{a.buildTypeTable(e)});const r=je(-21),n=ke(this._fields.length),i=this._fields.map(([a,f])=>Ne(ke(Ut(a)),f.encodeType(e)));e.add(this,Ne(r,n,...i))}decodeValue(e,r){const n=this.checkType(r);if(!(n instanceof Oi))throw new Error("Not a variant type");const i=Number(Ke(e));if(i>=n._fields.length)throw Error("Invalid variant index: "+i);const[a,f]=n._fields[i];for(const[s,p]of this._fields)if(Ut(a)===Ut(s)){const w=p.decodeValue(e,f);return{[s]:w}}throw new Error("Cannot find field hash "+a)}get name(){return`variant {${this._fields.map(([r,n])=>r+":"+n.name).join("; ")}}`}display(){return`variant {${this._fields.map(([r,n])=>r+(n.name==="null"?"":`:${n.display()}`)).join("; ")}}`}valueToString(e){for(const[r,n]of this._fields)if(e.hasOwnProperty(r)){const i=n.valueToString(e[r]);return i==="null"?`variant {${r}}`:`variant {${r}=${i}}`}throw new Error("Variant has no data: "+e)}}class Zt extends ir{constructor(){super(...arguments),this._id=Zt._counter++,this._type=void 0}accept(e,r){if(!this._type)throw Error("Recursive type uninitialized.");return e.visitRec(this,this._type,r)}fill(e){this._type=e}getType(){return this._type}covariant(e){if(this._type&&this._type.covariant(e))return!0;throw new Error(`Invalid ${this.display()} argument: ${qe(e)}`)}encodeValue(e){if(!this._type)throw Error("Recursive type uninitialized.");return this._type.encodeValue(e)}_buildTypeTableImpl(e){if(!this._type)throw Error("Recursive type uninitialized.");e.add(this,new Uint8Array([])),this._type.buildTypeTable(e),e.merge(this,this._type.name)}decodeValue(e,r){if(!this._type)throw Error("Recursive type uninitialized.");return this._type.decodeValue(e,r)}get name(){return`rec_${this._id}`}display(){if(!this._type)throw Error("Recursive type uninitialized.");return`μ${this.name}.${this._type.name}`}valueToString(e){if(!this._type)throw Error("Recursive type uninitialized.");return this._type.valueToString(e)}}Zt._counter=0;function js(t){if(vr(t)!==1)throw new Error("Cannot decode principal");const r=Number(Ke(t));return _e.fromUint8Array(new Uint8Array(Ar(t,r)))}class Ta extends yt{accept(e,r){return e.visitPrincipal(this,r)}covariant(e){if(e&&e._isPrincipal)return!0;throw new Error(`Invalid ${this.display()} argument: ${qe(e)}`)}encodeValue(e){const r=e.toUint8Array(),n=ke(r.byteLength);return Ne(new Uint8Array([1]),n,r)}encodeType(){return je(-24)}decodeValue(e,r){return this.checkType(r),js(e)}get name(){return"principal"}valueToString(e){return`${this.name} "${e.toText()}"`}}class Ys extends ir{constructor(e,r,n=[]){super(),this.argTypes=e,this.retTypes=r,this.annotations=n}static argsToString(e,r){if(e.length!==r.length)throw new Error("arity mismatch");return"("+e.map((n,i)=>n.valueToString(r[i])).join(", ")+")"}accept(e,r){return e.visitFunc(this,r)}covariant(e){if(Array.isArray(e)&&e.length===2&&e[0]&&e[0]._isPrincipal&&typeof e[1]=="string")return!0;throw new Error(`Invalid ${this.display()} argument: ${qe(e)}`)}encodeValue([e,r]){const n=e.toUint8Array(),i=ke(n.byteLength),a=Ne(new Uint8Array([1]),i,n),f=new TextEncoder().encode(r),s=ke(f.byteLength);return Ne(new Uint8Array([1]),a,s,f)}_buildTypeTableImpl(e){this.argTypes.forEach(w=>w.buildTypeTable(e)),this.retTypes.forEach(w=>w.buildTypeTable(e));const r=je(-22),n=ke(this.argTypes.length),i=Ne(...this.argTypes.map(w=>w.encodeType(e))),a=ke(this.retTypes.length),f=Ne(...this.retTypes.map(w=>w.encodeType(e))),s=ke(this.annotations.length),p=Ne(...this.annotations.map(w=>this.encodeAnnotation(w)));e.add(this,Ne(r,n,i,a,f,s,p))}decodeValue(e){if(vr(e)!==1)throw new Error("Cannot decode function reference");const n=js(e),i=Number(Ke(e)),a=Ar(e,i),s=new TextDecoder("utf8",{fatal:!0}).decode(a);return[n,s]}get name(){const e=this.argTypes.map(i=>i.name).join(", "),r=this.retTypes.map(i=>i.name).join(", "),n=" "+this.annotations.join(" ");return`(${e}) -> (${r})${n}`}valueToString([e,r]){return`func "${e.toText()}".${r}`}display(){const e=this.argTypes.map(i=>i.display()).join(", "),r=this.retTypes.map(i=>i.display()).join(", "),n=" "+this.annotations.join(" ");return`(${e}) → (${r})${n}`}encodeAnnotation(e){if(e==="query")return new Uint8Array([1]);if(e==="oneway")return new Uint8Array([2]);if(e==="composite_query")return new Uint8Array([3]);throw new Error("Illegal function annotation")}}class Sa extends ir{constructor(e){super(),this._fields=Object.entries(e).sort((r,n)=>r[0]<n[0]?-1:r[0]>n[0]?1:0)}accept(e,r){return e.visitService(this,r)}covariant(e){if(e&&e._isPrincipal)return!0;throw new Error(`Invalid ${this.display()} argument: ${qe(e)}`)}encodeValue(e){const r=e.toUint8Array(),n=ke(r.length);return Ne(new Uint8Array([1]),n,r)}_buildTypeTableImpl(e){this._fields.forEach(([a,f])=>f.buildTypeTable(e));const r=je(-23),n=ke(this._fields.length),i=this._fields.map(([a,f])=>{const s=new TextEncoder().encode(a),p=ke(s.length);return Ne(p,s,f.encodeType(e))});e.add(this,Ne(r,n,...i))}decodeValue(e){return js(e)}get name(){return`service {${this._fields.map(([r,n])=>r+":"+n.name).join("; ")}}`}valueToString(e){return`service "${e.toText()}"`}}function qe(t){const e=JSON.stringify(t,(r,n)=>typeof n=="bigint"?`BigInt(${n})`:n);return e&&e.length>wo?e.substring(0,wo-3)+"...":e}function Es(t,e){if(e.length<t.length)throw Error("Wrong number of message arguments");const r=new $f;t.forEach(p=>p.buildTypeTable(r));const n=new TextEncoder().encode(Xn),i=r.encode(),a=ke(e.length),f=Ne(...t.map(p=>p.encodeType(r))),s=Ne(..._n(t,e,(p,w)=>{try{p.covariant(w)}catch(S){throw new Error(S.message+`

`)}return p.encodeValue(w)}));return Ne(n,i,a,f,s)}function Na(t,e){const r=new tn(e);if(e.byteLength<Xn.length)throw new Error("Message length smaller than magic number");const n=Ar(r,Xn.length),i=new TextDecoder().decode(n);if(i!==Xn)throw new Error("Wrong magic number: "+JSON.stringify(i));function a(m){const g=[],k=Number(Ke(m));for(let K=0;K<k;K++){const j=Number(Dt(m));switch(j){case-18:case-19:{const D=Number(Dt(m));g.push([j,D]);break}case-20:case-21:{const D=[];let R=Number(Ke(m)),C;for(;R--;){const z=Number(Ke(m));if(z>=Math.pow(2,32))throw new Error("field id out of 32-bit range");if(typeof C=="number"&&C>=z)throw new Error("field id collision or not sorted");C=z;const te=Number(Dt(m));D.push([z,te])}g.push([j,D]);break}case-22:{const D=[];let R=Number(Ke(m));for(;R--;)D.push(Number(Dt(m)));const C=[];let z=Number(Ke(m));for(;z--;)C.push(Number(Dt(m)));const te=[];let re=Number(Ke(m));for(;re--;)switch(Number(Ke(m))){case 1:{te.push("query");break}case 2:{te.push("oneway");break}case 3:{te.push("composite_query");break}default:throw new Error("unknown annotation")}g.push([j,[D,C,te]]);break}case-23:{let D=Number(Ke(m));const R=[];for(;D--;){const C=Number(Ke(m)),z=new TextDecoder().decode(Ar(m,C)),te=Dt(m);R.push([z,te])}g.push([j,R]);break}default:throw new Error("Illegal op_code: "+j)}}const q=[],X=Number(Ke(m));for(let K=0;K<X;K++)q.push(Number(Dt(m)));return[g,q]}const[f,s]=a(r);if(s.length<t.length)throw new Error("Wrong number of return values");const p=f.map(m=>Qa());function w(m){if(m<-24)throw new Error("future value not supported");if(m<0)switch(m){case-1:return Oa;case-2:return Ua;case-3:return Ma;case-4:return $a;case-5:return Ha;case-6:return ja;case-7:return Ya;case-8:return Za;case-9:return Ca;case-10:return qa;case-11:return Va;case-12:return Ga;case-13:return ka;case-14:return Pa;case-15:return Fa;case-16:return Ra;case-17:return Ia;case-24:return Ka;default:throw new Error("Illegal op_code: "+m)}if(m>=f.length)throw new Error("type index out of range");return p[m]}function S(m){switch(m[0]){case-19:{const g=w(m[1]);return za(g)}case-18:{const g=w(m[1]);return La(g)}case-20:{const g={};for(const[X,K]of m[1]){const j=`_${X}_`;g[j]=w(K)}const k=Xa(g),q=k.tryAsTuple();return Array.isArray(q)?Wa(...q):k}case-21:{const g={};for(const[k,q]of m[1]){const X=`_${k}_`;g[X]=w(q)}return Ja(g)}case-22:{const[g,k,q]=m[1];return Da(g.map(X=>w(X)),k.map(X=>w(X)),q)}case-23:{const g={},k=m[1];for(const[q,X]of k){let K=w(X);if(K instanceof Zt&&(K=K.getType()),!(K instanceof Ys))throw new Error("Illegal service definition: services can only contain functions");g[q]=K}return ec(g)}default:throw new Error("Illegal op_code: "+m[0])}}f.forEach((m,g)=>{if(m[0]===-22){const k=S(m);p[g].fill(k)}}),f.forEach((m,g)=>{if(m[0]!==-22){const k=S(m);p[g].fill(k)}});const v=s.map(m=>w(m)),b=t.map((m,g)=>m.decodeValue(r,v[g]));for(let m=t.length;m<v.length;m++)v[m].decodeValue(r,v[m]);if(r.byteLength>0)throw new Error("decode: Left-over bytes");return b}const Ia=new _a,Ra=new Qr,kf=new xa,Ua=new Ea,Oa=new wi,Fa=new Aa,$a=new va,Ma=new Ba,ka=new Hs(32),Pa=new Hs(64),Ca=new Br(8),qa=new Br(16),Va=new Br(32),Ga=new Br(64),Ha=new nr(8),ja=new nr(16),Ya=new nr(32),Za=new nr(64),Ka=new Ta;function Wa(...t){return new Ui(t)}function za(t){return new Ri(t)}function La(t){return new Tr(t)}function Xa(t){return new Rn(t)}function Ja(t){return new Oi(t)}function Qa(){return new Zt}function Da(t,e,r=[]){return new Ys(t,e,r)}function ec(t){return new Sa(t)}const Pf=Object.freeze(Object.defineProperty({__proto__:null,Bool:Ua,BoolClass:Ea,ConstructType:ir,Empty:Ia,EmptyClass:_a,FixedIntClass:Br,FixedNatClass:nr,Float32:ka,Float64:Pa,FloatClass:Hs,Func:Da,FuncClass:Ys,Int:$a,Int16:qa,Int32:Va,Int64:Ga,Int8:Ca,IntClass:va,Nat:Ma,Nat16:ja,Nat32:Ya,Nat64:Za,Nat8:Ha,NatClass:Ba,Null:Oa,NullClass:wi,Opt:La,OptClass:Tr,PrimitiveType:yt,Principal:Ka,PrincipalClass:Ta,Rec:Qa,RecClass:Zt,Record:Xa,RecordClass:Rn,Reserved:Ra,ReservedClass:Qr,Service:ec,ServiceClass:Sa,Text:Fa,TextClass:Aa,Tuple:Wa,TupleClass:Ui,Type:Ii,Unknown:kf,UnknownClass:xa,Variant:Ja,VariantClass:Oi,Vec:za,VecClass:Ri,Visitor:Mf,decode:Na,encode:Es},Symbol.toStringTag,{value:"Module"}));var tc={},Un={};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){var e=Sn,r=Nn,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=s,t.SlowBuffer=K,t.INSPECT_MAX_BYTES=50;var i=2147483647;t.kMaxLength=i,s.TYPED_ARRAY_SUPPORT=a(),!s.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function a(){try{var h=new Uint8Array(1),o={foo:function(){return 42}};return Object.setPrototypeOf(o,Uint8Array.prototype),Object.setPrototypeOf(h,o),h.foo()===42}catch{return!1}}Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}});function f(h){if(h>i)throw new RangeError('The value "'+h+'" is invalid for option "size"');var o=new Uint8Array(h);return Object.setPrototypeOf(o,s.prototype),o}function s(h,o,c){if(typeof h=="number"){if(typeof o=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return v(h)}return p(h,o,c)}s.poolSize=8192;function p(h,o,c){if(typeof h=="string")return b(h,o);if(ArrayBuffer.isView(h))return g(h);if(h==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof h);if(V(h,ArrayBuffer)||h&&V(h.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(V(h,SharedArrayBuffer)||h&&V(h.buffer,SharedArrayBuffer)))return k(h,o,c);if(typeof h=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var y=h.valueOf&&h.valueOf();if(y!=null&&y!==h)return s.from(y,o,c);var _=q(h);if(_)return _;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof h[Symbol.toPrimitive]=="function")return s.from(h[Symbol.toPrimitive]("string"),o,c);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof h)}s.from=function(h,o,c){return p(h,o,c)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array);function w(h){if(typeof h!="number")throw new TypeError('"size" argument must be of type number');if(h<0)throw new RangeError('The value "'+h+'" is invalid for option "size"')}function S(h,o,c){return w(h),h<=0?f(h):o!==void 0?typeof c=="string"?f(h).fill(o,c):f(h).fill(o):f(h)}s.alloc=function(h,o,c){return S(h,o,c)};function v(h){return w(h),f(h<0?0:X(h)|0)}s.allocUnsafe=function(h){return v(h)},s.allocUnsafeSlow=function(h){return v(h)};function b(h,o){if((typeof o!="string"||o==="")&&(o="utf8"),!s.isEncoding(o))throw new TypeError("Unknown encoding: "+o);var c=j(h,o)|0,y=f(c),_=y.write(h,o);return _!==c&&(y=y.slice(0,_)),y}function m(h){for(var o=h.length<0?0:X(h.length)|0,c=f(o),y=0;y<o;y+=1)c[y]=h[y]&255;return c}function g(h){if(V(h,Uint8Array)){var o=new Uint8Array(h);return k(o.buffer,o.byteOffset,o.byteLength)}return m(h)}function k(h,o,c){if(o<0||h.byteLength<o)throw new RangeError('"offset" is outside of buffer bounds');if(h.byteLength<o+(c||0))throw new RangeError('"length" is outside of buffer bounds');var y;return o===void 0&&c===void 0?y=new Uint8Array(h):c===void 0?y=new Uint8Array(h,o):y=new Uint8Array(h,o,c),Object.setPrototypeOf(y,s.prototype),y}function q(h){if(s.isBuffer(h)){var o=X(h.length)|0,c=f(o);return c.length===0||h.copy(c,0,0,o),c}if(h.length!==void 0)return typeof h.length!="number"||P(h.length)?f(0):m(h);if(h.type==="Buffer"&&Array.isArray(h.data))return m(h.data)}function X(h){if(h>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return h|0}function K(h){return+h!=h&&(h=0),s.alloc(+h)}s.isBuffer=function(o){return o!=null&&o._isBuffer===!0&&o!==s.prototype},s.compare=function(o,c){if(V(o,Uint8Array)&&(o=s.from(o,o.offset,o.byteLength)),V(c,Uint8Array)&&(c=s.from(c,c.offset,c.byteLength)),!s.isBuffer(o)||!s.isBuffer(c))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(o===c)return 0;for(var y=o.length,_=c.length,I=0,Y=Math.min(y,_);I<Y;++I)if(o[I]!==c[I]){y=o[I],_=c[I];break}return y<_?-1:_<y?1:0},s.isEncoding=function(o){switch(String(o).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(o,c){if(!Array.isArray(o))throw new TypeError('"list" argument must be an Array of Buffers');if(o.length===0)return s.alloc(0);var y;if(c===void 0)for(c=0,y=0;y<o.length;++y)c+=o[y].length;var _=s.allocUnsafe(c),I=0;for(y=0;y<o.length;++y){var Y=o[y];if(V(Y,Uint8Array))I+Y.length>_.length?s.from(Y).copy(_,I):Uint8Array.prototype.set.call(_,Y,I);else if(s.isBuffer(Y))Y.copy(_,I);else throw new TypeError('"list" argument must be an Array of Buffers');I+=Y.length}return _};function j(h,o){if(s.isBuffer(h))return h.length;if(ArrayBuffer.isView(h)||V(h,ArrayBuffer))return h.byteLength;if(typeof h!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof h);var c=h.length,y=arguments.length>2&&arguments[2]===!0;if(!y&&c===0)return 0;for(var _=!1;;)switch(o){case"ascii":case"latin1":case"binary":return c;case"utf8":case"utf-8":return ce(h).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return c*2;case"hex":return c>>>1;case"base64":return T(h).length;default:if(_)return y?-1:ce(h).length;o=(""+o).toLowerCase(),_=!0}}s.byteLength=j;function D(h,o,c){var y=!1;if((o===void 0||o<0)&&(o=0),o>this.length||((c===void 0||c>this.length)&&(c=this.length),c<=0)||(c>>>=0,o>>>=0,c<=o))return"";for(h||(h="utf8");;)switch(h){case"hex":return ne(this,o,c);case"utf8":case"utf-8":return N(this,o,c);case"ascii":return ee(this,o,c);case"latin1":case"binary":return Q(this,o,c);case"base64":return x(this,o,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return he(this,o,c);default:if(y)throw new TypeError("Unknown encoding: "+h);h=(h+"").toLowerCase(),y=!0}}s.prototype._isBuffer=!0;function R(h,o,c){var y=h[o];h[o]=h[c],h[c]=y}s.prototype.swap16=function(){var o=this.length;if(o%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var c=0;c<o;c+=2)R(this,c,c+1);return this},s.prototype.swap32=function(){var o=this.length;if(o%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var c=0;c<o;c+=4)R(this,c,c+3),R(this,c+1,c+2);return this},s.prototype.swap64=function(){var o=this.length;if(o%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var c=0;c<o;c+=8)R(this,c,c+7),R(this,c+1,c+6),R(this,c+2,c+5),R(this,c+3,c+4);return this},s.prototype.toString=function(){var o=this.length;return o===0?"":arguments.length===0?N(this,0,o):D.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(o){if(!s.isBuffer(o))throw new TypeError("Argument must be a Buffer");return this===o?!0:s.compare(this,o)===0},s.prototype.inspect=function(){var o="",c=t.INSPECT_MAX_BYTES;return o=this.toString("hex",0,c).replace(/(.{2})/g,"$1 ").trim(),this.length>c&&(o+=" ... "),"<Buffer "+o+">"},n&&(s.prototype[n]=s.prototype.inspect),s.prototype.compare=function(o,c,y,_,I){if(V(o,Uint8Array)&&(o=s.from(o,o.offset,o.byteLength)),!s.isBuffer(o))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof o);if(c===void 0&&(c=0),y===void 0&&(y=o?o.length:0),_===void 0&&(_=0),I===void 0&&(I=this.length),c<0||y>o.length||_<0||I>this.length)throw new RangeError("out of range index");if(_>=I&&c>=y)return 0;if(_>=I)return-1;if(c>=y)return 1;if(c>>>=0,y>>>=0,_>>>=0,I>>>=0,this===o)return 0;for(var Y=I-_,se=y-c,ue=Math.min(Y,se),fe=this.slice(_,I),me=o.slice(c,y),d=0;d<ue;++d)if(fe[d]!==me[d]){Y=fe[d],se=me[d];break}return Y<se?-1:se<Y?1:0};function C(h,o,c,y,_){if(h.length===0)return-1;if(typeof c=="string"?(y=c,c=0):c>2147483647?c=2147483647:c<-2147483648&&(c=-2147483648),c=+c,P(c)&&(c=_?0:h.length-1),c<0&&(c=h.length+c),c>=h.length){if(_)return-1;c=h.length-1}else if(c<0)if(_)c=0;else return-1;if(typeof o=="string"&&(o=s.from(o,y)),s.isBuffer(o))return o.length===0?-1:z(h,o,c,y,_);if(typeof o=="number")return o=o&255,typeof Uint8Array.prototype.indexOf=="function"?_?Uint8Array.prototype.indexOf.call(h,o,c):Uint8Array.prototype.lastIndexOf.call(h,o,c):z(h,[o],c,y,_);throw new TypeError("val must be string, number or Buffer")}function z(h,o,c,y,_){var I=1,Y=h.length,se=o.length;if(y!==void 0&&(y=String(y).toLowerCase(),y==="ucs2"||y==="ucs-2"||y==="utf16le"||y==="utf-16le")){if(h.length<2||o.length<2)return-1;I=2,Y/=2,se/=2,c/=2}function ue(l,B){return I===1?l[B]:l.readUInt16BE(B*I)}var fe;if(_){var me=-1;for(fe=c;fe<Y;fe++)if(ue(h,fe)===ue(o,me===-1?0:fe-me)){if(me===-1&&(me=fe),fe-me+1===se)return me*I}else me!==-1&&(fe-=fe-me),me=-1}else for(c+se>Y&&(c=Y-se),fe=c;fe>=0;fe--){for(var d=!0,u=0;u<se;u++)if(ue(h,fe+u)!==ue(o,u)){d=!1;break}if(d)return fe}return-1}s.prototype.includes=function(o,c,y){return this.indexOf(o,c,y)!==-1},s.prototype.indexOf=function(o,c,y){return C(this,o,c,y,!0)},s.prototype.lastIndexOf=function(o,c,y){return C(this,o,c,y,!1)};function te(h,o,c,y){c=Number(c)||0;var _=h.length-c;y?(y=Number(y),y>_&&(y=_)):y=_;var I=o.length;y>I/2&&(y=I/2);for(var Y=0;Y<y;++Y){var se=parseInt(o.substr(Y*2,2),16);if(P(se))return Y;h[c+Y]=se}return Y}function re(h,o,c,y){return O(ce(o,h.length-c),h,c,y)}function U(h,o,c,y){return O(de(o),h,c,y)}function H(h,o,c,y){return O(T(o),h,c,y)}function J(h,o,c,y){return O(E(o,h.length-c),h,c,y)}s.prototype.write=function(o,c,y,_){if(c===void 0)_="utf8",y=this.length,c=0;else if(y===void 0&&typeof c=="string")_=c,y=this.length,c=0;else if(isFinite(c))c=c>>>0,isFinite(y)?(y=y>>>0,_===void 0&&(_="utf8")):(_=y,y=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var I=this.length-c;if((y===void 0||y>I)&&(y=I),o.length>0&&(y<0||c<0)||c>this.length)throw new RangeError("Attempt to write outside buffer bounds");_||(_="utf8");for(var Y=!1;;)switch(_){case"hex":return te(this,o,c,y);case"utf8":case"utf-8":return re(this,o,c,y);case"ascii":case"latin1":case"binary":return U(this,o,c,y);case"base64":return H(this,o,c,y);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return J(this,o,c,y);default:if(Y)throw new TypeError("Unknown encoding: "+_);_=(""+_).toLowerCase(),Y=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function x(h,o,c){return o===0&&c===h.length?e.fromByteArray(h):e.fromByteArray(h.slice(o,c))}function N(h,o,c){c=Math.min(h.length,c);for(var y=[],_=o;_<c;){var I=h[_],Y=null,se=I>239?4:I>223?3:I>191?2:1;if(_+se<=c){var ue,fe,me,d;switch(se){case 1:I<128&&(Y=I);break;case 2:ue=h[_+1],(ue&192)===128&&(d=(I&31)<<6|ue&63,d>127&&(Y=d));break;case 3:ue=h[_+1],fe=h[_+2],(ue&192)===128&&(fe&192)===128&&(d=(I&15)<<12|(ue&63)<<6|fe&63,d>2047&&(d<55296||d>57343)&&(Y=d));break;case 4:ue=h[_+1],fe=h[_+2],me=h[_+3],(ue&192)===128&&(fe&192)===128&&(me&192)===128&&(d=(I&15)<<18|(ue&63)<<12|(fe&63)<<6|me&63,d>65535&&d<1114112&&(Y=d))}}Y===null?(Y=65533,se=1):Y>65535&&(Y-=65536,y.push(Y>>>10&1023|55296),Y=56320|Y&1023),y.push(Y),_+=se}return L(y)}var $=4096;function L(h){var o=h.length;if(o<=$)return String.fromCharCode.apply(String,h);for(var c="",y=0;y<o;)c+=String.fromCharCode.apply(String,h.slice(y,y+=$));return c}function ee(h,o,c){var y="";c=Math.min(h.length,c);for(var _=o;_<c;++_)y+=String.fromCharCode(h[_]&127);return y}function Q(h,o,c){var y="";c=Math.min(h.length,c);for(var _=o;_<c;++_)y+=String.fromCharCode(h[_]);return y}function ne(h,o,c){var y=h.length;(!o||o<0)&&(o=0),(!c||c<0||c>y)&&(c=y);for(var _="",I=o;I<c;++I)_+=G[h[I]];return _}function he(h,o,c){for(var y=h.slice(o,c),_="",I=0;I<y.length-1;I+=2)_+=String.fromCharCode(y[I]+y[I+1]*256);return _}s.prototype.slice=function(o,c){var y=this.length;o=~~o,c=c===void 0?y:~~c,o<0?(o+=y,o<0&&(o=0)):o>y&&(o=y),c<0?(c+=y,c<0&&(c=0)):c>y&&(c=y),c<o&&(c=o);var _=this.subarray(o,c);return Object.setPrototypeOf(_,s.prototype),_};function oe(h,o,c){if(h%1!==0||h<0)throw new RangeError("offset is not uint");if(h+o>c)throw new RangeError("Trying to access beyond buffer length")}s.prototype.readUintLE=s.prototype.readUIntLE=function(o,c,y){o=o>>>0,c=c>>>0,y||oe(o,c,this.length);for(var _=this[o],I=1,Y=0;++Y<c&&(I*=256);)_+=this[o+Y]*I;return _},s.prototype.readUintBE=s.prototype.readUIntBE=function(o,c,y){o=o>>>0,c=c>>>0,y||oe(o,c,this.length);for(var _=this[o+--c],I=1;c>0&&(I*=256);)_+=this[o+--c]*I;return _},s.prototype.readUint8=s.prototype.readUInt8=function(o,c){return o=o>>>0,c||oe(o,1,this.length),this[o]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(o,c){return o=o>>>0,c||oe(o,2,this.length),this[o]|this[o+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(o,c){return o=o>>>0,c||oe(o,2,this.length),this[o]<<8|this[o+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(o,c){return o=o>>>0,c||oe(o,4,this.length),(this[o]|this[o+1]<<8|this[o+2]<<16)+this[o+3]*16777216},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(o,c){return o=o>>>0,c||oe(o,4,this.length),this[o]*16777216+(this[o+1]<<16|this[o+2]<<8|this[o+3])},s.prototype.readIntLE=function(o,c,y){o=o>>>0,c=c>>>0,y||oe(o,c,this.length);for(var _=this[o],I=1,Y=0;++Y<c&&(I*=256);)_+=this[o+Y]*I;return I*=128,_>=I&&(_-=Math.pow(2,8*c)),_},s.prototype.readIntBE=function(o,c,y){o=o>>>0,c=c>>>0,y||oe(o,c,this.length);for(var _=c,I=1,Y=this[o+--_];_>0&&(I*=256);)Y+=this[o+--_]*I;return I*=128,Y>=I&&(Y-=Math.pow(2,8*c)),Y},s.prototype.readInt8=function(o,c){return o=o>>>0,c||oe(o,1,this.length),this[o]&128?(255-this[o]+1)*-1:this[o]},s.prototype.readInt16LE=function(o,c){o=o>>>0,c||oe(o,2,this.length);var y=this[o]|this[o+1]<<8;return y&32768?y|4294901760:y},s.prototype.readInt16BE=function(o,c){o=o>>>0,c||oe(o,2,this.length);var y=this[o+1]|this[o]<<8;return y&32768?y|4294901760:y},s.prototype.readInt32LE=function(o,c){return o=o>>>0,c||oe(o,4,this.length),this[o]|this[o+1]<<8|this[o+2]<<16|this[o+3]<<24},s.prototype.readInt32BE=function(o,c){return o=o>>>0,c||oe(o,4,this.length),this[o]<<24|this[o+1]<<16|this[o+2]<<8|this[o+3]},s.prototype.readFloatLE=function(o,c){return o=o>>>0,c||oe(o,4,this.length),r.read(this,o,!0,23,4)},s.prototype.readFloatBE=function(o,c){return o=o>>>0,c||oe(o,4,this.length),r.read(this,o,!1,23,4)},s.prototype.readDoubleLE=function(o,c){return o=o>>>0,c||oe(o,8,this.length),r.read(this,o,!0,52,8)},s.prototype.readDoubleBE=function(o,c){return o=o>>>0,c||oe(o,8,this.length),r.read(this,o,!1,52,8)};function ie(h,o,c,y,_,I){if(!s.isBuffer(h))throw new TypeError('"buffer" argument must be a Buffer instance');if(o>_||o<I)throw new RangeError('"value" argument is out of bounds');if(c+y>h.length)throw new RangeError("Index out of range")}s.prototype.writeUintLE=s.prototype.writeUIntLE=function(o,c,y,_){if(o=+o,c=c>>>0,y=y>>>0,!_){var I=Math.pow(2,8*y)-1;ie(this,o,c,y,I,0)}var Y=1,se=0;for(this[c]=o&255;++se<y&&(Y*=256);)this[c+se]=o/Y&255;return c+y},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(o,c,y,_){if(o=+o,c=c>>>0,y=y>>>0,!_){var I=Math.pow(2,8*y)-1;ie(this,o,c,y,I,0)}var Y=y-1,se=1;for(this[c+Y]=o&255;--Y>=0&&(se*=256);)this[c+Y]=o/se&255;return c+y},s.prototype.writeUint8=s.prototype.writeUInt8=function(o,c,y){return o=+o,c=c>>>0,y||ie(this,o,c,1,255,0),this[c]=o&255,c+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(o,c,y){return o=+o,c=c>>>0,y||ie(this,o,c,2,65535,0),this[c]=o&255,this[c+1]=o>>>8,c+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(o,c,y){return o=+o,c=c>>>0,y||ie(this,o,c,2,65535,0),this[c]=o>>>8,this[c+1]=o&255,c+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(o,c,y){return o=+o,c=c>>>0,y||ie(this,o,c,4,4294967295,0),this[c+3]=o>>>24,this[c+2]=o>>>16,this[c+1]=o>>>8,this[c]=o&255,c+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(o,c,y){return o=+o,c=c>>>0,y||ie(this,o,c,4,4294967295,0),this[c]=o>>>24,this[c+1]=o>>>16,this[c+2]=o>>>8,this[c+3]=o&255,c+4},s.prototype.writeIntLE=function(o,c,y,_){if(o=+o,c=c>>>0,!_){var I=Math.pow(2,8*y-1);ie(this,o,c,y,I-1,-I)}var Y=0,se=1,ue=0;for(this[c]=o&255;++Y<y&&(se*=256);)o<0&&ue===0&&this[c+Y-1]!==0&&(ue=1),this[c+Y]=(o/se>>0)-ue&255;return c+y},s.prototype.writeIntBE=function(o,c,y,_){if(o=+o,c=c>>>0,!_){var I=Math.pow(2,8*y-1);ie(this,o,c,y,I-1,-I)}var Y=y-1,se=1,ue=0;for(this[c+Y]=o&255;--Y>=0&&(se*=256);)o<0&&ue===0&&this[c+Y+1]!==0&&(ue=1),this[c+Y]=(o/se>>0)-ue&255;return c+y},s.prototype.writeInt8=function(o,c,y){return o=+o,c=c>>>0,y||ie(this,o,c,1,127,-128),o<0&&(o=255+o+1),this[c]=o&255,c+1},s.prototype.writeInt16LE=function(o,c,y){return o=+o,c=c>>>0,y||ie(this,o,c,2,32767,-32768),this[c]=o&255,this[c+1]=o>>>8,c+2},s.prototype.writeInt16BE=function(o,c,y){return o=+o,c=c>>>0,y||ie(this,o,c,2,32767,-32768),this[c]=o>>>8,this[c+1]=o&255,c+2},s.prototype.writeInt32LE=function(o,c,y){return o=+o,c=c>>>0,y||ie(this,o,c,4,2147483647,-2147483648),this[c]=o&255,this[c+1]=o>>>8,this[c+2]=o>>>16,this[c+3]=o>>>24,c+4},s.prototype.writeInt32BE=function(o,c,y){return o=+o,c=c>>>0,y||ie(this,o,c,4,2147483647,-2147483648),o<0&&(o=4294967295+o+1),this[c]=o>>>24,this[c+1]=o>>>16,this[c+2]=o>>>8,this[c+3]=o&255,c+4};function Se(h,o,c,y,_,I){if(c+y>h.length)throw new RangeError("Index out of range");if(c<0)throw new RangeError("Index out of range")}function A(h,o,c,y,_){return o=+o,c=c>>>0,_||Se(h,o,c,4),r.write(h,o,c,y,23,4),c+4}s.prototype.writeFloatLE=function(o,c,y){return A(this,o,c,!0,y)},s.prototype.writeFloatBE=function(o,c,y){return A(this,o,c,!1,y)};function Fe(h,o,c,y,_){return o=+o,c=c>>>0,_||Se(h,o,c,8),r.write(h,o,c,y,52,8),c+8}s.prototype.writeDoubleLE=function(o,c,y){return Fe(this,o,c,!0,y)},s.prototype.writeDoubleBE=function(o,c,y){return Fe(this,o,c,!1,y)},s.prototype.copy=function(o,c,y,_){if(!s.isBuffer(o))throw new TypeError("argument should be a Buffer");if(y||(y=0),!_&&_!==0&&(_=this.length),c>=o.length&&(c=o.length),c||(c=0),_>0&&_<y&&(_=y),_===y||o.length===0||this.length===0)return 0;if(c<0)throw new RangeError("targetStart out of bounds");if(y<0||y>=this.length)throw new RangeError("Index out of range");if(_<0)throw new RangeError("sourceEnd out of bounds");_>this.length&&(_=this.length),o.length-c<_-y&&(_=o.length-c+y);var I=_-y;return this===o&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(c,y,_):Uint8Array.prototype.set.call(o,this.subarray(y,_),c),I},s.prototype.fill=function(o,c,y,_){if(typeof o=="string"){if(typeof c=="string"?(_=c,c=0,y=this.length):typeof y=="string"&&(_=y,y=this.length),_!==void 0&&typeof _!="string")throw new TypeError("encoding must be a string");if(typeof _=="string"&&!s.isEncoding(_))throw new TypeError("Unknown encoding: "+_);if(o.length===1){var I=o.charCodeAt(0);(_==="utf8"&&I<128||_==="latin1")&&(o=I)}}else typeof o=="number"?o=o&255:typeof o=="boolean"&&(o=Number(o));if(c<0||this.length<c||this.length<y)throw new RangeError("Out of range index");if(y<=c)return this;c=c>>>0,y=y===void 0?this.length:y>>>0,o||(o=0);var Y;if(typeof o=="number")for(Y=c;Y<y;++Y)this[Y]=o;else{var se=s.isBuffer(o)?o:s.from(o,_),ue=se.length;if(ue===0)throw new TypeError('The value "'+o+'" is invalid for argument "value"');for(Y=0;Y<y-c;++Y)this[Y+c]=se[Y%ue]}return this};var Be=/[^+/0-9A-Za-z-_]/g;function $e(h){if(h=h.split("=")[0],h=h.trim().replace(Be,""),h.length<2)return"";for(;h.length%4!==0;)h=h+"=";return h}function ce(h,o){o=o||1/0;for(var c,y=h.length,_=null,I=[],Y=0;Y<y;++Y){if(c=h.charCodeAt(Y),c>55295&&c<57344){if(!_){if(c>56319){(o-=3)>-1&&I.push(239,191,189);continue}else if(Y+1===y){(o-=3)>-1&&I.push(239,191,189);continue}_=c;continue}if(c<56320){(o-=3)>-1&&I.push(239,191,189),_=c;continue}c=(_-55296<<10|c-56320)+65536}else _&&(o-=3)>-1&&I.push(239,191,189);if(_=null,c<128){if((o-=1)<0)break;I.push(c)}else if(c<2048){if((o-=2)<0)break;I.push(c>>6|192,c&63|128)}else if(c<65536){if((o-=3)<0)break;I.push(c>>12|224,c>>6&63|128,c&63|128)}else if(c<1114112){if((o-=4)<0)break;I.push(c>>18|240,c>>12&63|128,c>>6&63|128,c&63|128)}else throw new Error("Invalid code point")}return I}function de(h){for(var o=[],c=0;c<h.length;++c)o.push(h.charCodeAt(c)&255);return o}function E(h,o){for(var c,y,_,I=[],Y=0;Y<h.length&&!((o-=2)<0);++Y)c=h.charCodeAt(Y),y=c>>8,_=c%256,I.push(_),I.push(y);return I}function T(h){return e.toByteArray($e(h))}function O(h,o,c,y){for(var _=0;_<y&&!(_+c>=o.length||_>=h.length);++_)o[_+c]=h[_];return _}function V(h,o){return h instanceof o||h!=null&&h.constructor!=null&&h.constructor.name!=null&&h.constructor.name===o.name}function P(h){return h!==h}var G=function(){for(var h="0123456789abcdef",o=new Array(256),c=0;c<16;++c)for(var y=c*16,_=0;_<16;++_)o[y+_]=h[c]+h[_];return o}()})(Un);var rc={exports:{}};(function(t){(function(e){var r,n=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,i=Math.ceil,a=Math.floor,f="[BigNumber Error] ",s=f+"Number primitive has more than 15 significant digits: ",p=1e14,w=14,S=9007199254740991,v=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],b=1e7,m=1e9;function g(C){var z,te,re,U=A.prototype={constructor:A,toString:null,valueOf:null},H=new A(1),J=20,x=4,N=-7,$=21,L=-1e7,ee=1e7,Q=!1,ne=1,he=0,oe={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},ie="0123456789abcdefghijklmnopqrstuvwxyz",Se=!0;function A(E,T){var O,V,P,G,h,o,c,y,_=this;if(!(_ instanceof A))return new A(E,T);if(T==null){if(E&&E._isBigNumber===!0){_.s=E.s,!E.c||E.e>ee?_.c=_.e=null:E.e<L?_.c=[_.e=0]:(_.e=E.e,_.c=E.c.slice());return}if((o=typeof E=="number")&&E*0==0){if(_.s=1/E<0?(E=-E,-1):1,E===~~E){for(G=0,h=E;h>=10;h/=10,G++);G>ee?_.c=_.e=null:(_.e=G,_.c=[E]);return}y=String(E)}else{if(!n.test(y=String(E)))return re(_,y,o);_.s=y.charCodeAt(0)==45?(y=y.slice(1),-1):1}(G=y.indexOf("."))>-1&&(y=y.replace(".","")),(h=y.search(/e/i))>0?(G<0&&(G=h),G+=+y.slice(h+1),y=y.substring(0,h)):G<0&&(G=y.length)}else{if(K(T,2,ie.length,"Base"),T==10&&Se)return _=new A(E),ce(_,J+_.e+1,x);if(y=String(E),o=typeof E=="number"){if(E*0!=0)return re(_,y,o,T);if(_.s=1/E<0?(y=y.slice(1),-1):1,A.DEBUG&&y.replace(/^0\.0*|\./,"").length>15)throw Error(s+E)}else _.s=y.charCodeAt(0)===45?(y=y.slice(1),-1):1;for(O=ie.slice(0,T),G=h=0,c=y.length;h<c;h++)if(O.indexOf(V=y.charAt(h))<0){if(V=="."){if(h>G){G=c;continue}}else if(!P&&(y==y.toUpperCase()&&(y=y.toLowerCase())||y==y.toLowerCase()&&(y=y.toUpperCase()))){P=!0,h=-1,G=0;continue}return re(_,String(E),o,T)}o=!1,y=te(y,T,10,_.s),(G=y.indexOf("."))>-1?y=y.replace(".",""):G=y.length}for(h=0;y.charCodeAt(h)===48;h++);for(c=y.length;y.charCodeAt(--c)===48;);if(y=y.slice(h,++c)){if(c-=h,o&&A.DEBUG&&c>15&&(E>S||E!==a(E)))throw Error(s+_.s*E);if((G=G-h-1)>ee)_.c=_.e=null;else if(G<L)_.c=[_.e=0];else{if(_.e=G,_.c=[],h=(G+1)%w,G<0&&(h+=w),h<c){for(h&&_.c.push(+y.slice(0,h)),c-=w;h<c;)_.c.push(+y.slice(h,h+=w));h=w-(y=y.slice(h)).length}else h-=c;for(;h--;y+="0");_.c.push(+y)}}else _.c=[_.e=0]}A.clone=g,A.ROUND_UP=0,A.ROUND_DOWN=1,A.ROUND_CEIL=2,A.ROUND_FLOOR=3,A.ROUND_HALF_UP=4,A.ROUND_HALF_DOWN=5,A.ROUND_HALF_EVEN=6,A.ROUND_HALF_CEIL=7,A.ROUND_HALF_FLOOR=8,A.EUCLID=9,A.config=A.set=function(E){var T,O;if(E!=null)if(typeof E=="object"){if(E.hasOwnProperty(T="DECIMAL_PLACES")&&(O=E[T],K(O,0,m,T),J=O),E.hasOwnProperty(T="ROUNDING_MODE")&&(O=E[T],K(O,0,8,T),x=O),E.hasOwnProperty(T="EXPONENTIAL_AT")&&(O=E[T],O&&O.pop?(K(O[0],-m,0,T),K(O[1],0,m,T),N=O[0],$=O[1]):(K(O,-m,m,T),N=-($=O<0?-O:O))),E.hasOwnProperty(T="RANGE"))if(O=E[T],O&&O.pop)K(O[0],-m,-1,T),K(O[1],1,m,T),L=O[0],ee=O[1];else if(K(O,-m,m,T),O)L=-(ee=O<0?-O:O);else throw Error(f+T+" cannot be zero: "+O);if(E.hasOwnProperty(T="CRYPTO"))if(O=E[T],O===!!O)if(O)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))Q=O;else throw Q=!O,Error(f+"crypto unavailable");else Q=O;else throw Error(f+T+" not true or false: "+O);if(E.hasOwnProperty(T="MODULO_MODE")&&(O=E[T],K(O,0,9,T),ne=O),E.hasOwnProperty(T="POW_PRECISION")&&(O=E[T],K(O,0,m,T),he=O),E.hasOwnProperty(T="FORMAT"))if(O=E[T],typeof O=="object")oe=O;else throw Error(f+T+" not an object: "+O);if(E.hasOwnProperty(T="ALPHABET"))if(O=E[T],typeof O=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(O))Se=O.slice(0,10)=="0123456789",ie=O;else throw Error(f+T+" invalid: "+O)}else throw Error(f+"Object expected: "+E);return{DECIMAL_PLACES:J,ROUNDING_MODE:x,EXPONENTIAL_AT:[N,$],RANGE:[L,ee],CRYPTO:Q,MODULO_MODE:ne,POW_PRECISION:he,FORMAT:oe,ALPHABET:ie}},A.isBigNumber=function(E){if(!E||E._isBigNumber!==!0)return!1;if(!A.DEBUG)return!0;var T,O,V=E.c,P=E.e,G=E.s;e:if({}.toString.call(V)=="[object Array]"){if((G===1||G===-1)&&P>=-m&&P<=m&&P===a(P)){if(V[0]===0){if(P===0&&V.length===1)return!0;break e}if(T=(P+1)%w,T<1&&(T+=w),String(V[0]).length==T){for(T=0;T<V.length;T++)if(O=V[T],O<0||O>=p||O!==a(O))break e;if(O!==0)return!0}}}else if(V===null&&P===null&&(G===null||G===1||G===-1))return!0;throw Error(f+"Invalid BigNumber: "+E)},A.maximum=A.max=function(){return Be(arguments,-1)},A.minimum=A.min=function(){return Be(arguments,1)},A.random=function(){var E=9007199254740992,T=Math.random()*E&2097151?function(){return a(Math.random()*E)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(O){var V,P,G,h,o,c=0,y=[],_=new A(H);if(O==null?O=J:K(O,0,m),h=i(O/w),Q)if(crypto.getRandomValues){for(V=crypto.getRandomValues(new Uint32Array(h*=2));c<h;)o=V[c]*131072+(V[c+1]>>>11),o>=9e15?(P=crypto.getRandomValues(new Uint32Array(2)),V[c]=P[0],V[c+1]=P[1]):(y.push(o%1e14),c+=2);c=h/2}else if(crypto.randomBytes){for(V=crypto.randomBytes(h*=7);c<h;)o=(V[c]&31)*281474976710656+V[c+1]*1099511627776+V[c+2]*4294967296+V[c+3]*16777216+(V[c+4]<<16)+(V[c+5]<<8)+V[c+6],o>=9e15?crypto.randomBytes(7).copy(V,c):(y.push(o%1e14),c+=7);c=h/7}else throw Q=!1,Error(f+"crypto unavailable");if(!Q)for(;c<h;)o=T(),o<9e15&&(y[c++]=o%1e14);for(h=y[--c],O%=w,h&&O&&(o=v[w-O],y[c]=a(h/o)*o);y[c]===0;y.pop(),c--);if(c<0)y=[G=0];else{for(G=-1;y[0]===0;y.splice(0,1),G-=w);for(c=1,o=y[0];o>=10;o/=10,c++);c<w&&(G-=w-c)}return _.e=G,_.c=y,_}}(),A.sum=function(){for(var E=1,T=arguments,O=new A(T[0]);E<T.length;)O=O.plus(T[E++]);return O},te=function(){var E="0123456789";function T(O,V,P,G){for(var h,o=[0],c,y=0,_=O.length;y<_;){for(c=o.length;c--;o[c]*=V);for(o[0]+=G.indexOf(O.charAt(y++)),h=0;h<o.length;h++)o[h]>P-1&&(o[h+1]==null&&(o[h+1]=0),o[h+1]+=o[h]/P|0,o[h]%=P)}return o.reverse()}return function(O,V,P,G,h){var o,c,y,_,I,Y,se,ue,fe=O.indexOf("."),me=J,d=x;for(fe>=0&&(_=he,he=0,O=O.replace(".",""),ue=new A(V),Y=ue.pow(O.length-fe),he=_,ue.c=T(R(q(Y.c),Y.e,"0"),10,P,E),ue.e=ue.c.length),se=T(O,V,P,h?(o=ie,E):(o=E,ie)),y=_=se.length;se[--_]==0;se.pop());if(!se[0])return o.charAt(0);if(fe<0?--y:(Y.c=se,Y.e=y,Y.s=G,Y=z(Y,ue,me,d,P),se=Y.c,I=Y.r,y=Y.e),c=y+me+1,fe=se[c],_=P/2,I=I||c<0||se[c+1]!=null,I=d<4?(fe!=null||I)&&(d==0||d==(Y.s<0?3:2)):fe>_||fe==_&&(d==4||I||d==6&&se[c-1]&1||d==(Y.s<0?8:7)),c<1||!se[0])O=I?R(o.charAt(1),-me,o.charAt(0)):o.charAt(0);else{if(se.length=c,I)for(--P;++se[--c]>P;)se[c]=0,c||(++y,se=[1].concat(se));for(_=se.length;!se[--_];);for(fe=0,O="";fe<=_;O+=o.charAt(se[fe++]));O=R(O,y,o.charAt(0))}return O}}(),z=function(){function E(V,P,G){var h,o,c,y,_=0,I=V.length,Y=P%b,se=P/b|0;for(V=V.slice();I--;)c=V[I]%b,y=V[I]/b|0,h=se*c+y*Y,o=Y*c+h%b*b+_,_=(o/G|0)+(h/b|0)+se*y,V[I]=o%G;return _&&(V=[_].concat(V)),V}function T(V,P,G,h){var o,c;if(G!=h)c=G>h?1:-1;else for(o=c=0;o<G;o++)if(V[o]!=P[o]){c=V[o]>P[o]?1:-1;break}return c}function O(V,P,G,h){for(var o=0;G--;)V[G]-=o,o=V[G]<P[G]?1:0,V[G]=o*h+V[G]-P[G];for(;!V[0]&&V.length>1;V.splice(0,1));}return function(V,P,G,h,o){var c,y,_,I,Y,se,ue,fe,me,d,u,l,B,M,W,Z,ge,be=V.s==P.s?1:-1,we=V.c,ye=P.c;if(!we||!we[0]||!ye||!ye[0])return new A(!V.s||!P.s||(we?ye&&we[0]==ye[0]:!ye)?NaN:we&&we[0]==0||!ye?be*0:be/0);for(fe=new A(be),me=fe.c=[],y=V.e-P.e,be=G+y+1,o||(o=p,y=k(V.e/w)-k(P.e/w),be=be/w|0),_=0;ye[_]==(we[_]||0);_++);if(ye[_]>(we[_]||0)&&y--,be<0)me.push(1),I=!0;else{for(M=we.length,Z=ye.length,_=0,be+=2,Y=a(o/(ye[0]+1)),Y>1&&(ye=E(ye,Y,o),we=E(we,Y,o),Z=ye.length,M=we.length),B=Z,d=we.slice(0,Z),u=d.length;u<Z;d[u++]=0);ge=ye.slice(),ge=[0].concat(ge),W=ye[0],ye[1]>=o/2&&W++;do{if(Y=0,c=T(ye,d,Z,u),c<0){if(l=d[0],Z!=u&&(l=l*o+(d[1]||0)),Y=a(l/W),Y>1)for(Y>=o&&(Y=o-1),se=E(ye,Y,o),ue=se.length,u=d.length;T(se,d,ue,u)==1;)Y--,O(se,Z<ue?ge:ye,ue,o),ue=se.length,c=1;else Y==0&&(c=Y=1),se=ye.slice(),ue=se.length;if(ue<u&&(se=[0].concat(se)),O(d,se,u,o),u=d.length,c==-1)for(;T(ye,d,Z,u)<1;)Y++,O(d,Z<u?ge:ye,u,o),u=d.length}else c===0&&(Y++,d=[0]);me[_++]=Y,d[0]?d[u++]=we[B]||0:(d=[we[B]],u=1)}while((B++<M||d[0]!=null)&&be--);I=d[0]!=null,me[0]||me.splice(0,1)}if(o==p){for(_=1,be=me[0];be>=10;be/=10,_++);ce(fe,G+(fe.e=_+y*w-1)+1,h,I)}else fe.e=y,fe.r=+I;return fe}}();function Fe(E,T,O,V){var P,G,h,o,c;if(O==null?O=x:K(O,0,8),!E.c)return E.toString();if(P=E.c[0],h=E.e,T==null)c=q(E.c),c=V==1||V==2&&(h<=N||h>=$)?D(c,h):R(c,h,"0");else if(E=ce(new A(E),T,O),G=E.e,c=q(E.c),o=c.length,V==1||V==2&&(T<=G||G<=N)){for(;o<T;c+="0",o++);c=D(c,G)}else if(T-=h+(V===2&&G>h),c=R(c,G,"0"),G+1>o){if(--T>0)for(c+=".";T--;c+="0");}else if(T+=G-o,T>0)for(G+1==o&&(c+=".");T--;c+="0");return E.s<0&&P?"-"+c:c}function Be(E,T){for(var O,V,P=1,G=new A(E[0]);P<E.length;P++)V=new A(E[P]),(!V.s||(O=X(G,V))===T||O===0&&G.s===T)&&(G=V);return G}function $e(E,T,O){for(var V=1,P=T.length;!T[--P];T.pop());for(P=T[0];P>=10;P/=10,V++);return(O=V+O*w-1)>ee?E.c=E.e=null:O<L?E.c=[E.e=0]:(E.e=O,E.c=T),E}re=function(){var E=/^(-?)0([xbo])(?=\w[\w.]*$)/i,T=/^([^.]+)\.$/,O=/^\.([^.]+)$/,V=/^-?(Infinity|NaN)$/,P=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(G,h,o,c){var y,_=o?h:h.replace(P,"");if(V.test(_))G.s=isNaN(_)?null:_<0?-1:1;else{if(!o&&(_=_.replace(E,function(I,Y,se){return y=(se=se.toLowerCase())=="x"?16:se=="b"?2:8,!c||c==y?Y:I}),c&&(y=c,_=_.replace(T,"$1").replace(O,"0.$1")),h!=_))return new A(_,y);if(A.DEBUG)throw Error(f+"Not a"+(c?" base "+c:"")+" number: "+h);G.s=null}G.c=G.e=null}}();function ce(E,T,O,V){var P,G,h,o,c,y,_,I=E.c,Y=v;if(I){e:{for(P=1,o=I[0];o>=10;o/=10,P++);if(G=T-P,G<0)G+=w,h=T,c=I[y=0],_=a(c/Y[P-h-1]%10);else if(y=i((G+1)/w),y>=I.length)if(V){for(;I.length<=y;I.push(0));c=_=0,P=1,G%=w,h=G-w+1}else break e;else{for(c=o=I[y],P=1;o>=10;o/=10,P++);G%=w,h=G-w+P,_=h<0?0:a(c/Y[P-h-1]%10)}if(V=V||T<0||I[y+1]!=null||(h<0?c:c%Y[P-h-1]),V=O<4?(_||V)&&(O==0||O==(E.s<0?3:2)):_>5||_==5&&(O==4||V||O==6&&(G>0?h>0?c/Y[P-h]:0:I[y-1])%10&1||O==(E.s<0?8:7)),T<1||!I[0])return I.length=0,V?(T-=E.e+1,I[0]=Y[(w-T%w)%w],E.e=-T||0):I[0]=E.e=0,E;if(G==0?(I.length=y,o=1,y--):(I.length=y+1,o=Y[w-G],I[y]=h>0?a(c/Y[P-h]%Y[h])*o:0),V)for(;;)if(y==0){for(G=1,h=I[0];h>=10;h/=10,G++);for(h=I[0]+=o,o=1;h>=10;h/=10,o++);G!=o&&(E.e++,I[0]==p&&(I[0]=1));break}else{if(I[y]+=o,I[y]!=p)break;I[y--]=0,o=1}for(G=I.length;I[--G]===0;I.pop());}E.e>ee?E.c=E.e=null:E.e<L&&(E.c=[E.e=0])}return E}function de(E){var T,O=E.e;return O===null?E.toString():(T=q(E.c),T=O<=N||O>=$?D(T,O):R(T,O,"0"),E.s<0?"-"+T:T)}return U.absoluteValue=U.abs=function(){var E=new A(this);return E.s<0&&(E.s=1),E},U.comparedTo=function(E,T){return X(this,new A(E,T))},U.decimalPlaces=U.dp=function(E,T){var O,V,P,G=this;if(E!=null)return K(E,0,m),T==null?T=x:K(T,0,8),ce(new A(G),E+G.e+1,T);if(!(O=G.c))return null;if(V=((P=O.length-1)-k(this.e/w))*w,P=O[P])for(;P%10==0;P/=10,V--);return V<0&&(V=0),V},U.dividedBy=U.div=function(E,T){return z(this,new A(E,T),J,x)},U.dividedToIntegerBy=U.idiv=function(E,T){return z(this,new A(E,T),0,1)},U.exponentiatedBy=U.pow=function(E,T){var O,V,P,G,h,o,c,y,_,I=this;if(E=new A(E),E.c&&!E.isInteger())throw Error(f+"Exponent not an integer: "+de(E));if(T!=null&&(T=new A(T)),o=E.e>14,!I.c||!I.c[0]||I.c[0]==1&&!I.e&&I.c.length==1||!E.c||!E.c[0])return _=new A(Math.pow(+de(I),o?E.s*(2-j(E)):+de(E))),T?_.mod(T):_;if(c=E.s<0,T){if(T.c?!T.c[0]:!T.s)return new A(NaN);V=!c&&I.isInteger()&&T.isInteger(),V&&(I=I.mod(T))}else{if(E.e>9&&(I.e>0||I.e<-1||(I.e==0?I.c[0]>1||o&&I.c[1]>=24e7:I.c[0]<8e13||o&&I.c[0]<=9999975e7)))return G=I.s<0&&j(E)?-0:0,I.e>-1&&(G=1/G),new A(c?1/G:G);he&&(G=i(he/w+2))}for(o?(O=new A(.5),c&&(E.s=1),y=j(E)):(P=Math.abs(+de(E)),y=P%2),_=new A(H);;){if(y){if(_=_.times(I),!_.c)break;G?_.c.length>G&&(_.c.length=G):V&&(_=_.mod(T))}if(P){if(P=a(P/2),P===0)break;y=P%2}else if(E=E.times(O),ce(E,E.e+1,1),E.e>14)y=j(E);else{if(P=+de(E),P===0)break;y=P%2}I=I.times(I),G?I.c&&I.c.length>G&&(I.c.length=G):V&&(I=I.mod(T))}return V?_:(c&&(_=H.div(_)),T?_.mod(T):G?ce(_,he,x,h):_)},U.integerValue=function(E){var T=new A(this);return E==null?E=x:K(E,0,8),ce(T,T.e+1,E)},U.isEqualTo=U.eq=function(E,T){return X(this,new A(E,T))===0},U.isFinite=function(){return!!this.c},U.isGreaterThan=U.gt=function(E,T){return X(this,new A(E,T))>0},U.isGreaterThanOrEqualTo=U.gte=function(E,T){return(T=X(this,new A(E,T)))===1||T===0},U.isInteger=function(){return!!this.c&&k(this.e/w)>this.c.length-2},U.isLessThan=U.lt=function(E,T){return X(this,new A(E,T))<0},U.isLessThanOrEqualTo=U.lte=function(E,T){return(T=X(this,new A(E,T)))===-1||T===0},U.isNaN=function(){return!this.s},U.isNegative=function(){return this.s<0},U.isPositive=function(){return this.s>0},U.isZero=function(){return!!this.c&&this.c[0]==0},U.minus=function(E,T){var O,V,P,G,h=this,o=h.s;if(E=new A(E,T),T=E.s,!o||!T)return new A(NaN);if(o!=T)return E.s=-T,h.plus(E);var c=h.e/w,y=E.e/w,_=h.c,I=E.c;if(!c||!y){if(!_||!I)return _?(E.s=-T,E):new A(I?h:NaN);if(!_[0]||!I[0])return I[0]?(E.s=-T,E):new A(_[0]?h:x==3?-0:0)}if(c=k(c),y=k(y),_=_.slice(),o=c-y){for((G=o<0)?(o=-o,P=_):(y=c,P=I),P.reverse(),T=o;T--;P.push(0));P.reverse()}else for(V=(G=(o=_.length)<(T=I.length))?o:T,o=T=0;T<V;T++)if(_[T]!=I[T]){G=_[T]<I[T];break}if(G&&(P=_,_=I,I=P,E.s=-E.s),T=(V=I.length)-(O=_.length),T>0)for(;T--;_[O++]=0);for(T=p-1;V>o;){if(_[--V]<I[V]){for(O=V;O&&!_[--O];_[O]=T);--_[O],_[V]+=p}_[V]-=I[V]}for(;_[0]==0;_.splice(0,1),--y);return _[0]?$e(E,_,y):(E.s=x==3?-1:1,E.c=[E.e=0],E)},U.modulo=U.mod=function(E,T){var O,V,P=this;return E=new A(E,T),!P.c||!E.s||E.c&&!E.c[0]?new A(NaN):!E.c||P.c&&!P.c[0]?new A(P):(ne==9?(V=E.s,E.s=1,O=z(P,E,0,3),E.s=V,O.s*=V):O=z(P,E,0,ne),E=P.minus(O.times(E)),!E.c[0]&&ne==1&&(E.s=P.s),E)},U.multipliedBy=U.times=function(E,T){var O,V,P,G,h,o,c,y,_,I,Y,se,ue,fe,me,d=this,u=d.c,l=(E=new A(E,T)).c;if(!u||!l||!u[0]||!l[0])return!d.s||!E.s||u&&!u[0]&&!l||l&&!l[0]&&!u?E.c=E.e=E.s=null:(E.s*=d.s,!u||!l?E.c=E.e=null:(E.c=[0],E.e=0)),E;for(V=k(d.e/w)+k(E.e/w),E.s*=d.s,c=u.length,I=l.length,c<I&&(ue=u,u=l,l=ue,P=c,c=I,I=P),P=c+I,ue=[];P--;ue.push(0));for(fe=p,me=b,P=I;--P>=0;){for(O=0,Y=l[P]%me,se=l[P]/me|0,h=c,G=P+h;G>P;)y=u[--h]%me,_=u[h]/me|0,o=se*y+_*Y,y=Y*y+o%me*me+ue[G]+O,O=(y/fe|0)+(o/me|0)+se*_,ue[G--]=y%fe;ue[G]=O}return O?++V:ue.splice(0,1),$e(E,ue,V)},U.negated=function(){var E=new A(this);return E.s=-E.s||null,E},U.plus=function(E,T){var O,V=this,P=V.s;if(E=new A(E,T),T=E.s,!P||!T)return new A(NaN);if(P!=T)return E.s=-T,V.minus(E);var G=V.e/w,h=E.e/w,o=V.c,c=E.c;if(!G||!h){if(!o||!c)return new A(P/0);if(!o[0]||!c[0])return c[0]?E:new A(o[0]?V:P*0)}if(G=k(G),h=k(h),o=o.slice(),P=G-h){for(P>0?(h=G,O=c):(P=-P,O=o),O.reverse();P--;O.push(0));O.reverse()}for(P=o.length,T=c.length,P-T<0&&(O=c,c=o,o=O,T=P),P=0;T;)P=(o[--T]=o[T]+c[T]+P)/p|0,o[T]=p===o[T]?0:o[T]%p;return P&&(o=[P].concat(o),++h),$e(E,o,h)},U.precision=U.sd=function(E,T){var O,V,P,G=this;if(E!=null&&E!==!!E)return K(E,1,m),T==null?T=x:K(T,0,8),ce(new A(G),E,T);if(!(O=G.c))return null;if(P=O.length-1,V=P*w+1,P=O[P]){for(;P%10==0;P/=10,V--);for(P=O[0];P>=10;P/=10,V++);}return E&&G.e+1>V&&(V=G.e+1),V},U.shiftedBy=function(E){return K(E,-S,S),this.times("1e"+E)},U.squareRoot=U.sqrt=function(){var E,T,O,V,P,G=this,h=G.c,o=G.s,c=G.e,y=J+4,_=new A("0.5");if(o!==1||!h||!h[0])return new A(!o||o<0&&(!h||h[0])?NaN:h?G:1/0);if(o=Math.sqrt(+de(G)),o==0||o==1/0?(T=q(h),(T.length+c)%2==0&&(T+="0"),o=Math.sqrt(+T),c=k((c+1)/2)-(c<0||c%2),o==1/0?T="5e"+c:(T=o.toExponential(),T=T.slice(0,T.indexOf("e")+1)+c),O=new A(T)):O=new A(o+""),O.c[0]){for(c=O.e,o=c+y,o<3&&(o=0);;)if(P=O,O=_.times(P.plus(z(G,P,y,1))),q(P.c).slice(0,o)===(T=q(O.c)).slice(0,o))if(O.e<c&&--o,T=T.slice(o-3,o+1),T=="9999"||!V&&T=="4999"){if(!V&&(ce(P,P.e+J+2,0),P.times(P).eq(G))){O=P;break}y+=4,o+=4,V=1}else{(!+T||!+T.slice(1)&&T.charAt(0)=="5")&&(ce(O,O.e+J+2,1),E=!O.times(O).eq(G));break}}return ce(O,O.e+J+1,x,E)},U.toExponential=function(E,T){return E!=null&&(K(E,0,m),E++),Fe(this,E,T,1)},U.toFixed=function(E,T){return E!=null&&(K(E,0,m),E=E+this.e+1),Fe(this,E,T)},U.toFormat=function(E,T,O){var V,P=this;if(O==null)E!=null&&T&&typeof T=="object"?(O=T,T=null):E&&typeof E=="object"?(O=E,E=T=null):O=oe;else if(typeof O!="object")throw Error(f+"Argument not an object: "+O);if(V=P.toFixed(E,T),P.c){var G,h=V.split("."),o=+O.groupSize,c=+O.secondaryGroupSize,y=O.groupSeparator||"",_=h[0],I=h[1],Y=P.s<0,se=Y?_.slice(1):_,ue=se.length;if(c&&(G=o,o=c,c=G,ue-=G),o>0&&ue>0){for(G=ue%o||o,_=se.substr(0,G);G<ue;G+=o)_+=y+se.substr(G,o);c>0&&(_+=y+se.slice(G)),Y&&(_="-"+_)}V=I?_+(O.decimalSeparator||"")+((c=+O.fractionGroupSize)?I.replace(new RegExp("\\d{"+c+"}\\B","g"),"$&"+(O.fractionGroupSeparator||"")):I):_}return(O.prefix||"")+V+(O.suffix||"")},U.toFraction=function(E){var T,O,V,P,G,h,o,c,y,_,I,Y,se=this,ue=se.c;if(E!=null&&(o=new A(E),!o.isInteger()&&(o.c||o.s!==1)||o.lt(H)))throw Error(f+"Argument "+(o.isInteger()?"out of range: ":"not an integer: ")+de(o));if(!ue)return new A(se);for(T=new A(H),y=O=new A(H),V=c=new A(H),Y=q(ue),G=T.e=Y.length-se.e-1,T.c[0]=v[(h=G%w)<0?w+h:h],E=!E||o.comparedTo(T)>0?G>0?T:y:o,h=ee,ee=1/0,o=new A(Y),c.c[0]=0;_=z(o,T,0,1),P=O.plus(_.times(V)),P.comparedTo(E)!=1;)O=V,V=P,y=c.plus(_.times(P=y)),c=P,T=o.minus(_.times(P=T)),o=P;return P=z(E.minus(O),V,0,1),c=c.plus(P.times(y)),O=O.plus(P.times(V)),c.s=y.s=se.s,G=G*2,I=z(y,V,G,x).minus(se).abs().comparedTo(z(c,O,G,x).minus(se).abs())<1?[y,V]:[c,O],ee=h,I},U.toNumber=function(){return+de(this)},U.toPrecision=function(E,T){return E!=null&&K(E,1,m),Fe(this,E,T,2)},U.toString=function(E){var T,O=this,V=O.s,P=O.e;return P===null?V?(T="Infinity",V<0&&(T="-"+T)):T="NaN":(E==null?T=P<=N||P>=$?D(q(O.c),P):R(q(O.c),P,"0"):E===10&&Se?(O=ce(new A(O),J+P+1,x),T=R(q(O.c),O.e,"0")):(K(E,2,ie.length,"Base"),T=te(R(q(O.c),P,"0"),10,E,V,!0)),V<0&&O.c[0]&&(T="-"+T)),T},U.valueOf=U.toJSON=function(){return de(this)},U._isBigNumber=!0,C!=null&&A.set(C),A}function k(C){var z=C|0;return C>0||C===z?z:z-1}function q(C){for(var z,te,re=1,U=C.length,H=C[0]+"";re<U;){for(z=C[re++]+"",te=w-z.length;te--;z="0"+z);H+=z}for(U=H.length;H.charCodeAt(--U)===48;);return H.slice(0,U+1||1)}function X(C,z){var te,re,U=C.c,H=z.c,J=C.s,x=z.s,N=C.e,$=z.e;if(!J||!x)return null;if(te=U&&!U[0],re=H&&!H[0],te||re)return te?re?0:-x:J;if(J!=x)return J;if(te=J<0,re=N==$,!U||!H)return re?0:!U^te?1:-1;if(!re)return N>$^te?1:-1;for(x=(N=U.length)<($=H.length)?N:$,J=0;J<x;J++)if(U[J]!=H[J])return U[J]>H[J]^te?1:-1;return N==$?0:N>$^te?1:-1}function K(C,z,te,re){if(C<z||C>te||C!==a(C))throw Error(f+(re||"Argument")+(typeof C=="number"?C<z||C>te?" out of range: ":" not an integer: ":" not a primitive number: ")+String(C))}function j(C){var z=C.c.length-1;return k(C.e/w)==z&&C.c[z]%2!=0}function D(C,z){return(C.length>1?C.charAt(0)+"."+C.slice(1):C)+(z<0?"e":"e+")+z}function R(C,z,te){var re,U;if(z<0){for(U=te+".";++z;U+=te);C=U+C}else if(re=C.length,++z>re){for(U=te,z-=re;--z;U+=te);C+=U}else z<re&&(C=C.slice(0,z)+"."+C.slice(z));return C}r=g(),r.default=r.BigNumber=r,t.exports?t.exports=r:(e||(e=typeof self<"u"&&self?self:window),e.BigNumber=r)})(Lr)})(rc);var Fi=rc.exports,Cf=function(e,r,n){var i=new e.Uint8Array(n),a=r.pushInt,f=r.pushInt32,s=r.pushInt32Neg,p=r.pushInt64,w=r.pushInt64Neg,S=r.pushFloat,v=r.pushFloatSingle,b=r.pushFloatDouble,m=r.pushTrue,g=r.pushFalse,k=r.pushUndefined,q=r.pushNull,X=r.pushInfinity,K=r.pushInfinityNeg,j=r.pushNaN,D=r.pushNaNNeg,R=r.pushArrayStart,C=r.pushArrayStartFixed,z=r.pushArrayStartFixed32,te=r.pushArrayStartFixed64,re=r.pushObjectStart,U=r.pushObjectStartFixed,H=r.pushObjectStartFixed32,J=r.pushObjectStartFixed64,x=r.pushByteString,N=r.pushByteStringStart,$=r.pushUtf8String,L=r.pushUtf8StringStart,ee=r.pushSimpleUnassigned,Q=r.pushTagStart,ne=r.pushTagStart4,he=r.pushTagStart8,oe=r.pushTagUnassigned,ie=r.pushBreak,Se=e.Math.pow,A=0,Fe=0,Be=0;function $e(F){for(F=F|0,A=0,Fe=F;(A|0)<(Fe|0)&&(Be=Bu[i[A]&255](i[A]|0)|0,!((Be|0)>0)););return Be|0}function ce(F){return F=F|0,((A|0)+(F|0)|0)<(Fe|0)?0:1}function de(F){return F=F|0,i[F|0]<<8|i[F+1|0]|0}function E(F){return F=F|0,i[F|0]<<24|i[F+1|0]<<16|i[F+2|0]<<8|i[F+3|0]|0}function T(F){return F=F|0,a(F|0),A=A+1|0,0}function O(F){return F=F|0,ce(1)|0?1:(a(i[A+1|0]|0),A=A+2|0,0)}function V(F){return F=F|0,ce(2)|0?1:(a(de(A+1|0)|0),A=A+3|0,0)}function P(F){return F=F|0,ce(4)|0?1:(f(de(A+1|0)|0,de(A+3|0)|0),A=A+5|0,0)}function G(F){return F=F|0,ce(8)|0?1:(p(de(A+1|0)|0,de(A+3|0)|0,de(A+5|0)|0,de(A+7|0)|0),A=A+9|0,0)}function h(F){return F=F|0,a(-1-(F-32|0)|0),A=A+1|0,0}function o(F){return F=F|0,ce(1)|0?1:(a(-1-(i[A+1|0]|0)|0),A=A+2|0,0)}function c(F){F=F|0;var Ae=0;return ce(2)|0?1:(Ae=de(A+1|0)|0,a(-1-(Ae|0)|0),A=A+3|0,0)}function y(F){return F=F|0,ce(4)|0?1:(s(de(A+1|0)|0,de(A+3|0)|0),A=A+5|0,0)}function _(F){return F=F|0,ce(8)|0?1:(w(de(A+1|0)|0,de(A+3|0)|0,de(A+5|0)|0,de(A+7|0)|0),A=A+9|0,0)}function I(F){F=F|0;var Ae=0,ve=0,xe=0;return xe=F-64|0,ce(xe|0)|0?1:(Ae=A+1|0,ve=(A+1|0)+(xe|0)|0,x(Ae|0,ve|0),A=ve|0,0)}function Y(F){F=F|0;var Ae=0,ve=0,xe=0;return ce(1)|0||(xe=i[A+1|0]|0,Ae=A+2|0,ve=(A+2|0)+(xe|0)|0,ce(xe+1|0)|0)?1:(x(Ae|0,ve|0),A=ve|0,0)}function se(F){F=F|0;var Ae=0,ve=0,xe=0;return ce(2)|0||(xe=de(A+1|0)|0,Ae=A+3|0,ve=(A+3|0)+(xe|0)|0,ce(xe+2|0)|0)?1:(x(Ae|0,ve|0),A=ve|0,0)}function ue(F){F=F|0;var Ae=0,ve=0,xe=0;return ce(4)|0||(xe=E(A+1|0)|0,Ae=A+5|0,ve=(A+5|0)+(xe|0)|0,ce(xe+4|0)|0)?1:(x(Ae|0,ve|0),A=ve|0,0)}function fe(F){return F=F|0,1}function me(F){return F=F|0,N(),A=A+1|0,0}function d(F){F=F|0;var Ae=0,ve=0,xe=0;return xe=F-96|0,ce(xe|0)|0?1:(Ae=A+1|0,ve=(A+1|0)+(xe|0)|0,$(Ae|0,ve|0),A=ve|0,0)}function u(F){F=F|0;var Ae=0,ve=0,xe=0;return ce(1)|0||(xe=i[A+1|0]|0,Ae=A+2|0,ve=(A+2|0)+(xe|0)|0,ce(xe+1|0)|0)?1:($(Ae|0,ve|0),A=ve|0,0)}function l(F){F=F|0;var Ae=0,ve=0,xe=0;return ce(2)|0||(xe=de(A+1|0)|0,Ae=A+3|0,ve=(A+3|0)+(xe|0)|0,ce(xe+2|0)|0)?1:($(Ae|0,ve|0),A=ve|0,0)}function B(F){F=F|0;var Ae=0,ve=0,xe=0;return ce(4)|0||(xe=E(A+1|0)|0,Ae=A+5|0,ve=(A+5|0)+(xe|0)|0,ce(xe+4|0)|0)?1:($(Ae|0,ve|0),A=ve|0,0)}function M(F){return F=F|0,1}function W(F){return F=F|0,L(),A=A+1|0,0}function Z(F){return F=F|0,C(F-128|0),A=A+1|0,0}function ge(F){return F=F|0,ce(1)|0?1:(C(i[A+1|0]|0),A=A+2|0,0)}function be(F){return F=F|0,ce(2)|0?1:(C(de(A+1|0)|0),A=A+3|0,0)}function we(F){return F=F|0,ce(4)|0?1:(z(de(A+1|0)|0,de(A+3|0)|0),A=A+5|0,0)}function ye(F){return F=F|0,ce(8)|0?1:(te(de(A+1|0)|0,de(A+3|0)|0,de(A+5|0)|0,de(A+7|0)|0),A=A+9|0,0)}function Te(F){return F=F|0,R(),A=A+1|0,0}function Oe(F){F=F|0;var Ae=0;return Ae=F-160|0,ce(Ae|0)|0?1:(U(Ae|0),A=A+1|0,0)}function Zi(F){return F=F|0,ce(1)|0?1:(U(i[A+1|0]|0),A=A+2|0,0)}function Ki(F){return F=F|0,ce(2)|0?1:(U(de(A+1|0)|0),A=A+3|0,0)}function Wi(F){return F=F|0,ce(4)|0?1:(H(de(A+1|0)|0,de(A+3|0)|0),A=A+5|0,0)}function zi(F){return F=F|0,ce(8)|0?1:(J(de(A+1|0)|0,de(A+3|0)|0,de(A+5|0)|0,de(A+7|0)|0),A=A+9|0,0)}function Li(F){return F=F|0,re(),A=A+1|0,0}function Kt(F){return F=F|0,Q(F-192|0|0),A=A+1|0,0}function Oh(F){return F=F|0,Q(F|0),A=A+1|0,0}function Fh(F){return F=F|0,Q(F|0),A=A+1|0,0}function $h(F){return F=F|0,Q(F|0),A=A+1|0,0}function Mh(F){return F=F|0,Q(F|0),A=A+1|0,0}function Ze(F){return F=F|0,Q(F-192|0|0),A=A+1|0,0}function kh(F){return F=F|0,Q(F|0),A=A+1|0,0}function Ph(F){return F=F|0,Q(F|0),A=A+1|0,0}function Ch(F){return F=F|0,Q(F|0),A=A+1|0,0}function hu(F){return F=F|0,ce(1)|0?1:(Q(i[A+1|0]|0),A=A+2|0,0)}function du(F){return F=F|0,ce(2)|0?1:(Q(de(A+1|0)|0),A=A+3|0,0)}function pu(F){return F=F|0,ce(4)|0?1:(ne(de(A+1|0)|0,de(A+3|0)|0),A=A+5|0,0)}function yu(F){return F=F|0,ce(8)|0?1:(he(de(A+1|0)|0,de(A+3|0)|0,de(A+5|0)|0,de(A+7|0)|0),A=A+9|0,0)}function Ve(F){return F=F|0,ee((F|0)-224|0),A=A+1|0,0}function gu(F){return F=F|0,g(),A=A+1|0,0}function wu(F){return F=F|0,m(),A=A+1|0,0}function mu(F){return F=F|0,q(),A=A+1|0,0}function bu(F){return F=F|0,k(),A=A+1|0,0}function _u(F){return F=F|0,ce(1)|0?1:(ee(i[A+1|0]|0),A=A+2|0,0)}function xu(F){F=F|0;var Ae=0,ve=0,xe=1,Mn=0,nn=0,qh=0;return ce(2)|0?1:(Ae=i[A+1|0]|0,ve=i[A+2|0]|0,(Ae|0)&128&&(xe=-1),Mn=+(((Ae|0)&124)>>2),nn=+(((Ae|0)&3)<<8|ve),+Mn==0?S(+(+xe*5960464477539063e-23*+nn)):+Mn==31?+xe==1?+nn>0?j():X():+nn>0?D():K():S(+(+xe*Se(2,+(+Mn-25))*+(1024+nn))),A=A+3|0,0)}function Eu(F){return F=F|0,ce(4)|0?1:(v(i[A+1|0]|0,i[A+2|0]|0,i[A+3|0]|0,i[A+4|0]|0),A=A+5|0,0)}function Au(F){return F=F|0,ce(8)|0?1:(b(i[A+1|0]|0,i[A+2|0]|0,i[A+3|0]|0,i[A+4|0]|0,i[A+5|0]|0,i[A+6|0]|0,i[A+7|0]|0,i[A+8|0]|0),A=A+9|0,0)}function Re(F){return F=F|0,1}function vu(F){return F=F|0,ie(),A=A+1|0,0}var Bu=[T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,O,V,P,G,Re,Re,Re,Re,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,o,c,y,_,Re,Re,Re,Re,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,Y,se,ue,fe,Re,Re,Re,me,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,u,l,B,M,Re,Re,Re,W,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,ge,be,we,ye,Re,Re,Re,Te,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Zi,Ki,Wi,zi,Re,Re,Re,Li,Kt,Kt,Kt,Kt,Kt,Kt,Ze,Ze,Ze,Ze,Ze,Ze,Ze,Ze,Ze,Ze,Ze,Ze,Ze,Ze,Ze,Ze,Ze,Ze,hu,du,pu,yu,Re,Re,Re,Re,Ve,Ve,Ve,Ve,Ve,Ve,Ve,Ve,Ve,Ve,Ve,Ve,Ve,Ve,Ve,Ve,Ve,Ve,Ve,Ve,gu,wu,mu,bu,_u,xu,Eu,Au,Re,Re,Re,vu];return{parse:$e}},$i={},st={};const Zs=Fi.BigNumber;st.MT={POS_INT:0,NEG_INT:1,BYTE_STRING:2,UTF8_STRING:3,ARRAY:4,MAP:5,TAG:6,SIMPLE_FLOAT:7};st.TAG={DATE_STRING:0,DATE_EPOCH:1,POS_BIGINT:2,NEG_BIGINT:3,DECIMAL_FRAC:4,BIGFLOAT:5,BASE64URL_EXPECTED:21,BASE64_EXPECTED:22,BASE16_EXPECTED:23,CBOR:24,URI:32,BASE64URL:33,BASE64:34,REGEXP:35,MIME:36};st.NUMBYTES={ZERO:0,ONE:24,TWO:25,FOUR:26,EIGHT:27,INDEFINITE:31};st.SIMPLE={FALSE:20,TRUE:21,NULL:22,UNDEFINED:23};st.SYMS={NULL:Symbol("null"),UNDEFINED:Symbol("undef"),PARENT:Symbol("parent"),BREAK:Symbol("break"),STREAM:Symbol("stream")};st.SHIFT32=Math.pow(2,32);st.SHIFT16=Math.pow(2,16);st.MAX_SAFE_HIGH=2097151;st.NEG_ONE=new Zs(-1);st.TEN=new Zs(10);st.TWO=new Zs(2);st.PARENT={ARRAY:0,OBJECT:1,MAP:2,TAG:3,BYTE_STRING:4,UTF8_STRING:5};(function(t){const{Buffer:e}=Un,r=Fi.BigNumber,n=st,i=n.SHIFT32,a=n.SHIFT16,f=2097151;t.parseHalf=function(w){var S,v,b;return b=w[0]&128?-1:1,S=(w[0]&124)>>2,v=(w[0]&3)<<8|w[1],S?S===31?b*(v?0/0:1/0):b*Math.pow(2,S-25)*(1024+v):b*5960464477539063e-23*v};function s(p){return p<16?"0"+p.toString(16):p.toString(16)}t.arrayBufferToBignumber=function(p){const w=p.byteLength;let S="";for(let v=0;v<w;v++)S+=s(p[v]);return new r(S,16)},t.buildMap=p=>{const w=new Map,S=Object.keys(p),v=S.length;for(let b=0;b<v;b++)w.set(S[b],p[S[b]]);return w},t.buildInt32=(p,w)=>p*a+w,t.buildInt64=(p,w,S,v)=>{const b=t.buildInt32(p,w),m=t.buildInt32(S,v);return b>f?new r(b).times(i).plus(m):b*i+m},t.writeHalf=function(w,S){const v=e.allocUnsafe(4);v.writeFloatBE(S,0);const b=v.readUInt32BE(0);if(b&8191)return!1;var m=b>>16&32768;const g=b>>23&255,k=b&8388607;if(g>=113&&g<=142)m+=(g-112<<10)+(k>>13);else if(g>=103&&g<113){if(k&(1<<126-g)-1)return!1;m+=k+8388608>>126-g}else return!1;return w.writeUInt16BE(m,0),!0},t.keySorter=function(p,w){var S=p[0].byteLength,v=w[0].byteLength;return S>v?1:v>S?-1:p[0].compare(w[0])},t.isNegativeZero=p=>p===0&&1/p<0,t.nextPowerOf2=p=>{let w=0;if(p&&!(p&p-1))return p;for(;p!==0;)p>>=1,w+=1;return 1<<w}})($i);const Ks=st,qf=Ks.MT,Gn=Ks.SIMPLE,ts=Ks.SYMS;let Vf=class As{constructor(e){if(typeof e!="number")throw new Error("Invalid Simple type: "+typeof e);if(e<0||e>255||(e|0)!==e)throw new Error("value must be a small positive integer: "+e);this.value=e}toString(){return"simple("+this.value+")"}inspect(){return"simple("+this.value+")"}encodeCBOR(e){return e._pushInt(this.value,qf.SIMPLE_FLOAT)}static isSimple(e){return e instanceof As}static decode(e,r){switch(r==null&&(r=!0),e){case Gn.FALSE:return!1;case Gn.TRUE:return!0;case Gn.NULL:return r?null:ts.NULL;case Gn.UNDEFINED:return r?void 0:ts.UNDEFINED;case-1:if(!r)throw new Error("Invalid BREAK");return ts.BREAK;default:return new As(e)}}};var nc=Vf;let Gf=class vs{constructor(e,r,n){if(this.tag=e,this.value=r,this.err=n,typeof this.tag!="number")throw new Error("Invalid tag type ("+typeof this.tag+")");if(this.tag<0||(this.tag|0)!==this.tag)throw new Error("Tag must be a positive integer: "+this.tag)}toString(){return`${this.tag}(${JSON.stringify(this.value)})`}encodeCBOR(e){return e._pushTag(this.tag),e.pushAny(this.value)}convert(e){var r,n;if(n=e!=null?e[this.tag]:void 0,typeof n!="function"&&(n=vs["_tag"+this.tag],typeof n!="function"))return this;try{return n.call(vs,this.value)}catch(i){return r=i,this.err=r,this}}};var ic=Gf;const sc=self.location?self.location.protocol+"//"+self.location.host:"",Bs=self.URL;let Hf=class{constructor(e="",r=sc){this.super=new Bs(e,r),this.path=this.pathname+this.search,this.auth=this.username&&this.password?this.username+":"+this.password:null,this.query=this.search&&this.search.startsWith("?")?this.search.slice(1):null}get hash(){return this.super.hash}get host(){return this.super.host}get hostname(){return this.super.hostname}get href(){return this.super.href}get origin(){return this.super.origin}get password(){return this.super.password}get pathname(){return this.super.pathname}get port(){return this.super.port}get protocol(){return this.super.protocol}get search(){return this.super.search}get searchParams(){return this.super.searchParams}get username(){return this.super.username}set hash(e){this.super.hash=e}set host(e){this.super.host=e}set hostname(e){this.super.hostname=e}set href(e){this.super.href=e}set origin(e){this.super.origin=e}set password(e){this.super.password=e}set pathname(e){this.super.pathname=e}set port(e){this.super.port=e}set protocol(e){this.super.protocol=e}set search(e){this.super.search=e}set searchParams(e){this.super.searchParams=e}set username(e){this.super.username=e}createObjectURL(e){return this.super.createObjectURL(e)}revokeObjectURL(e){this.super.revokeObjectURL(e)}toJSON(){return this.super.toJSON()}toString(){return this.super.toString()}format(){return this.toString()}};function jf(t){if(typeof t=="string")return new Bs(t).toString();if(!(t instanceof Bs)){const e=t.username&&t.password?`${t.username}:${t.password}@`:"",r=t.auth?t.auth+"@":"",n=t.port?":"+t.port:"",i=t.protocol?t.protocol+"//":"",a=t.host||"",f=t.hostname||"",s=t.search||(t.query?"?"+t.query:""),p=t.hash||"",w=t.pathname||"",S=t.path||w+s;return`${i}${e||r}${a||f+n}${S}${p}`}}var oc={URLWithLegacySupport:Hf,URLSearchParams:self.URLSearchParams,defaultBase:sc,format:jf};const{URLWithLegacySupport:mo,format:Yf}=oc;var Zf=(t,e={},r={},n)=>{let i=e.protocol?e.protocol.replace(":",""):"http";i=(r[i]||n||i)+":";let a;try{a=new mo(t)}catch{a={}}const f=Object.assign({},e,{protocol:i||a.protocol,host:e.host||a.host});return new mo(t,Yf(f)).toString()};const{URLWithLegacySupport:Kf,format:Wf,URLSearchParams:zf,defaultBase:Lf}=oc,Xf=Zf;var ac={URL:Kf,URLSearchParams:zf,format:Wf,relative:Xf,defaultBase:Lf};const{Buffer:Fr}=Un,bo=Nn,Jf=Fi.BigNumber,Qf=Cf,ot=$i,Ie=st,Df=nc,e0=ic,{URL:t0}=ac;let Ts=class Ss{constructor(e){e=e||{},!e.size||e.size<65536?e.size=65536:e.size=ot.nextPowerOf2(e.size),this._heap=new ArrayBuffer(e.size),this._heap8=new Uint8Array(this._heap),this._buffer=Fr.from(this._heap),this._reset(),this._knownTags=Object.assign({0:r=>new Date(r),1:r=>new Date(r*1e3),2:r=>ot.arrayBufferToBignumber(r),3:r=>Ie.NEG_ONE.minus(ot.arrayBufferToBignumber(r)),4:r=>Ie.TEN.pow(r[0]).times(r[1]),5:r=>Ie.TWO.pow(r[0]).times(r[1]),32:r=>new t0(r),35:r=>new RegExp(r)},e.tags),this.parser=Qf(Lr,{log:console.log.bind(console),pushInt:this.pushInt.bind(this),pushInt32:this.pushInt32.bind(this),pushInt32Neg:this.pushInt32Neg.bind(this),pushInt64:this.pushInt64.bind(this),pushInt64Neg:this.pushInt64Neg.bind(this),pushFloat:this.pushFloat.bind(this),pushFloatSingle:this.pushFloatSingle.bind(this),pushFloatDouble:this.pushFloatDouble.bind(this),pushTrue:this.pushTrue.bind(this),pushFalse:this.pushFalse.bind(this),pushUndefined:this.pushUndefined.bind(this),pushNull:this.pushNull.bind(this),pushInfinity:this.pushInfinity.bind(this),pushInfinityNeg:this.pushInfinityNeg.bind(this),pushNaN:this.pushNaN.bind(this),pushNaNNeg:this.pushNaNNeg.bind(this),pushArrayStart:this.pushArrayStart.bind(this),pushArrayStartFixed:this.pushArrayStartFixed.bind(this),pushArrayStartFixed32:this.pushArrayStartFixed32.bind(this),pushArrayStartFixed64:this.pushArrayStartFixed64.bind(this),pushObjectStart:this.pushObjectStart.bind(this),pushObjectStartFixed:this.pushObjectStartFixed.bind(this),pushObjectStartFixed32:this.pushObjectStartFixed32.bind(this),pushObjectStartFixed64:this.pushObjectStartFixed64.bind(this),pushByteString:this.pushByteString.bind(this),pushByteStringStart:this.pushByteStringStart.bind(this),pushUtf8String:this.pushUtf8String.bind(this),pushUtf8StringStart:this.pushUtf8StringStart.bind(this),pushSimpleUnassigned:this.pushSimpleUnassigned.bind(this),pushTagUnassigned:this.pushTagUnassigned.bind(this),pushTagStart:this.pushTagStart.bind(this),pushTagStart4:this.pushTagStart4.bind(this),pushTagStart8:this.pushTagStart8.bind(this),pushBreak:this.pushBreak.bind(this)},this._heap)}get _depth(){return this._parents.length}get _currentParent(){return this._parents[this._depth-1]}get _ref(){return this._currentParent.ref}_closeParent(){var e=this._parents.pop();if(e.length>0)throw new Error(`Missing ${e.length} elements`);switch(e.type){case Ie.PARENT.TAG:this._push(this.createTag(e.ref[0],e.ref[1]));break;case Ie.PARENT.BYTE_STRING:this._push(this.createByteString(e.ref,e.length));break;case Ie.PARENT.UTF8_STRING:this._push(this.createUtf8String(e.ref,e.length));break;case Ie.PARENT.MAP:if(e.values%2>0)throw new Error("Odd number of elements in the map");this._push(this.createMap(e.ref,e.length));break;case Ie.PARENT.OBJECT:if(e.values%2>0)throw new Error("Odd number of elements in the map");this._push(this.createObject(e.ref,e.length));break;case Ie.PARENT.ARRAY:this._push(this.createArray(e.ref,e.length));break}this._currentParent&&this._currentParent.type===Ie.PARENT.TAG&&this._dec()}_dec(){const e=this._currentParent;e.length<0||(e.length--,e.length===0&&this._closeParent())}_push(e,r){const n=this._currentParent;switch(n.values++,n.type){case Ie.PARENT.ARRAY:case Ie.PARENT.BYTE_STRING:case Ie.PARENT.UTF8_STRING:n.length>-1?this._ref[this._ref.length-n.length]=e:this._ref.push(e),this._dec();break;case Ie.PARENT.OBJECT:n.tmpKey!=null?(this._ref[n.tmpKey]=e,n.tmpKey=null,this._dec()):(n.tmpKey=e,typeof n.tmpKey!="string"&&(n.type=Ie.PARENT.MAP,n.ref=ot.buildMap(n.ref)));break;case Ie.PARENT.MAP:n.tmpKey!=null?(this._ref.set(n.tmpKey,e),n.tmpKey=null,this._dec()):n.tmpKey=e;break;case Ie.PARENT.TAG:this._ref.push(e),r||this._dec();break;default:throw new Error("Unknown parent type")}}_createParent(e,r,n){this._parents[this._depth]={type:r,length:n,ref:e,values:0,tmpKey:null}}_reset(){this._res=[],this._parents=[{type:Ie.PARENT.ARRAY,length:-1,ref:this._res,values:0,tmpKey:null}]}createTag(e,r){const n=this._knownTags[e];return n?n(r):new e0(e,r)}createMap(e,r){return e}createObject(e,r){return e}createArray(e,r){return e}createByteString(e,r){return Fr.concat(e)}createByteStringFromHeap(e,r){return e===r?Fr.alloc(0):Fr.from(this._heap.slice(e,r))}createInt(e){return e}createInt32(e,r){return ot.buildInt32(e,r)}createInt64(e,r,n,i){return ot.buildInt64(e,r,n,i)}createFloat(e){return e}createFloatSingle(e,r,n,i){return bo.read([e,r,n,i],0,!1,23,4)}createFloatDouble(e,r,n,i,a,f,s,p){return bo.read([e,r,n,i,a,f,s,p],0,!1,52,8)}createInt32Neg(e,r){return-1-ot.buildInt32(e,r)}createInt64Neg(e,r,n,i){const a=ot.buildInt32(e,r),f=ot.buildInt32(n,i);return a>Ie.MAX_SAFE_HIGH?Ie.NEG_ONE.minus(new Jf(a).times(Ie.SHIFT32).plus(f)):-1-(a*Ie.SHIFT32+f)}createTrue(){return!0}createFalse(){return!1}createNull(){return null}createUndefined(){}createInfinity(){return 1/0}createInfinityNeg(){return-1/0}createNaN(){return NaN}createNaNNeg(){return NaN}createUtf8String(e,r){return e.join("")}createUtf8StringFromHeap(e,r){return e===r?"":this._buffer.toString("utf8",e,r)}createSimpleUnassigned(e){return new Df(e)}pushInt(e){this._push(this.createInt(e))}pushInt32(e,r){this._push(this.createInt32(e,r))}pushInt64(e,r,n,i){this._push(this.createInt64(e,r,n,i))}pushFloat(e){this._push(this.createFloat(e))}pushFloatSingle(e,r,n,i){this._push(this.createFloatSingle(e,r,n,i))}pushFloatDouble(e,r,n,i,a,f,s,p){this._push(this.createFloatDouble(e,r,n,i,a,f,s,p))}pushInt32Neg(e,r){this._push(this.createInt32Neg(e,r))}pushInt64Neg(e,r,n,i){this._push(this.createInt64Neg(e,r,n,i))}pushTrue(){this._push(this.createTrue())}pushFalse(){this._push(this.createFalse())}pushNull(){this._push(this.createNull())}pushUndefined(){this._push(this.createUndefined())}pushInfinity(){this._push(this.createInfinity())}pushInfinityNeg(){this._push(this.createInfinityNeg())}pushNaN(){this._push(this.createNaN())}pushNaNNeg(){this._push(this.createNaNNeg())}pushArrayStart(){this._createParent([],Ie.PARENT.ARRAY,-1)}pushArrayStartFixed(e){this._createArrayStartFixed(e)}pushArrayStartFixed32(e,r){const n=ot.buildInt32(e,r);this._createArrayStartFixed(n)}pushArrayStartFixed64(e,r,n,i){const a=ot.buildInt64(e,r,n,i);this._createArrayStartFixed(a)}pushObjectStart(){this._createObjectStartFixed(-1)}pushObjectStartFixed(e){this._createObjectStartFixed(e)}pushObjectStartFixed32(e,r){const n=ot.buildInt32(e,r);this._createObjectStartFixed(n)}pushObjectStartFixed64(e,r,n,i){const a=ot.buildInt64(e,r,n,i);this._createObjectStartFixed(a)}pushByteStringStart(){this._parents[this._depth]={type:Ie.PARENT.BYTE_STRING,length:-1,ref:[],values:0,tmpKey:null}}pushByteString(e,r){this._push(this.createByteStringFromHeap(e,r))}pushUtf8StringStart(){this._parents[this._depth]={type:Ie.PARENT.UTF8_STRING,length:-1,ref:[],values:0,tmpKey:null}}pushUtf8String(e,r){this._push(this.createUtf8StringFromHeap(e,r))}pushSimpleUnassigned(e){this._push(this.createSimpleUnassigned(e))}pushTagStart(e){this._parents[this._depth]={type:Ie.PARENT.TAG,length:1,ref:[e]}}pushTagStart4(e,r){this.pushTagStart(ot.buildInt32(e,r))}pushTagStart8(e,r,n,i){this.pushTagStart(ot.buildInt64(e,r,n,i))}pushTagUnassigned(e){this._push(this.createTag(e))}pushBreak(){if(this._currentParent.length>-1)throw new Error("Unexpected break");this._closeParent()}_createObjectStartFixed(e){if(e===0){this._push(this.createObject({}));return}this._createParent({},Ie.PARENT.OBJECT,e)}_createArrayStartFixed(e){if(e===0){this._push(this.createArray([]));return}this._createParent(new Array(e),Ie.PARENT.ARRAY,e)}_decode(e){if(e.byteLength===0)throw new Error("Input too short");this._reset(),this._heap8.set(e);const r=this.parser.parse(e.byteLength);if(this._depth>1){for(;this._currentParent.length===0;)this._closeParent();if(this._depth>1)throw new Error("Undeterminated nesting")}if(r>0)throw new Error("Failed to parse");if(this._res.length===0)throw new Error("No valid result")}decodeFirst(e){return this._decode(e),this._res[0]}decodeAll(e){return this._decode(e),this._res}static decode(e,r){return typeof e=="string"&&(e=Fr.from(e,r||"hex")),new Ss({size:e.length}).decodeFirst(e)}static decodeAll(e,r){return typeof e=="string"&&(e=Fr.from(e,r||"hex")),new Ss({size:e.length}).decodeAll(e)}};Ts.decodeFirst=Ts.decode;var cc=Ts;const{Buffer:rs}=Un,r0=cc,n0=$i;class Ws extends r0{createTag(e,r){return`${e}(${r})`}createInt(e){return super.createInt(e).toString()}createInt32(e,r){return super.createInt32(e,r).toString()}createInt64(e,r,n,i){return super.createInt64(e,r,n,i).toString()}createInt32Neg(e,r){return super.createInt32Neg(e,r).toString()}createInt64Neg(e,r,n,i){return super.createInt64Neg(e,r,n,i).toString()}createTrue(){return"true"}createFalse(){return"false"}createFloat(e){const r=super.createFloat(e);return n0.isNegativeZero(e)?"-0_1":`${r}_1`}createFloatSingle(e,r,n,i){return`${super.createFloatSingle(e,r,n,i)}_2`}createFloatDouble(e,r,n,i,a,f,s,p){return`${super.createFloatDouble(e,r,n,i,a,f,s,p)}_3`}createByteString(e,r){const n=e.join(", ");return r===-1?`(_ ${n})`:`h'${n}`}createByteStringFromHeap(e,r){return`h'${rs.from(super.createByteStringFromHeap(e,r)).toString("hex")}'`}createInfinity(){return"Infinity_1"}createInfinityNeg(){return"-Infinity_1"}createNaN(){return"NaN_1"}createNaNNeg(){return"-NaN_1"}createNull(){return"null"}createUndefined(){return"undefined"}createSimpleUnassigned(e){return`simple(${e})`}createArray(e,r){const n=super.createArray(e,r);return r===-1?`[_ ${n.join(", ")}]`:`[${n.join(", ")}]`}createMap(e,r){const n=super.createMap(e),i=Array.from(n.keys()).reduce(_o(n),"");return r===-1?`{_ ${i}}`:`{${i}}`}createObject(e,r){const n=super.createObject(e),i=Object.keys(n).reduce(_o(n),"");return r===-1?`{_ ${i}}`:`{${i}}`}createUtf8String(e,r){const n=e.join(", ");return r===-1?`(_ ${n})`:`"${n}"`}createUtf8StringFromHeap(e,r){return`"${rs.from(super.createUtf8StringFromHeap(e,r)).toString("utf8")}"`}static diagnose(e,r){return typeof e=="string"&&(e=rs.from(e,r||"hex")),new Ws().decodeFirst(e)}}var i0=Ws;function _o(t){return(e,r)=>e?`${e}, ${r}: ${t[r]}`:`${r}: ${t[r]}`}const{Buffer:Nt}=Un,{URL:s0}=ac,Ns=Fi.BigNumber,ns=$i,Ye=st,gt=Ye.MT,Hn=Ye.NUMBYTES,xo=Ye.SHIFT32,Eo=Ye.SYMS,$r=Ye.TAG,o0=Ye.MT.SIMPLE_FLOAT<<5|Ye.NUMBYTES.TWO,a0=Ye.MT.SIMPLE_FLOAT<<5|Ye.NUMBYTES.FOUR,c0=Ye.MT.SIMPLE_FLOAT<<5|Ye.NUMBYTES.EIGHT,u0=Ye.MT.SIMPLE_FLOAT<<5|Ye.SIMPLE.TRUE,f0=Ye.MT.SIMPLE_FLOAT<<5|Ye.SIMPLE.FALSE,l0=Ye.MT.SIMPLE_FLOAT<<5|Ye.SIMPLE.UNDEFINED,Ao=Ye.MT.SIMPLE_FLOAT<<5|Ye.SIMPLE.NULL,h0=new Ns("0x20000000000000"),d0=Nt.from("f97e00","hex"),p0=Nt.from("f9fc00","hex"),y0=Nt.from("f97c00","hex");function g0(t){return{}.toString.call(t).slice(8,-1)}class mi{constructor(e){e=e||{},this.streaming=typeof e.stream=="function",this.onData=e.stream,this.semanticTypes=[[s0,this._pushUrl],[Ns,this._pushBigNumber]];const r=e.genTypes||[],n=r.length;for(let i=0;i<n;i++)this.addSemanticType(r[i][0],r[i][1]);this._reset()}addSemanticType(e,r){const n=this.semanticTypes.length;for(let i=0;i<n;i++)if(this.semanticTypes[i][0]===e){const f=this.semanticTypes[i][1];return this.semanticTypes[i][1]=r,f}return this.semanticTypes.push([e,r]),null}push(e){return e&&(this.result[this.offset]=e,this.resultMethod[this.offset]=0,this.resultLength[this.offset]=e.length,this.offset++,this.streaming&&this.onData(this.finalize())),!0}pushWrite(e,r,n){return this.result[this.offset]=e,this.resultMethod[this.offset]=r,this.resultLength[this.offset]=n,this.offset++,this.streaming&&this.onData(this.finalize()),!0}_pushUInt8(e){return this.pushWrite(e,1,1)}_pushUInt16BE(e){return this.pushWrite(e,2,2)}_pushUInt32BE(e){return this.pushWrite(e,3,4)}_pushDoubleBE(e){return this.pushWrite(e,4,8)}_pushNaN(){return this.push(d0)}_pushInfinity(e){const r=e<0?p0:y0;return this.push(r)}_pushFloat(e){const r=Nt.allocUnsafe(2);if(ns.writeHalf(r,e)&&ns.parseHalf(r)===e)return this._pushUInt8(o0)&&this.push(r);const n=Nt.allocUnsafe(4);return n.writeFloatBE(e,0),n.readFloatBE(0)===e?this._pushUInt8(a0)&&this.push(n):this._pushUInt8(c0)&&this._pushDoubleBE(e)}_pushInt(e,r,n){const i=r<<5;return e<24?this._pushUInt8(i|e):e<=255?this._pushUInt8(i|Hn.ONE)&&this._pushUInt8(e):e<=65535?this._pushUInt8(i|Hn.TWO)&&this._pushUInt16BE(e):e<=4294967295?this._pushUInt8(i|Hn.FOUR)&&this._pushUInt32BE(e):e<=Number.MAX_SAFE_INTEGER?this._pushUInt8(i|Hn.EIGHT)&&this._pushUInt32BE(Math.floor(e/xo))&&this._pushUInt32BE(e%xo):r===gt.NEG_INT?this._pushFloat(n):this._pushFloat(e)}_pushIntNum(e){return e<0?this._pushInt(-e-1,gt.NEG_INT,e):this._pushInt(e,gt.POS_INT)}_pushNumber(e){switch(!1){case e===e:return this._pushNaN(e);case isFinite(e):return this._pushInfinity(e);case e%1!==0:return this._pushIntNum(e);default:return this._pushFloat(e)}}_pushString(e){const r=Nt.byteLength(e,"utf8");return this._pushInt(r,gt.UTF8_STRING)&&this.pushWrite(e,5,r)}_pushBoolean(e){return this._pushUInt8(e?u0:f0)}_pushUndefined(e){return this._pushUInt8(l0)}_pushArray(e,r){const n=r.length;if(!e._pushInt(n,gt.ARRAY))return!1;for(let i=0;i<n;i++)if(!e.pushAny(r[i]))return!1;return!0}_pushTag(e){return this._pushInt(e,gt.TAG)}_pushDate(e,r){return e._pushTag($r.DATE_EPOCH)&&e.pushAny(Math.round(r/1e3))}_pushBuffer(e,r){return e._pushInt(r.length,gt.BYTE_STRING)&&e.push(r)}_pushNoFilter(e,r){return e._pushBuffer(e,r.slice())}_pushRegexp(e,r){return e._pushTag($r.REGEXP)&&e.pushAny(r.source)}_pushSet(e,r){if(!e._pushInt(r.size,gt.ARRAY))return!1;for(const n of r)if(!e.pushAny(n))return!1;return!0}_pushUrl(e,r){return e._pushTag($r.URI)&&e.pushAny(r.format())}_pushBigint(e){let r=$r.POS_BIGINT;e.isNegative()&&(e=e.negated().minus(1),r=$r.NEG_BIGINT);let n=e.toString(16);n.length%2&&(n="0"+n);const i=Nt.from(n,"hex");return this._pushTag(r)&&this._pushBuffer(this,i)}_pushBigNumber(e,r){if(r.isNaN())return e._pushNaN();if(!r.isFinite())return e._pushInfinity(r.isNegative()?-1/0:1/0);if(r.isInteger())return e._pushBigint(r);if(!(e._pushTag($r.DECIMAL_FRAC)&&e._pushInt(2,gt.ARRAY)))return!1;const n=r.decimalPlaces(),i=r.multipliedBy(new Ns(10).pow(n));return e._pushIntNum(-n)?i.abs().isLessThan(h0)?e._pushIntNum(i.toNumber()):e._pushBigint(i):!1}_pushMap(e,r){return e._pushInt(r.size,gt.MAP)?this._pushRawMap(r.size,Array.from(r)):!1}_pushObject(e){if(!e)return this._pushUInt8(Ao);for(var r=this.semanticTypes.length,n=0;n<r;n++)if(e instanceof this.semanticTypes[n][0])return this.semanticTypes[n][1].call(e,this,e);var i=e.encodeCBOR;if(typeof i=="function")return i.call(e,this);var a=Object.keys(e),f=a.length;return this._pushInt(f,gt.MAP)?this._pushRawMap(f,a.map(s=>[s,e[s]])):!1}_pushRawMap(e,r){r=r.map(function(i){return i[0]=mi.encode(i[0]),i}).sort(ns.keySorter);for(var n=0;n<e;n++)if(!this.push(r[n][0])||!this.pushAny(r[n][1]))return!1;return!0}write(e){return this.pushAny(e)}pushAny(e){var r=g0(e);switch(r){case"Number":return this._pushNumber(e);case"String":return this._pushString(e);case"Boolean":return this._pushBoolean(e);case"Object":return this._pushObject(e);case"Array":return this._pushArray(this,e);case"Uint8Array":return this._pushBuffer(this,Nt.isBuffer(e)?e:Nt.from(e));case"Null":return this._pushUInt8(Ao);case"Undefined":return this._pushUndefined(e);case"Map":return this._pushMap(this,e);case"Set":return this._pushSet(this,e);case"URL":return this._pushUrl(this,e);case"BigNumber":return this._pushBigNumber(this,e);case"Date":return this._pushDate(this,e);case"RegExp":return this._pushRegexp(this,e);case"Symbol":switch(e){case Eo.NULL:return this._pushObject(null);case Eo.UNDEFINED:return this._pushUndefined(void 0);default:throw new Error("Unknown symbol: "+e.toString())}default:throw new Error("Unknown type: "+typeof e+", "+(e?e.toString():""))}}finalize(){if(this.offset===0)return null;for(var e=this.result,r=this.resultLength,n=this.resultMethod,i=this.offset,a=0,f=0;f<i;f++)a+=r[f];var s=Nt.allocUnsafe(a),p=0,w=0;for(f=0;f<i;f++){switch(w=r[f],n[f]){case 0:e[f].copy(s,p);break;case 1:s.writeUInt8(e[f],p,!0);break;case 2:s.writeUInt16BE(e[f],p,!0);break;case 3:s.writeUInt32BE(e[f],p,!0);break;case 4:s.writeDoubleBE(e[f],p,!0);break;case 5:s.write(e[f],p,w,"utf8");break;default:throw new Error("unkown method")}p+=w}var S=s;return this._reset(),S}_reset(){this.result=[],this.resultMethod=[],this.resultLength=[],this.offset=0}static encode(e){const r=new mi;if(!r.pushAny(e))throw new Error("Failed to encode input");return r.finalize()}}var w0=mi;(function(t){t.Diagnose=i0,t.Decoder=cc,t.Encoder=w0,t.Simple=nc,t.Tagged=ic,t.decodeAll=t.Decoder.decodeAll,t.decodeFirst=t.Decoder.decodeFirst,t.diagnose=t.Diagnose.diagnose,t.encode=t.Encoder.encode,t.decode=t.Decoder.decode,t.leveldb={decode:t.Decoder.decodeAll,encode:t.Encoder.encode,buffer:!0,name:"cbor"}})(tc);const uc=Cu(tc);function _t(t){return Ln(Af.create().update(new Uint8Array(t)).digest())}function Jn(t){if(t instanceof uc.Tagged)return Jn(t.value);if(typeof t=="string")return fc(t);if(typeof t=="number")return _t(ke(t));if(t instanceof ArrayBuffer||ArrayBuffer.isView(t))return _t(t);if(Array.isArray(t)){const e=t.map(Jn);return _t(Ot(...e))}else{if(t&&typeof t=="object"&&t._isPrincipal)return _t(t.toUint8Array());if(typeof t=="object"&&t!==null&&typeof t.toHash=="function")return Jn(t.toHash());if(typeof t=="object")return bi(t);if(typeof t=="bigint")return _t(ke(t))}throw Object.assign(new Error(`Attempt to hash a value of unsupported type: ${t}`),{value:t})}const fc=t=>{const e=new TextEncoder().encode(t);return _t(e)};function vo(t){return bi(t)}function bi(t){const n=Object.entries(t).filter(([,f])=>f!==void 0).map(([f,s])=>{const p=fc(f),w=Jn(s);return[p,w]}).sort(([f],[s])=>ga(f,s)),i=Ot(...n.map(f=>Ot(...f)));return _t(i)}globalThis&&globalThis.__rest;new TextEncoder().encode(`
ic-request`);class Bo{getPrincipal(){return _e.anonymous()}async transformRequest(e){return Object.assign(Object.assign({},e),{body:{content:e.body}})}}var Gt={},rn={},Ue={};Object.defineProperty(Ue,"__esModule",{value:!0});const m0=9007199254740992;function Yt(t,...e){const r=new Uint8Array(t.byteLength+e.reduce((i,a)=>i+a.byteLength,0));r.set(new Uint8Array(t),0);let n=t.byteLength;for(const i of e)r.set(new Uint8Array(i),n),n+=i.byteLength;return r.buffer}function xt(t,e,r){r=r.replace(/[^0-9a-fA-F]/g,"");const n=2**(e-24);r=r.slice(-n*2).padStart(n*2,"0");const i=[(t<<5)+e].concat(r.match(/../g).map(a=>parseInt(a,16)));return new Uint8Array(i).buffer}function Mi(t,e){if(e<24)return new Uint8Array([(t<<5)+e]).buffer;{const r=e<=255?24:e<=65535?25:e<=4294967295?26:27;return xt(t,r,e.toString(16))}}function lc(t){const e=[];for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);n<128?e.push(n):n<2048?e.push(192|n>>6,128|n&63):n<55296||n>=57344?e.push(224|n>>12,128|n>>6&63,128|n&63):(r++,n=(n&1023)<<10|t.charCodeAt(r)&1023,e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63))}return Yt(new Uint8Array(Mi(3,t.length)),new Uint8Array(e))}function b0(t,e){if(t==14277111)return Yt(new Uint8Array([217,217,247]),e);if(t<24)return Yt(new Uint8Array([192+t]),e);{const r=t<=255?24:t<=65535?25:t<=4294967295?26:27,n=2**(r-24),i=t.toString(16).slice(-n*2).padStart(n*2,"0"),a=[192+r].concat(i.match(/../g).map(f=>parseInt(f,16)));return new Uint8Array(a).buffer}}Ue.tagged=b0;function On(t){return new Uint8Array(t).buffer}Ue.raw=On;function zs(t){if(isNaN(t))throw new RangeError("Invalid number.");t=Math.min(Math.max(0,t),23);const e=[0+t];return new Uint8Array(e).buffer}Ue.uSmall=zs;function hc(t,e){if(t=parseInt(""+t,e),isNaN(t))throw new RangeError("Invalid number.");return t=Math.min(Math.max(0,t),255),t=t.toString(16),xt(0,24,t)}Ue.u8=hc;function dc(t,e){if(t=parseInt(""+t,e),isNaN(t))throw new RangeError("Invalid number.");return t=Math.min(Math.max(0,t),65535),t=t.toString(16),xt(0,25,t)}Ue.u16=dc;function pc(t,e){if(t=parseInt(""+t,e),isNaN(t))throw new RangeError("Invalid number.");return t=Math.min(Math.max(0,t),4294967295),t=t.toString(16),xt(0,26,t)}Ue.u32=pc;function Ls(t,e){if(typeof t=="string"&&e==16){if(t.match(/[^0-9a-fA-F]/))throw new RangeError("Invalid number.");return xt(0,27,t)}if(t=parseInt(""+t,e),isNaN(t))throw new RangeError("Invalid number.");return t=Math.min(Math.max(0,t),m0),t=t.toString(16),xt(0,27,t)}Ue.u64=Ls;function yc(t){if(isNaN(t))throw new RangeError("Invalid number.");if(t===0)return zs(0);t=Math.min(Math.max(0,-t),24)-1;const e=[32+t];return new Uint8Array(e).buffer}Ue.iSmall=yc;function gc(t,e){if(t=parseInt(""+t,e),isNaN(t))throw new RangeError("Invalid number.");return t=Math.min(Math.max(0,-t-1),255),t=t.toString(16),xt(1,24,t)}Ue.i8=gc;function wc(t,e){if(t=parseInt(""+t,e),isNaN(t))throw new RangeError("Invalid number.");return t=Math.min(Math.max(0,-t-1),65535),t=t.toString(16),xt(1,25,t)}Ue.i16=wc;function mc(t,e){if(t=parseInt(""+t,e),isNaN(t))throw new RangeError("Invalid number.");return t=Math.min(Math.max(0,-t-1),4294967295),t=t.toString(16),xt(1,26,t)}Ue.i32=mc;function bc(t,e){if(typeof t=="string"&&e==16){if(t.startsWith("-")?t=t.slice(1):t="0",t.match(/[^0-9a-fA-F]/)||t.length>16)throw new RangeError("Invalid number.");let r=!1,n=t.split("").reduceRight((i,a)=>{if(r)return a+i;let f=parseInt(a,16)-1;return f>=0?(r=!0,f.toString(16)+i):"f"+i},"");return r?xt(1,27,n):Ls(0)}if(t=parseInt(""+t,e),isNaN(t))throw new RangeError("Invalid number.");return t=Math.min(Math.max(0,-t-1),9007199254740992),t=t.toString(16),xt(1,27,t)}Ue.i64=bc;function _0(t){return t>=0?t<24?zs(t):t<=255?hc(t):t<=65535?dc(t):t<=4294967295?pc(t):Ls(t):t>=-24?yc(t):t>=-255?gc(t):t>=-65535?wc(t):t>=-4294967295?mc(t):bc(t)}Ue.number=_0;function x0(t){return Yt(Mi(2,t.byteLength),t)}Ue.bytes=x0;function E0(t){return lc(t)}Ue.string=E0;function A0(t){return Yt(Mi(4,t.length),...t)}Ue.array=A0;function v0(t,e=!1){t instanceof Map||(t=new Map(Object.entries(t)));let r=Array.from(t.entries());return e&&(r=r.sort(([n],[i])=>n.localeCompare(i))),Yt(Mi(5,t.size),...r.map(([n,i])=>Yt(lc(n),i)))}Ue.map=v0;function B0(t){const e=new Float32Array([t]);return Yt(new Uint8Array([224+26]),new Uint8Array(e.buffer))}Ue.singleFloat=B0;function T0(t){const e=new Float64Array([t]);return Yt(new Uint8Array([224+27]),new Uint8Array(e.buffer))}Ue.doubleFloat=T0;function S0(t){return t?_c():xc()}Ue.bool=S0;function _c(){return On(new Uint8Array([224+21]))}Ue.true_=_c;function xc(){return On(new Uint8Array([224+20]))}Ue.false_=xc;function N0(){return On(new Uint8Array([224+22]))}Ue.null_=N0;function I0(){return On(new Uint8Array([224+23]))}Ue.undefined_=I0;var R0=Lr&&Lr.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e};Object.defineProperty(rn,"__esModule",{value:!0});const wt=R0(Ue),U0=[ArrayBuffer,Uint8Array,Uint16Array,Uint32Array,Int8Array,Int16Array,Int32Array,Float32Array,Float64Array];class Ec{constructor(e,r=!1){this._serializer=e,this._stable=r,this.name="jsonDefault",this.priority=-100}match(e){return["undefined","boolean","number","string","object"].indexOf(typeof e)!=-1}encode(e){switch(typeof e){case"undefined":return wt.undefined_();case"boolean":return wt.bool(e);case"number":return Math.floor(e)===e?wt.number(e):wt.doubleFloat(e);case"string":return wt.string(e);case"object":if(e===null)return wt.null_();if(Array.isArray(e))return wt.array(e.map(r=>this._serializer.serializeValue(r)));if(U0.find(r=>e instanceof r))return wt.bytes(e.buffer);if(Object.getOwnPropertyNames(e).indexOf("toJSON")!==-1)return this.encode(e.toJSON());if(e instanceof Map){const r=new Map;for(const[n,i]of e.entries())r.set(n,this._serializer.serializeValue(i));return wt.map(r,this._stable)}else{const r=new Map;for(const[n,i]of Object.entries(e))r.set(n,this._serializer.serializeValue(i));return wt.map(r,this._stable)}default:throw new Error("Invalid value.")}}}rn.JsonDefaultCborEncoder=Ec;class Ac{constructor(){this.name="cborEncoder",this.priority=-90}match(e){return typeof e=="object"&&typeof e.toCBOR=="function"}encode(e){return e.toCBOR()}}rn.ToCborEncoder=Ac;class vc{constructor(){this._encoders=new Set}static withDefaultEncoders(e=!1){const r=new this;return r.addEncoder(new Ec(r,e)),r.addEncoder(new Ac),r}removeEncoder(e){for(const r of this._encoders.values())r.name==e&&this._encoders.delete(r)}addEncoder(e){this._encoders.add(e)}getEncoderFor(e){let r=null;for(const n of this._encoders)(!r||n.priority>r.priority)&&n.match(e)&&(r=n);if(r===null)throw new Error("Could not find an encoder for value.");return r}serializeValue(e){return this.getEncoderFor(e).encode(e)}serialize(e){return this.serializeValue(e)}}rn.CborSerializer=vc;class O0 extends vc{serialize(e){return wt.raw(new Uint8Array([...new Uint8Array([217,217,247]),...new Uint8Array(super.serializeValue(e))]))}}rn.SelfDescribeCborSerializer=O0;(function(t){function e(i){for(var a in i)t.hasOwnProperty(a)||(t[a]=i[a])}var r=Lr&&Lr.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var f in i)Object.hasOwnProperty.call(i,f)&&(a[f]=i[f]);return a.default=i,a};Object.defineProperty(t,"__esModule",{value:!0}),e(rn);const n=r(Ue);t.value=n})(Gt);class F0{get name(){return"Principal"}get priority(){return 0}match(e){return e&&e._isPrincipal===!0}encode(e){return Gt.value.bytes(e.toUint8Array())}}class $0{get name(){return"Buffer"}get priority(){return 1}match(e){return e instanceof ArrayBuffer||ArrayBuffer.isView(e)}encode(e){return Gt.value.bytes(new Uint8Array(e))}}class M0{get name(){return"BigInt"}get priority(){return 1}match(e){return typeof e=="bigint"}encode(e){return e>BigInt(0)?Gt.value.tagged(2,Gt.value.bytes(yi(e.toString(16)))):Gt.value.tagged(3,Gt.value.bytes(yi((BigInt("-1")*e).toString(16))))}}const ki=Gt.SelfDescribeCborSerializer.withDefaultEncoders(!0);ki.addEncoder(new F0);ki.addEncoder(new $0);ki.addEncoder(new M0);var Is;(function(t){t[t.Uint64LittleEndian=71]="Uint64LittleEndian",t[t.Semantic=55799]="Semantic"})(Is||(Is={}));function is(t){return ki.serialize(t)}function To(t){const e=t.byteLength;let r=BigInt(0);for(let n=0;n<e;n++)r=r*BigInt(256)+BigInt(t[n]);return r}class k0 extends uc.Decoder{createByteString(e){return Ot(...e)}createByteStringFromHeap(e,r){return e===r?new ArrayBuffer(0):new Uint8Array(this._heap.slice(e,r))}}function Ht(t){const e=new Uint8Array(t),r=new k0({size:e.byteLength,tags:{2:n=>To(n),3:n=>-To(n),[Is.Semantic]:n=>n}});try{return r.decodeFirst(e)}catch(n){throw new Error(`Failed to decode CBOR: ${n}, input: ${We(e)}`)}}const jn=()=>{if(typeof window<"u"&&window.crypto&&window.crypto.getRandomValues){const t=new Uint32Array(1);return window.crypto.getRandomValues(t),t[0]}if(typeof crypto<"u"&&crypto.getRandomValues){const t=new Uint32Array(1);return crypto.getRandomValues(t),t[0]}return typeof crypto<"u"&&crypto.randomInt?crypto.randomInt(0,4294967295):Math.floor(Math.random()*4294967295)};var Rs;(function(t){t.Call="call"})(Rs||(Rs={}));function Us(){const t=new ArrayBuffer(16),e=new DataView(t),r=jn(),n=jn(),i=jn(),a=jn();return e.setUint32(0,r),e.setUint32(4,n),e.setUint32(8,i),e.setUint32(12,a),t}const So=BigInt(1e6),P0=60*1e3;class Yn{constructor(e){if(e<90*1e3){const s=BigInt(Date.now()+e)*So/BigInt(1e9);this._value=s*BigInt(1e9);return}const a=BigInt(Math.floor(Date.now()+e-P0))*So/BigInt(1e9)/BigInt(60)*BigInt(60)*BigInt(1e9);this._value=a}toCBOR(){return Gt.value.u64(this._value.toString(16),16)}toHash(){return ke(this._value)}}function No(t=Us){return async e=>{const r=e.request.headers;e.request.headers=r,e.endpoint==="call"&&(e.body.nonce=t())}}function cn(t){const e=[];return t.forEach((r,n)=>{e.push([n,r])}),e}class ss extends Me{constructor(e,r){super(e),this.response=r,this.name=this.constructor.name,Object.setPrototypeOf(this,new.target.prototype)}}class C0 extends Me{constructor(e,r,n,i,a,f){super(e),this.response=r,this.requestId=n,this.senderPubkey=i,this.senderSig=a,this.ingressExpiry=f,this.name="AgentCallError",Object.setPrototypeOf(this,new.target.prototype)}}class q0 extends Me{constructor(e,r,n,i,a,f){super(e),this.response=r,this.requestId=n,this.senderPubkey=i,this.senderSig=a,this.ingressExpiry=f,this.name="AgentQueryError",Object.setPrototypeOf(this,new.target.prototype)}}class V0 extends Me{constructor(e,r,n,i,a,f){super(e),this.response=r,this.requestId=n,this.senderPubkey=i,this.senderSig=a,this.ingressExpiry=f,this.name="AgentReadStateError",Object.setPrototypeOf(this,new.target.prototype)}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Xs=BigInt(0),_i=BigInt(1);function xn(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}function Bc(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?Xs:BigInt("0x"+t)}function Ft(t){return Bc(Jr(t))}function En(t){return it(t),Bc(Jr(Uint8Array.from(t).reverse()))}function Je(t,e){return fa(t.toString(16).padStart(e*2,"0"))}function Pi(t,e){return Je(t,e).reverse()}function ut(t,e,r){let n;if(typeof e=="string")try{n=fa(e)}catch(a){throw new Error(t+" must be hex string or Uint8Array, cause: "+a)}else if(qs(e))n=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const i=n.length;if(typeof r=="number"&&i!==r)throw new Error(t+" of length "+r+" expected, got "+i);return n}const os=t=>typeof t=="bigint"&&Xs<=t;function Tc(t,e,r){return os(t)&&os(e)&&os(r)&&e<=t&&t<r}function un(t,e,r,n){if(!Tc(e,r,n))throw new Error("expected valid "+t+": "+r+" <= n < "+n+", got "+e)}function Zr(t){let e;for(e=0;t>Xs;t>>=_i,e+=1);return e}function G0(t,e){return t>>BigInt(e)&_i}const br=t=>(_i<<BigInt(t))-_i;function H0(t){return typeof t=="function"&&Number.isSafeInteger(t.outputLen)}function Fn(t,e,r={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function n(i,a,f){const s=t[i];if(f&&s===void 0)return;const p=typeof s;if(p!==a||s===null)throw new Error(`param "${i}" is invalid: expected ${a}, got ${p}`)}Object.entries(e).forEach(([i,a])=>n(i,a,!1)),Object.entries(r).forEach(([i,a])=>n(i,a,!0))}const Io=()=>{throw new Error("not implemented")};function An(t){const e=new WeakMap;return(r,...n)=>{const i=e.get(r);if(i!==void 0)return i;const a=t(r,...n);return e.set(r,a),a}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ft=BigInt(0),Qe=BigInt(1),pr=BigInt(2),Sc=BigInt(3),Nc=BigInt(4),Ic=BigInt(5),j0=BigInt(7),Rc=BigInt(8),Y0=BigInt(9),Uc=BigInt(16);function Pe(t,e){const r=t%e;return r>=ft?r:e+r}function At(t,e,r){let n=t;for(;e-- >ft;)n*=n,n%=r;return n}function Ro(t,e){if(t===ft)throw new Error("invert: expected non-zero number");if(e<=ft)throw new Error("invert: expected positive modulus, got "+e);let r=Pe(t,e),n=e,i=ft,a=Qe;for(;r!==ft;){const s=n/r,p=n%r,w=i-a*s;n=r,r=p,i=a,a=w}if(n!==Qe)throw new Error("invert: does not exist");return Pe(i,e)}function Js(t,e,r){if(!t.eql(t.sqr(e),r))throw new Error("Cannot find square root")}function Oc(t,e){const r=(t.ORDER+Qe)/Nc,n=t.pow(e,r);return Js(t,n,e),n}function Z0(t,e){const r=(t.ORDER-Ic)/Rc,n=t.mul(e,pr),i=t.pow(n,r),a=t.mul(e,i),f=t.mul(t.mul(a,pr),i),s=t.mul(a,t.sub(f,t.ONE));return Js(t,s,e),s}function K0(t){const e=sr(t),r=Fc(t),n=r(e,e.neg(e.ONE)),i=r(e,n),a=r(e,e.neg(n)),f=(t+j0)/Uc;return(s,p)=>{let w=s.pow(p,f),S=s.mul(w,n);const v=s.mul(w,i),b=s.mul(w,a),m=s.eql(s.sqr(S),p),g=s.eql(s.sqr(v),p);w=s.cmov(w,S,m),S=s.cmov(b,v,g);const k=s.eql(s.sqr(S),p),q=s.cmov(w,S,k);return Js(s,q,p),q}}function Fc(t){if(t<Sc)throw new Error("sqrt is not defined for small field");let e=t-Qe,r=0;for(;e%pr===ft;)e/=pr,r++;let n=pr;const i=sr(t);for(;xi(i,n)===1;)if(n++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(r===1)return Oc;let a=i.pow(n,e);const f=(e+Qe)/pr;return function(p,w){if(p.is0(w))return w;if(xi(p,w)!==1)throw new Error("Cannot find square root");let S=r,v=p.mul(p.ONE,a),b=p.pow(w,e),m=p.pow(w,f);for(;!p.eql(b,p.ONE);){if(p.is0(b))return p.ZERO;let g=1,k=p.sqr(b);for(;!p.eql(k,p.ONE);)if(g++,k=p.sqr(k),g===S)throw new Error("Cannot find square root");const q=Qe<<BigInt(S-g-1),X=p.pow(v,q);S=g,v=p.sqr(X),b=p.mul(b,v),m=p.mul(m,X)}return m}}function W0(t){return t%Nc===Sc?Oc:t%Rc===Ic?Z0:t%Uc===Y0?K0(t):Fc(t)}const z0=(t,e)=>(Pe(t,e)&Qe)===Qe,L0=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function $c(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},r=L0.reduce((n,i)=>(n[i]="function",n),e);return Fn(t,r),t}function Qn(t,e,r){if(r<ft)throw new Error("invalid exponent, negatives unsupported");if(r===ft)return t.ONE;if(r===Qe)return e;let n=t.ONE,i=e;for(;r>ft;)r&Qe&&(n=t.mul(n,i)),i=t.sqr(i),r>>=Qe;return n}function _r(t,e,r=!1){const n=new Array(e.length).fill(r?t.ZERO:void 0),i=e.reduce((f,s,p)=>t.is0(s)?f:(n[p]=f,t.mul(f,s)),t.ONE),a=t.inv(i);return e.reduceRight((f,s,p)=>t.is0(s)?f:(n[p]=t.mul(f,n[p]),t.mul(f,s)),a),n}function xi(t,e){const r=(t.ORDER-Qe)/pr,n=t.pow(e,r),i=t.eql(n,t.ONE),a=t.eql(n,t.ZERO),f=t.eql(n,t.neg(t.ONE));if(!i&&!a&&!f)throw new Error("invalid Legendre symbol result");return i?1:a?0:-1}function X0(t,e){e!==void 0&&ef(e);const r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function sr(t,e,r=!1,n={}){if(t<=ft)throw new Error("invalid field: expected ORDER > 0, got "+t);let i,a,f=!1,s;if(typeof e=="object"&&e!=null){if(n.sqrt||r)throw new Error("cannot specify opts in two arguments");const b=e;b.BITS&&(i=b.BITS),b.sqrt&&(a=b.sqrt),typeof b.isLE=="boolean"&&(r=b.isLE),typeof b.modOnDecode=="boolean"&&(f=b.modOnDecode),s=b.allowedLengths}else typeof e=="number"&&(i=e),n.sqrt&&(a=n.sqrt);const{nBitLength:p,nByteLength:w}=X0(t,i);if(w>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let S;const v=Object.freeze({ORDER:t,isLE:r,BITS:p,BYTES:w,MASK:br(p),ZERO:ft,ONE:Qe,allowedLengths:s,create:b=>Pe(b,t),isValid:b=>{if(typeof b!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof b);return ft<=b&&b<t},is0:b=>b===ft,isValidNot0:b=>!v.is0(b)&&v.isValid(b),isOdd:b=>(b&Qe)===Qe,neg:b=>Pe(-b,t),eql:(b,m)=>b===m,sqr:b=>Pe(b*b,t),add:(b,m)=>Pe(b+m,t),sub:(b,m)=>Pe(b-m,t),mul:(b,m)=>Pe(b*m,t),pow:(b,m)=>Qn(v,b,m),div:(b,m)=>Pe(b*Ro(m,t),t),sqrN:b=>b*b,addN:(b,m)=>b+m,subN:(b,m)=>b-m,mulN:(b,m)=>b*m,inv:b=>Ro(b,t),sqrt:a||(b=>(S||(S=W0(t)),S(v,b))),toBytes:b=>r?Pi(b,w):Je(b,w),fromBytes:(b,m=!0)=>{if(s){if(!s.includes(b.length)||b.length>w)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+b.length);const k=new Uint8Array(w);k.set(b,r?0:k.length-b.length),b=k}if(b.length!==w)throw new Error("Field.fromBytes: expected "+w+" bytes, got "+b.length);let g=r?En(b):Ft(b);if(f&&(g=Pe(g,t)),!m&&!v.isValid(g))throw new Error("invalid field element: outside of range 0..ORDER");return g},invertBatch:b=>_r(v,b),cmov:(b,m,g)=>g?m:b});return Object.freeze(v)}function Mc(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function kc(t){const e=Mc(t);return e+Math.ceil(e/2)}function J0(t,e,r=!1){const n=t.length,i=Mc(e),a=kc(e);if(n<16||n<a||n>1024)throw new Error("expected "+a+"-1024 bytes of input, got "+n);const f=r?En(t):Ft(t),s=Pe(f,e-Qe)+Qe;return r?Pi(s,i):Je(s,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Dr=BigInt(0),yr=BigInt(1);function Ei(t,e){const r=e.negate();return t?r:e}function jt(t,e){const r=_r(t.Fp,e.map(n=>n.Z));return e.map((n,i)=>t.fromAffine(n.toAffine(r[i])))}function Pc(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function as(t,e){Pc(t,e);const r=Math.ceil(e/t)+1,n=2**(t-1),i=2**t,a=br(t),f=BigInt(t);return{windows:r,windowSize:n,mask:a,maxNumber:i,shiftBy:f}}function Uo(t,e,r){const{windowSize:n,mask:i,maxNumber:a,shiftBy:f}=r;let s=Number(t&i),p=t>>f;s>n&&(s-=a,p+=yr);const w=e*n,S=w+Math.abs(s)-1,v=s===0,b=s<0,m=e%2!==0;return{nextN:p,offset:S,isZero:v,isNeg:b,isNegF:m,offsetF:w}}function Q0(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((r,n)=>{if(!(r instanceof e))throw new Error("invalid point at index "+n)})}function D0(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((r,n)=>{if(!e.isValid(r))throw new Error("invalid scalar at index "+n)})}const cs=new WeakMap,Cc=new WeakMap;function us(t){return Cc.get(t)||1}function Oo(t){if(t!==Dr)throw new Error("invalid wNAF")}class qc{constructor(e,r){this.BASE=e.BASE,this.ZERO=e.ZERO,this.Fn=e.Fn,this.bits=r}_unsafeLadder(e,r,n=this.ZERO){let i=e;for(;r>Dr;)r&yr&&(n=n.add(i)),i=i.double(),r>>=yr;return n}precomputeWindow(e,r){const{windows:n,windowSize:i}=as(r,this.bits),a=[];let f=e,s=f;for(let p=0;p<n;p++){s=f,a.push(s);for(let w=1;w<i;w++)s=s.add(f),a.push(s);f=s.double()}return a}wNAF(e,r,n){if(!this.Fn.isValid(n))throw new Error("invalid scalar");let i=this.ZERO,a=this.BASE;const f=as(e,this.bits);for(let s=0;s<f.windows;s++){const{nextN:p,offset:w,isZero:S,isNeg:v,isNegF:b,offsetF:m}=Uo(n,s,f);n=p,S?a=a.add(Ei(b,r[m])):i=i.add(Ei(v,r[w]))}return Oo(n),{p:i,f:a}}wNAFUnsafe(e,r,n,i=this.ZERO){const a=as(e,this.bits);for(let f=0;f<a.windows&&n!==Dr;f++){const{nextN:s,offset:p,isZero:w,isNeg:S}=Uo(n,f,a);if(n=s,!w){const v=r[p];i=i.add(S?v.negate():v)}}return Oo(n),i}getPrecomputes(e,r,n){let i=cs.get(r);return i||(i=this.precomputeWindow(r,e),e!==1&&(typeof n=="function"&&(i=n(i)),cs.set(r,i))),i}cached(e,r,n){const i=us(e);return this.wNAF(i,this.getPrecomputes(i,e,n),r)}unsafe(e,r,n,i){const a=us(e);return a===1?this._unsafeLadder(e,r,i):this.wNAFUnsafe(a,this.getPrecomputes(a,e,n),r,i)}createCache(e,r){Pc(r,this.bits),Cc.set(e,r),cs.delete(e)}hasCache(e){return us(e)!==1}}function el(t,e,r,n){let i=e,a=t.ZERO,f=t.ZERO;for(;r>Dr||n>Dr;)r&yr&&(a=a.add(i)),n&yr&&(f=f.add(i)),i=i.double(),r>>=yr,n>>=yr;return{p1:a,p2:f}}function Vc(t,e,r,n){Q0(r,t),D0(n,e);const i=r.length,a=n.length;if(i!==a)throw new Error("arrays of points and scalars must have equal length");const f=t.ZERO,s=Zr(BigInt(i));let p=1;s>12?p=s-3:s>4?p=s-2:s>0&&(p=2);const w=br(p),S=new Array(Number(w)+1).fill(f),v=Math.floor((e.BITS-1)/p)*p;let b=f;for(let m=v;m>=0;m-=p){S.fill(f);for(let k=0;k<a;k++){const q=n[k],X=Number(q>>BigInt(m)&w);S[X]=S[X].add(r[k])}let g=f;for(let k=S.length-1,q=f;k>0;k--)q=q.add(S[k]),g=g.add(q);if(b=b.add(g),m!==0)for(let k=0;k<p;k++)b=b.double()}return b}function Fo(t,e){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return $c(e),e}else return sr(t)}function Gc(t,e,r={}){if(!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const s of["p","n","h"]){const p=e[s];if(!(typeof p=="bigint"&&p>Dr))throw new Error(`CURVE.${s} must be positive bigint`)}const n=Fo(e.p,r.Fp),i=Fo(e.n,r.Fn),f=["Gx","Gy","a",t==="weierstrass"?"b":"d"];for(const s of f)if(!n.isValid(e[s]))throw new Error(`CURVE.${s} must be valid field element of CURVE.Fp`);return{Fp:n,Fn:i}}const tl=Ft;function er(t,e){if(vn(t),vn(e),t<0||t>=1<<8*e)throw new Error("invalid I2OSP input: "+t);const r=Array.from({length:e}).fill(0);for(let n=e-1;n>=0;n--)r[n]=t&255,t>>>=8;return new Uint8Array(r)}function rl(t,e){const r=new Uint8Array(t.length);for(let n=0;n<t.length;n++)r[n]=t[n]^e[n];return r}function vn(t){if(!Number.isSafeInteger(t))throw new Error("number expected")}function Hc(t){if(!qs(t)&&typeof t!="string")throw new Error("DST must be Uint8Array or string");return typeof t=="string"?In(t):t}function nl(t,e,r,n){it(t),vn(r),e=Hc(e),e.length>255&&(e=n(Ce(In("H2C-OVERSIZE-DST-"),e)));const{outputLen:i,blockLen:a}=n,f=Math.ceil(r/i);if(r>65535||f>255)throw new Error("expand_message_xmd: invalid lenInBytes");const s=Ce(e,er(e.length,1)),p=er(0,a),w=er(r,2),S=new Array(f),v=n(Ce(p,t,w,er(0,1),s));S[0]=n(Ce(v,er(1,1),s));for(let m=1;m<=f;m++){const g=[rl(v,S[m-1]),er(m+1,1),s];S[m]=n(Ce(...g))}return Ce(...S).slice(0,r)}function il(t,e,r,n,i){if(it(t),vn(r),e=Hc(e),e.length>255){const a=Math.ceil(2*n/8);e=i.create({dkLen:a}).update(In("H2C-OVERSIZE-DST-")).update(e).digest()}if(r>65535||e.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return i.create({dkLen:r}).update(t).update(er(r,2)).update(e).update(er(e.length,1)).digest()}function fs(t,e,r){Fn(r,{p:"bigint",m:"number",k:"number",hash:"function"});const{p:n,k:i,m:a,hash:f,expand:s,DST:p}=r;if(!H0(r.hash))throw new Error("expected valid hash");it(t),vn(e);const w=n.toString(2).length,S=Math.ceil((w+i)/8),v=e*a*S;let b;if(s==="xmd")b=nl(t,p,v,f);else if(s==="xof")b=il(t,p,v,i,f);else if(s==="_internal_pass")b=t;else throw new Error('expand must be "xmd" or "xof"');const m=new Array(e);for(let g=0;g<e;g++){const k=new Array(a);for(let q=0;q<a;q++){const X=S*(q+g*a),K=b.subarray(X,X+S);k[q]=Pe(tl(K),n)}m[g]=k}return m}function jc(t,e){const r=e.map(n=>Array.from(n).reverse());return(n,i)=>{const[a,f,s,p]=r.map(v=>v.reduce((b,m)=>t.add(t.mul(b,n),m))),[w,S]=_r(t,[f,p],!0);return n=t.mul(a,w),i=t.mul(i,t.mul(s,S)),{x:n,y:i}}}const sl=In("HashToScalar-");function $o(t,e,r){if(typeof e!="function")throw new Error("mapToCurve() must be defined");function n(a){return t.fromAffine(e(a))}function i(a){const f=a.clearCofactor();return f.equals(t.ZERO)?t.ZERO:(f.assertValidity(),f)}return{defaults:r,hashToCurve(a,f){const s=Object.assign({},r,f),p=fs(a,2,s),w=n(p[0]),S=n(p[1]);return i(w.add(S))},encodeToCurve(a,f){const s=r.encodeDST?{DST:r.encodeDST}:{},p=Object.assign({},r,s,f),w=fs(a,1,p),S=n(w[0]);return i(S)},mapToCurve(a){if(!Array.isArray(a))throw new Error("expected array of bigints");for(const f of a)if(typeof f!="bigint")throw new Error("expected array of bigints");return i(n(a))},hashToScalar(a,f){const s=t.Fn.ORDER,p=Object.assign({},r,{p:s,m:1,DST:sl},f);return fs(a,1,p)[0][0]}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Mo=(t,e)=>(t+(t>=0?e:-e)/kt)/e;function ol(t,e,r){const[[n,i],[a,f]]=e,s=Mo(f*t,r),p=Mo(-i*t,r);let w=t-s*n-p*a,S=-s*i-p*f;const v=w<gr,b=S<gr;v&&(w=-w),b&&(S=-S);const m=br(Math.ceil(Zr(r)/2))+ct;if(w<gr||w>=m||S<gr||S>=m)throw new Error("splitScalar (endomorphism): failed, k="+t);return{k1neg:v,k1:w,k2neg:b,k2:S}}const gr=BigInt(0),ct=BigInt(1),kt=BigInt(2),Vr=BigInt(3),Os=BigInt(4);function Yc(t,e,r){function n(i){const a=t.sqr(i),f=t.mul(a,i);return t.add(t.add(f,t.mul(i,e)),r)}return n}function Ai(t,e){const{BYTES:r}=t;let n;if(typeof e=="bigint")n=e;else{let i=ut("private key",e);try{n=t.fromBytes(i)}catch{throw new Error(`invalid private key: expected ui8a of size ${r}, got ${typeof e}`)}}if(!t.isValidNot0(n))throw new Error("invalid private key: out of range [1..N-1]");return n}function al(t,e={}){const{Fp:r,Fn:n}=Gc("weierstrass",t,e),{h:i,n:a}=t;Fn(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:f}=e;if(f&&(!r.is0(t.a)||typeof f.beta!="bigint"||!Array.isArray(f.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');function s(){if(!r.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function p(re,U,H){const{x:J,y:x}=U.toAffine(),N=r.toBytes(J);if(xn("isCompressed",H),H){s();const $=!r.isOdd(x);return Ce(cl($),N)}else return Ce(Uint8Array.of(4),N,r.toBytes(x))}function w(re){it(re);const U=r.BYTES,H=U+1,J=2*U+1,x=re.length,N=re[0],$=re.subarray(1);if(x===H&&(N===2||N===3)){const L=r.fromBytes($);if(!r.isValid(L))throw new Error("bad point: is not on curve, wrong x");const ee=b(L);let Q;try{Q=r.sqrt(ee)}catch(oe){const ie=oe instanceof Error?": "+oe.message:"";throw new Error("bad point: is not on curve, sqrt error"+ie)}s();const ne=r.isOdd(Q);return(N&1)===1!==ne&&(Q=r.neg(Q)),{x:L,y:Q}}else if(x===J&&N===4){const L=r.fromBytes($.subarray(U*0,U*1)),ee=r.fromBytes($.subarray(U*1,U*2));if(!m(L,ee))throw new Error("bad point: is not on curve");return{x:L,y:ee}}else throw new Error(`bad point: got length ${x}, expected compressed=${H} or uncompressed=${J}`)}const S=e.toBytes||p,v=e.fromBytes||w,b=Yc(r,t.a,t.b);function m(re,U){const H=r.sqr(U),J=b(re);return r.eql(H,J)}if(!m(t.Gx,t.Gy))throw new Error("bad curve params: generator point");const g=r.mul(r.pow(t.a,Vr),Os),k=r.mul(r.sqr(t.b),BigInt(27));if(r.is0(r.add(g,k)))throw new Error("bad curve params: a or b");function q(re,U,H=!1){if(!r.isValid(U)||H&&r.is0(U))throw new Error(`bad point coordinate ${re}`);return U}function X(re){if(!(re instanceof C))throw new Error("ProjectivePoint expected")}function K(re){if(!f||!f.basises)throw new Error("no endo");return ol(re,f.basises,n.ORDER)}const j=An((re,U)=>{const{X:H,Y:J,Z:x}=re;if(r.eql(x,r.ONE))return{x:H,y:J};const N=re.is0();U==null&&(U=N?r.ONE:r.inv(x));const $=r.mul(H,U),L=r.mul(J,U),ee=r.mul(x,U);if(N)return{x:r.ZERO,y:r.ZERO};if(!r.eql(ee,r.ONE))throw new Error("invZ was invalid");return{x:$,y:L}}),D=An(re=>{if(re.is0()){if(e.allowInfinityPoint&&!r.is0(re.Y))return;throw new Error("bad point: ZERO")}const{x:U,y:H}=re.toAffine();if(!r.isValid(U)||!r.isValid(H))throw new Error("bad point: x or y not field elements");if(!m(U,H))throw new Error("bad point: equation left != right");if(!re.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function R(re,U,H,J,x){return H=new C(r.mul(H.X,re),H.Y,H.Z),U=Ei(J,U),H=Ei(x,H),U.add(H)}class C{constructor(U,H,J){this.X=q("x",U),this.Y=q("y",H,!0),this.Z=q("z",J),Object.freeze(this)}static fromAffine(U){const{x:H,y:J}=U||{};if(!U||!r.isValid(H)||!r.isValid(J))throw new Error("invalid affine point");if(U instanceof C)throw new Error("projective point not allowed");return r.is0(H)&&r.is0(J)?C.ZERO:new C(H,J,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}static normalizeZ(U){return jt(C,U)}static fromBytes(U){return it(U),C.fromHex(U)}static fromHex(U){const H=C.fromAffine(v(ut("pointHex",U)));return H.assertValidity(),H}static fromPrivateKey(U){return C.BASE.multiply(Ai(n,U))}static msm(U,H){return Vc(C,n,U,H)}_setWindowSize(U){this.precompute(U)}precompute(U=8,H=!0){return te.createCache(this,U),H||this.multiply(Vr),this}assertValidity(){D(this)}hasEvenY(){const{y:U}=this.toAffine();if(!r.isOdd)throw new Error("Field doesn't support isOdd");return!r.isOdd(U)}equals(U){X(U);const{X:H,Y:J,Z:x}=this,{X:N,Y:$,Z:L}=U,ee=r.eql(r.mul(H,L),r.mul(N,x)),Q=r.eql(r.mul(J,L),r.mul($,x));return ee&&Q}negate(){return new C(this.X,r.neg(this.Y),this.Z)}double(){const{a:U,b:H}=t,J=r.mul(H,Vr),{X:x,Y:N,Z:$}=this;let L=r.ZERO,ee=r.ZERO,Q=r.ZERO,ne=r.mul(x,x),he=r.mul(N,N),oe=r.mul($,$),ie=r.mul(x,N);return ie=r.add(ie,ie),Q=r.mul(x,$),Q=r.add(Q,Q),L=r.mul(U,Q),ee=r.mul(J,oe),ee=r.add(L,ee),L=r.sub(he,ee),ee=r.add(he,ee),ee=r.mul(L,ee),L=r.mul(ie,L),Q=r.mul(J,Q),oe=r.mul(U,oe),ie=r.sub(ne,oe),ie=r.mul(U,ie),ie=r.add(ie,Q),Q=r.add(ne,ne),ne=r.add(Q,ne),ne=r.add(ne,oe),ne=r.mul(ne,ie),ee=r.add(ee,ne),oe=r.mul(N,$),oe=r.add(oe,oe),ne=r.mul(oe,ie),L=r.sub(L,ne),Q=r.mul(oe,he),Q=r.add(Q,Q),Q=r.add(Q,Q),new C(L,ee,Q)}add(U){X(U);const{X:H,Y:J,Z:x}=this,{X:N,Y:$,Z:L}=U;let ee=r.ZERO,Q=r.ZERO,ne=r.ZERO;const he=t.a,oe=r.mul(t.b,Vr);let ie=r.mul(H,N),Se=r.mul(J,$),A=r.mul(x,L),Fe=r.add(H,J),Be=r.add(N,$);Fe=r.mul(Fe,Be),Be=r.add(ie,Se),Fe=r.sub(Fe,Be),Be=r.add(H,x);let $e=r.add(N,L);return Be=r.mul(Be,$e),$e=r.add(ie,A),Be=r.sub(Be,$e),$e=r.add(J,x),ee=r.add($,L),$e=r.mul($e,ee),ee=r.add(Se,A),$e=r.sub($e,ee),ne=r.mul(he,Be),ee=r.mul(oe,A),ne=r.add(ee,ne),ee=r.sub(Se,ne),ne=r.add(Se,ne),Q=r.mul(ee,ne),Se=r.add(ie,ie),Se=r.add(Se,ie),A=r.mul(he,A),Be=r.mul(oe,Be),Se=r.add(Se,A),A=r.sub(ie,A),A=r.mul(he,A),Be=r.add(Be,A),ie=r.mul(Se,Be),Q=r.add(Q,ie),ie=r.mul($e,Be),ee=r.mul(Fe,ee),ee=r.sub(ee,ie),ie=r.mul(Fe,Se),ne=r.mul($e,ne),ne=r.add(ne,ie),new C(ee,Q,ne)}subtract(U){return this.add(U.negate())}is0(){return this.equals(C.ZERO)}multiply(U){const{endo:H}=e;if(!n.isValidNot0(U))throw new Error("invalid scalar: out of range");let J,x;const N=$=>te.cached(this,$,L=>jt(C,L));if(H){const{k1neg:$,k1:L,k2neg:ee,k2:Q}=K(U),{p:ne,f:he}=N(L),{p:oe,f:ie}=N(Q);x=he.add(ie),J=R(H.beta,ne,oe,$,ee)}else{const{p:$,f:L}=N(U);J=$,x=L}return jt(C,[J,x])[0]}multiplyUnsafe(U){const{endo:H}=e,J=this;if(!n.isValid(U))throw new Error("invalid scalar: out of range");if(U===gr||J.is0())return C.ZERO;if(U===ct)return J;if(te.hasCache(this))return this.multiply(U);if(H){const{k1neg:x,k1:N,k2neg:$,k2:L}=K(U),{p1:ee,p2:Q}=el(C,J,N,L);return R(H.beta,ee,Q,x,$)}else return te.unsafe(J,U)}multiplyAndAddUnsafe(U,H,J){const x=this.multiplyUnsafe(H).add(U.multiplyUnsafe(J));return x.is0()?void 0:x}toAffine(U){return j(this,U)}isTorsionFree(){const{isTorsionFree:U}=e;return i===ct?!0:U?U(C,this):te.unsafe(this,a).is0()}clearCofactor(){const{clearCofactor:U}=e;return i===ct?this:U?U(C,this):this.multiplyUnsafe(i)}isSmallOrder(){return this.multiplyUnsafe(i).is0()}toBytes(U=!0){return xn("isCompressed",U),this.assertValidity(),S(C,this,U)}toRawBytes(U=!0){return this.toBytes(U)}toHex(U=!0){return Jr(this.toBytes(U))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}C.BASE=new C(t.Gx,t.Gy,r.ONE),C.ZERO=new C(r.ZERO,r.ONE,r.ZERO),C.Fp=r,C.Fn=n;const z=n.BITS,te=new qc(C,e.endo?Math.ceil(z/2):z);return C}function ko(t){const{CURVE:e,curveOpts:r}=fl(t),n=al(e,r);return ll(t,n)}function cl(t){return Uint8Array.of(t?2:3)}function ul(t,e){const r=t.ORDER;let n=gr;for(let g=r-ct;g%kt===gr;g/=kt)n+=ct;const i=n,a=kt<<i-ct-ct,f=a*kt,s=(r-ct)/f,p=(s-ct)/kt,w=f-ct,S=a,v=t.pow(e,s),b=t.pow(e,(s+ct)/kt);let m=(g,k)=>{let q=v,X=t.pow(k,w),K=t.sqr(X);K=t.mul(K,k);let j=t.mul(g,K);j=t.pow(j,p),j=t.mul(j,X),X=t.mul(j,k),K=t.mul(j,g);let D=t.mul(K,X);j=t.pow(D,S);let R=t.eql(j,t.ONE);X=t.mul(K,b),j=t.mul(D,q),K=t.cmov(X,K,R),D=t.cmov(j,D,R);for(let C=i;C>ct;C--){let z=C-kt;z=kt<<z-ct;let te=t.pow(D,z);const re=t.eql(te,t.ONE);X=t.mul(K,q),q=t.mul(q,q),te=t.mul(D,q),K=t.cmov(X,K,re),D=t.cmov(te,D,re)}return{isValid:R,value:K}};if(t.ORDER%Os===Vr){const g=(t.ORDER-Vr)/Os,k=t.sqrt(t.neg(e));m=(q,X)=>{let K=t.sqr(X);const j=t.mul(q,X);K=t.mul(K,j);let D=t.pow(K,g);D=t.mul(D,j);const R=t.mul(D,k),C=t.mul(t.sqr(D),X),z=t.eql(C,q);let te=t.cmov(R,D,z);return{isValid:z,value:te}}}return m}function Zc(t,e){$c(t);const{A:r,B:n,Z:i}=e;if(!t.isValid(r)||!t.isValid(n)||!t.isValid(i))throw new Error("mapToCurveSimpleSWU: invalid opts");const a=ul(t,i);if(!t.isOdd)throw new Error("Field does not have .isOdd()");return f=>{let s,p,w,S,v,b,m,g;s=t.sqr(f),s=t.mul(s,i),p=t.sqr(s),p=t.add(p,s),w=t.add(p,t.ONE),w=t.mul(w,n),S=t.cmov(i,t.neg(p),!t.eql(p,t.ZERO)),S=t.mul(S,r),p=t.sqr(w),b=t.sqr(S),v=t.mul(b,r),p=t.add(p,v),p=t.mul(p,w),b=t.mul(b,S),v=t.mul(b,n),p=t.add(p,v),m=t.mul(s,w);const{isValid:k,value:q}=a(p,b);g=t.mul(s,f),g=t.mul(g,q),m=t.cmov(m,w,k),g=t.cmov(g,q,k);const X=t.isOdd(f)===t.isOdd(g);g=t.cmov(t.neg(g),g,X);const K=_r(t,[S],!0)[0];return m=t.mul(m,K),{x:m,y:g}}}function fl(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},r=t.Fp;let n=t.allowedPrivateKeyLengths?Array.from(new Set(t.allowedPrivateKeyLengths.map(f=>Math.ceil(f/2)))):void 0;const i=sr(e.n,{BITS:t.nBitLength,allowedLengths:n,modOnDecode:t.wrapPrivateKey}),a={Fp:r,Fn:i,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:e,curveOpts:a}}function ll(t,e){const{Fp:r,Fn:n}=e;function i(f){return Tc(f,ct,n.ORDER)}const a=Yc(r,t.a,t.b);return Object.assign({},{CURVE:t,Point:e,ProjectivePoint:e,normPrivateKeyToScalar:f=>Ai(n,f),weierstrassEquation:a,isWithinCurveOrder:i})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const hl=BigInt(0),Zn=BigInt(1),Po=BigInt(2),Gr=BigInt(3);function dl(t){const e=[];for(;t>Zn;t>>=Zn)(t&Zn)===hl?e.unshift(0):(t&Gr)===Gr?(e.unshift(-1),t+=Zn):e.unshift(1);return e}function ls(t){if(!Array.isArray(t)||t.length===0)throw new Error("expected non-empty array")}function pl(t,e,r,n){const{Fp2:i,Fp12:a}=t,{twistType:f,ateLoopSize:s,xNegative:p,postPrecompute:w}=n;let S;if(f==="multiplicative")S=(j,D,R,C,z,te)=>a.mul014(C,j,i.mul(D,z),i.mul(R,te));else if(f==="divisive")S=(j,D,R,C,z,te)=>a.mul034(C,i.mul(R,te),i.mul(D,z),j);else throw new Error("bls: unknown twist type");const v=i.div(i.ONE,i.mul(i.ONE,Po));function b(j,D,R,C){const z=i.sqr(R),te=i.sqr(C),re=i.mulByB(i.mul(te,Gr)),U=i.mul(re,Gr),H=i.sub(i.sub(i.sqr(i.add(R,C)),te),z),J=i.sub(re,z),x=i.mul(i.sqr(D),Gr),N=i.neg(H);return j.push([J,x,N]),D=i.mul(i.mul(i.mul(i.sub(z,U),D),R),v),R=i.sub(i.sqr(i.mul(i.add(z,U),v)),i.mul(i.sqr(re),Gr)),C=i.mul(z,H),{Rx:D,Ry:R,Rz:C}}function m(j,D,R,C,z,te){const re=i.sub(R,i.mul(te,C)),U=i.sub(D,i.mul(z,C)),H=i.sub(i.mul(re,z),i.mul(U,te)),J=i.neg(re),x=U;j.push([H,J,x]);const N=i.sqr(U),$=i.mul(N,U),L=i.mul(N,D),ee=i.add(i.sub($,i.mul(L,Po)),i.mul(i.sqr(re),C));return D=i.mul(U,ee),R=i.sub(i.mul(i.sub(L,ee),re),i.mul($,R)),C=i.mul(C,$),{Rx:D,Ry:R,Rz:C}}const g=dl(s),k=An(j=>{const D=j,{x:R,y:C}=D.toAffine(),z=R,te=C,re=i.neg(C);let U=z,H=te,J=i.ONE;const x=[];for(const N of g){const $=[];({Rx:U,Ry:H,Rz:J}=b($,U,H,J)),N&&({Rx:U,Ry:H,Rz:J}=m($,U,H,J,z,N===-1?re:te)),x.push($)}if(w){const N=x[x.length-1];w(U,H,J,z,te,m.bind(null,N))}return x});function q(j,D=!1){let R=a.ONE;if(j.length){const C=j[0][0].length;for(let z=0;z<C;z++){R=a.sqr(R);for(const[te,re,U]of j)for(const[H,J,x]of te[z])R=S(H,J,x,R,re,U)}}return p&&(R=a.conjugate(R)),D?a.finalExponentiate(R):R}function X(j,D=!0){const R=[];jt(e,j.map(({g1:C})=>C)),jt(r,j.map(({g2:C})=>C));for(const{g1:C,g2:z}of j){if(C.is0()||z.is0())throw new Error("pairing is not available for ZERO point");C.assertValidity(),z.assertValidity();const te=C.toAffine();R.push([k(z),te.x,te.y])}return q(R,D)}function K(j,D,R=!0){return X([{g1:j,g2:D}],R)}return{Fp12:a,millerLoopBatch:q,pairing:K,pairingBatch:X,calcPairingPrecomputes:k}}function Co(t,e,r,n,i){const{Fp12:a,pairingBatch:f}=t;function s(v){return v instanceof e.Point?v:e.Point.fromHex(v)}function p(v){return v instanceof r.Point?v:r.Point.fromHex(v)}function w(v){if(!(v instanceof r.Point))throw new Error(`expected valid message hashed to ${i?"G1":"G2"} curve`);return v}const S=i?(v,b)=>({g1:b,g2:v}):(v,b)=>({g1:v,g2:b});return{getPublicKey(v){const b=Ai(e.Point.Fn,v);return e.Point.BASE.multiply(b)},sign(v,b,m){if(m!=null)throw new Error("sign() expects 2 arguments");const g=Ai(e.Point.Fn,b);return w(v).assertValidity(),v.multiply(g)},verify(v,b,m,g){if(g!=null)throw new Error("verify() expects 3 arguments");v=p(v),m=s(m);const k=m.negate(),q=e.Point.BASE,X=w(b),K=v,j=f([S(k,X),S(q,K)]);return a.eql(j,a.ONE)},verifyBatch(v,b,m){if(ls(b),m.length!==b.length)throw new Error("amount of public keys and messages should be equal");const g=p(v),k=b,q=m.map(s),X=new Map;for(let D=0;D<q.length;D++){const R=q[D],C=k[D];let z=X.get(C);z===void 0&&(z=[],X.set(C,z)),z.push(R)}const K=[],j=e.Point.BASE;try{for(const[D,R]of X){const C=R.reduce((z,te)=>z.add(te));K.push(S(C,D))}return K.push(S(j.negate(),g)),a.eql(f(K),a.ONE)}catch{return!1}},aggregatePublicKeys(v){ls(v),v=v.map(m=>s(m));const b=v.reduce((m,g)=>m.add(g),e.Point.ZERO);return b.assertValidity(),b},aggregateSignatures(v){ls(v),v=v.map(m=>p(m));const b=v.reduce((m,g)=>m.add(g),r.Point.ZERO);return b.assertValidity(),b},hash(v,b){it(v);const m=b?{DST:b}:void 0;return r.hashToCurve(v,m)},Signature:n}}function yl(t){const{Fp:e,Fr:r,Fp2:n,Fp6:i,Fp12:a}=t.fields,f=ko(t.G1),s=Object.assign(f,$o(f.Point,t.G1.mapToCurve,{...t.htfDefaults,...t.G1.htfDefaults})),p=ko(t.G2),w=Object.assign(p,$o(p.Point,t.G2.mapToCurve,{...t.htfDefaults,...t.G2.htfDefaults})),S=pl(t.fields,s.Point,w.Point,{...t.params,postPrecompute:t.postPrecompute}),{millerLoopBatch:v,pairing:b,pairingBatch:m,calcPairingPrecomputes:g}=S,k=Co(S,s,w,t.G2.Signature,!1),q=Co(S,w,s,t.G1.ShortSignature,!0),X=t.randomBytes||ha,K=()=>{const Q=kc(r.ORDER);return J0(X(Q),r.ORDER)},j={randomSecretKey:K,randomPrivateKey:K,calcPairingPrecomputes:g},{ShortSignature:D}=t.G1,{Signature:R}=t.G2;function C(Q,ne){return Q instanceof s.Point?Q:q.hash(ut("point",Q),ne==null?void 0:ne.DST)}function z(Q,ne){return Q instanceof w.Point?Q:k.hash(ut("point",Q),ne==null?void 0:ne.DST)}function te(Q){return k.getPublicKey(Q).toBytes(!0)}function re(Q){return q.getPublicKey(Q).toBytes(!0)}function U(Q,ne,he){const oe=z(Q,he),ie=k.sign(oe,ne);return Q instanceof w.Point?ie:R.toBytes(ie)}function H(Q,ne,he){const oe=C(Q,he),ie=q.sign(oe,ne);return Q instanceof s.Point?ie:D.toBytes(ie)}function J(Q,ne,he,oe){const ie=z(ne,oe);return k.verify(Q,ie,he)}function x(Q,ne,he,oe){const ie=C(ne,oe);return q.verify(Q,ie,he)}function N(Q){const ne=k.aggregatePublicKeys(Q);return Q[0]instanceof s.Point?ne:ne.toBytes(!0)}function $(Q){const ne=k.aggregateSignatures(Q);return Q[0]instanceof w.Point?ne:R.toBytes(ne)}function L(Q){const ne=q.aggregateSignatures(Q);return Q[0]instanceof s.Point?ne:D.toBytes(ne)}function ee(Q,ne,he,oe){const ie=ne.map(Se=>z(Se,oe));return k.verifyBatch(Q,ie,he)}return s.Point.BASE.precompute(4),{longSignatures:k,shortSignatures:q,millerLoopBatch:v,pairing:b,pairingBatch:m,verifyBatch:ee,fields:{Fr:r,Fp:e,Fp2:n,Fp6:i,Fp12:a},params:{ateLoopSize:t.params.ateLoopSize,twistType:t.params.twistType,r:t.params.r,G1b:t.G1.b,G2b:t.G2.b},utils:j,getPublicKey:te,getPublicKeyForShortSignatures:re,sign:U,signShortSignature:H,verify:J,verifyShortSignature:x,aggregatePublicKeys:N,aggregateSignatures:$,aggregateShortSignatures:L,G1:s,G2:w,Signature:R,ShortSignature:D}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const qo=BigInt(0),Hr=BigInt(1),qt=BigInt(2),Vo=BigInt(3);function hs(t,e,r,n,i=1,a){const f=BigInt(a===void 0?n:a),s=r**BigInt(n),p=[];for(let w=0;w<i;w++){const S=BigInt(w+1),v=[];for(let b=0,m=Hr;b<n;b++){const g=(S*m-S)/f%s;v.push(t.pow(e,g)),m*=r}p.push(v)}return p}function gl(t,e,r){const n=e.pow(r,(t.ORDER-Hr)/Vo),i=e.pow(r,(t.ORDER-Hr)/qt);function a(b,m){const g=e.mul(e.frobeniusMap(b,1),n),k=e.mul(e.frobeniusMap(m,1),i);return[g,k]}const f=e.pow(r,(t.ORDER**qt-Hr)/Vo),s=e.pow(r,(t.ORDER**qt-Hr)/qt);if(!e.eql(s,e.neg(e.ONE)))throw new Error("psiFrobenius: PSI2_Y!==-1");function p(b,m){return[e.mul(b,f),e.neg(m)]}const w=b=>(m,g)=>{const k=g.toAffine(),q=b(k.x,k.y);return m.fromAffine({x:q[0],y:q[1]})},S=w(a),v=w(p);return{psi:a,psi2:p,G2psi:S,G2psi2:v,PSI_X:n,PSI_Y:i,PSI2_X:f,PSI2_Y:s}}function wl(t){const{ORDER:e}=t,r=sr(e),n=r.create(t.NONRESIDUE||BigInt(-1)),i=r.div(r.ONE,qt),a=hs(r,n,r.ORDER,2)[0],f=({c0:x,c1:N},{c0:$,c1:L})=>({c0:r.add(x,$),c1:r.add(N,L)}),s=({c0:x,c1:N},{c0:$,c1:L})=>({c0:r.sub(x,$),c1:r.sub(N,L)}),p=({c0:x,c1:N},$)=>{if(typeof $=="bigint")return{c0:r.mul(x,$),c1:r.mul(N,$)};const{c0:L,c1:ee}=$;let Q=r.mul(x,L),ne=r.mul(N,ee);const he=r.sub(Q,ne),oe=r.sub(r.mul(r.add(x,N),r.add(L,ee)),r.add(Q,ne));return{c0:he,c1:oe}},w=({c0:x,c1:N})=>{const $=r.add(x,N),L=r.sub(x,N),ee=r.add(x,x);return{c0:r.mul($,L),c1:r.mul(ee,N)}},S=x=>{if(x.length!==2)throw new Error("invalid tuple");const N=x.map($=>r.create($));return{c0:N[0],c1:N[1]}};function v(x,N){return typeof x=="bigint"&&qo<=x&&x<N}const b=e*e,m=S(t.FP2_NONRESIDUE),g={ORDER:b,isLE:r.isLE,NONRESIDUE:m,BITS:Zr(b),BYTES:Math.ceil(Zr(b)/8),MASK:br(Zr(b)),ZERO:{c0:r.ZERO,c1:r.ZERO},ONE:{c0:r.ONE,c1:r.ZERO},create:x=>x,isValid:({c0:x,c1:N})=>v(x,b)&&v(N,b),is0:({c0:x,c1:N})=>r.is0(x)&&r.is0(N),isValidNot0:x=>!g.is0(x)&&g.isValid(x),eql:({c0:x,c1:N},{c0:$,c1:L})=>r.eql(x,$)&&r.eql(N,L),neg:({c0:x,c1:N})=>({c0:r.neg(x),c1:r.neg(N)}),pow:(x,N)=>Qn(g,x,N),invertBatch:x=>_r(g,x),add:f,sub:s,mul:p,sqr:w,addN:f,subN:s,mulN:p,sqrN:w,div:(x,N)=>g.mul(x,typeof N=="bigint"?r.inv(r.create(N)):g.inv(N)),inv:({c0:x,c1:N})=>{const $=r.inv(r.create(x*x+N*N));return{c0:r.mul($,r.create(x)),c1:r.mul($,r.create(-N))}},sqrt:x=>{if(t.Fp2sqrt)return t.Fp2sqrt(x);const{c0:N,c1:$}=x;if(r.is0($))return xi(r,N)===1?g.create({c0:r.sqrt(N),c1:r.ZERO}):g.create({c0:r.ZERO,c1:r.sqrt(r.div(N,n))});const L=r.sqrt(r.sub(r.sqr(N),r.mul(r.sqr($),n)));let ee=r.mul(r.add(L,N),i);xi(r,ee)===-1&&(ee=r.sub(ee,L));const ne=r.sqrt(ee),he=g.create({c0:ne,c1:r.div(r.mul($,i),ne)});if(!g.eql(g.sqr(he),x))throw new Error("Cannot find square root");const oe=he,ie=g.neg(oe),{re:Se,im:A}=g.reim(oe),{re:Fe,im:Be}=g.reim(ie);return A>Be||A===Be&&Se>Fe?oe:ie},isOdd:x=>{const{re:N,im:$}=g.reim(x),L=N%qt,ee=N===qo,Q=$%qt;return BigInt(L||ee&&Q)==Hr},fromBytes(x){if(x.length!==g.BYTES)throw new Error("fromBytes invalid length="+x.length);return{c0:r.fromBytes(x.subarray(0,r.BYTES)),c1:r.fromBytes(x.subarray(r.BYTES))}},toBytes:({c0:x,c1:N})=>Ce(r.toBytes(x),r.toBytes(N)),cmov:({c0:x,c1:N},{c0:$,c1:L},ee)=>({c0:r.cmov(x,$,ee),c1:r.cmov(N,L,ee)}),reim:({c0:x,c1:N})=>({re:x,im:N}),mulByNonresidue:({c0:x,c1:N})=>g.mul({c0:x,c1:N},m),mulByB:t.Fp2mulByB,fromBigTuple:S,frobeniusMap:({c0:x,c1:N},$)=>({c0:x,c1:r.mul(N,a[$%2])})},k=({c0:x,c1:N,c2:$},{c0:L,c1:ee,c2:Q})=>({c0:g.add(x,L),c1:g.add(N,ee),c2:g.add($,Q)}),q=({c0:x,c1:N,c2:$},{c0:L,c1:ee,c2:Q})=>({c0:g.sub(x,L),c1:g.sub(N,ee),c2:g.sub($,Q)}),X=({c0:x,c1:N,c2:$},L)=>{if(typeof L=="bigint")return{c0:g.mul(x,L),c1:g.mul(N,L),c2:g.mul($,L)};const{c0:ee,c1:Q,c2:ne}=L,he=g.mul(x,ee),oe=g.mul(N,Q),ie=g.mul($,ne);return{c0:g.add(he,g.mulByNonresidue(g.sub(g.mul(g.add(N,$),g.add(Q,ne)),g.add(oe,ie)))),c1:g.add(g.sub(g.mul(g.add(x,N),g.add(ee,Q)),g.add(he,oe)),g.mulByNonresidue(ie)),c2:g.sub(g.add(oe,g.mul(g.add(x,$),g.add(ee,ne))),g.add(he,ie))}},K=({c0:x,c1:N,c2:$})=>{let L=g.sqr(x),ee=g.mul(g.mul(x,N),qt),Q=g.mul(g.mul(N,$),qt),ne=g.sqr($);return{c0:g.add(g.mulByNonresidue(Q),L),c1:g.add(g.mulByNonresidue(ne),ee),c2:g.sub(g.sub(g.add(g.add(ee,g.sqr(g.add(g.sub(x,N),$))),Q),L),ne)}},[j,D]=hs(g,m,r.ORDER,6,2,3),R={ORDER:g.ORDER,isLE:g.isLE,BITS:3*g.BITS,BYTES:3*g.BYTES,MASK:br(3*g.BITS),ZERO:{c0:g.ZERO,c1:g.ZERO,c2:g.ZERO},ONE:{c0:g.ONE,c1:g.ZERO,c2:g.ZERO},create:x=>x,isValid:({c0:x,c1:N,c2:$})=>g.isValid(x)&&g.isValid(N)&&g.isValid($),is0:({c0:x,c1:N,c2:$})=>g.is0(x)&&g.is0(N)&&g.is0($),isValidNot0:x=>!R.is0(x)&&R.isValid(x),neg:({c0:x,c1:N,c2:$})=>({c0:g.neg(x),c1:g.neg(N),c2:g.neg($)}),eql:({c0:x,c1:N,c2:$},{c0:L,c1:ee,c2:Q})=>g.eql(x,L)&&g.eql(N,ee)&&g.eql($,Q),sqrt:Io,div:(x,N)=>R.mul(x,typeof N=="bigint"?r.inv(r.create(N)):R.inv(N)),pow:(x,N)=>Qn(R,x,N),invertBatch:x=>_r(R,x),add:k,sub:q,mul:X,sqr:K,addN:k,subN:q,mulN:X,sqrN:K,inv:({c0:x,c1:N,c2:$})=>{let L=g.sub(g.sqr(x),g.mulByNonresidue(g.mul($,N))),ee=g.sub(g.mulByNonresidue(g.sqr($)),g.mul(x,N)),Q=g.sub(g.sqr(N),g.mul(x,$)),ne=g.inv(g.add(g.mulByNonresidue(g.add(g.mul($,ee),g.mul(N,Q))),g.mul(x,L)));return{c0:g.mul(ne,L),c1:g.mul(ne,ee),c2:g.mul(ne,Q)}},fromBytes:x=>{if(x.length!==R.BYTES)throw new Error("fromBytes invalid length="+x.length);return{c0:g.fromBytes(x.subarray(0,g.BYTES)),c1:g.fromBytes(x.subarray(g.BYTES,2*g.BYTES)),c2:g.fromBytes(x.subarray(2*g.BYTES))}},toBytes:({c0:x,c1:N,c2:$})=>Ce(g.toBytes(x),g.toBytes(N),g.toBytes($)),cmov:({c0:x,c1:N,c2:$},{c0:L,c1:ee,c2:Q},ne)=>({c0:g.cmov(x,L,ne),c1:g.cmov(N,ee,ne),c2:g.cmov($,Q,ne)}),fromBigSix:x=>{if(!Array.isArray(x)||x.length!==6)throw new Error("invalid Fp6 usage");return{c0:g.fromBigTuple(x.slice(0,2)),c1:g.fromBigTuple(x.slice(2,4)),c2:g.fromBigTuple(x.slice(4,6))}},frobeniusMap:({c0:x,c1:N,c2:$},L)=>({c0:g.frobeniusMap(x,L),c1:g.mul(g.frobeniusMap(N,L),j[L%6]),c2:g.mul(g.frobeniusMap($,L),D[L%6])}),mulByFp2:({c0:x,c1:N,c2:$},L)=>({c0:g.mul(x,L),c1:g.mul(N,L),c2:g.mul($,L)}),mulByNonresidue:({c0:x,c1:N,c2:$})=>({c0:g.mulByNonresidue($),c1:x,c2:N}),mul1:({c0:x,c1:N,c2:$},L)=>({c0:g.mulByNonresidue(g.mul($,L)),c1:g.mul(x,L),c2:g.mul(N,L)}),mul01({c0:x,c1:N,c2:$},L,ee){let Q=g.mul(x,L),ne=g.mul(N,ee);return{c0:g.add(g.mulByNonresidue(g.sub(g.mul(g.add(N,$),ee),ne)),Q),c1:g.sub(g.sub(g.mul(g.add(L,ee),g.add(x,N)),Q),ne),c2:g.add(g.sub(g.mul(g.add(x,$),L),Q),ne)}}},C=hs(g,m,r.ORDER,12,1,6)[0],z=({c0:x,c1:N},{c0:$,c1:L})=>({c0:R.add(x,$),c1:R.add(N,L)}),te=({c0:x,c1:N},{c0:$,c1:L})=>({c0:R.sub(x,$),c1:R.sub(N,L)}),re=({c0:x,c1:N},$)=>{if(typeof $=="bigint")return{c0:R.mul(x,$),c1:R.mul(N,$)};let{c0:L,c1:ee}=$,Q=R.mul(x,L),ne=R.mul(N,ee);return{c0:R.add(Q,R.mulByNonresidue(ne)),c1:R.sub(R.mul(R.add(x,N),R.add(L,ee)),R.add(Q,ne))}},U=({c0:x,c1:N})=>{let $=R.mul(x,N);return{c0:R.sub(R.sub(R.mul(R.add(R.mulByNonresidue(N),x),R.add(x,N)),$),R.mulByNonresidue($)),c1:R.add($,$)}};function H(x,N){const $=g.sqr(x),L=g.sqr(N);return{first:g.add(g.mulByNonresidue(L),$),second:g.sub(g.sub(g.sqr(g.add(x,N)),$),L)}}const J={ORDER:g.ORDER,isLE:R.isLE,BITS:2*R.BITS,BYTES:2*R.BYTES,MASK:br(2*R.BITS),ZERO:{c0:R.ZERO,c1:R.ZERO},ONE:{c0:R.ONE,c1:R.ZERO},create:x=>x,isValid:({c0:x,c1:N})=>R.isValid(x)&&R.isValid(N),is0:({c0:x,c1:N})=>R.is0(x)&&R.is0(N),isValidNot0:x=>!J.is0(x)&&J.isValid(x),neg:({c0:x,c1:N})=>({c0:R.neg(x),c1:R.neg(N)}),eql:({c0:x,c1:N},{c0:$,c1:L})=>R.eql(x,$)&&R.eql(N,L),sqrt:Io,inv:({c0:x,c1:N})=>{let $=R.inv(R.sub(R.sqr(x),R.mulByNonresidue(R.sqr(N))));return{c0:R.mul(x,$),c1:R.neg(R.mul(N,$))}},div:(x,N)=>J.mul(x,typeof N=="bigint"?r.inv(r.create(N)):J.inv(N)),pow:(x,N)=>Qn(J,x,N),invertBatch:x=>_r(J,x),add:z,sub:te,mul:re,sqr:U,addN:z,subN:te,mulN:re,sqrN:U,fromBytes:x=>{if(x.length!==J.BYTES)throw new Error("fromBytes invalid length="+x.length);return{c0:R.fromBytes(x.subarray(0,R.BYTES)),c1:R.fromBytes(x.subarray(R.BYTES))}},toBytes:({c0:x,c1:N})=>Ce(R.toBytes(x),R.toBytes(N)),cmov:({c0:x,c1:N},{c0:$,c1:L},ee)=>({c0:R.cmov(x,$,ee),c1:R.cmov(N,L,ee)}),fromBigTwelve:x=>({c0:R.fromBigSix(x.slice(0,6)),c1:R.fromBigSix(x.slice(6,12))}),frobeniusMap(x,N){const{c0:$,c1:L,c2:ee}=R.frobeniusMap(x.c1,N),Q=C[N%12];return{c0:R.frobeniusMap(x.c0,N),c1:R.create({c0:g.mul($,Q),c1:g.mul(L,Q),c2:g.mul(ee,Q)})}},mulByFp2:({c0:x,c1:N},$)=>({c0:R.mulByFp2(x,$),c1:R.mulByFp2(N,$)}),conjugate:({c0:x,c1:N})=>({c0:x,c1:R.neg(N)}),mul014:({c0:x,c1:N},$,L,ee)=>{let Q=R.mul01(x,$,L),ne=R.mul1(N,ee);return{c0:R.add(R.mulByNonresidue(ne),Q),c1:R.sub(R.sub(R.mul01(R.add(N,x),$,g.add(L,ee)),Q),ne)}},mul034:({c0:x,c1:N},$,L,ee)=>{const Q=R.create({c0:g.mul(x.c0,$),c1:g.mul(x.c1,$),c2:g.mul(x.c2,$)}),ne=R.mul01(N,L,ee),he=R.mul01(R.add(x,N),g.add($,L),ee);return{c0:R.add(R.mulByNonresidue(ne),Q),c1:R.sub(he,R.add(Q,ne))}},_cyclotomicSquare:t.Fp12cyclotomicSquare,_cyclotomicExp:t.Fp12cyclotomicExp,finalExponentiate:t.Fp12finalExponentiate};return{Fp:r,Fp2:g,Fp6:R,Fp12:J,Fp4Square:H}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const nt=BigInt(0),vi=BigInt(1),Le=BigInt(2),Ci=BigInt(3),Bn=BigInt(4),tr=BigInt("0xd201000000010000"),ml=Zr(tr),Sr={p:BigInt("0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaab"),n:BigInt("0x73eda753299d7d483339d80809a1d80553bda402fffe5bfeffffffff00000001"),h:BigInt("0x396c8c005555e1568c00aaab0000aaab"),a:nt,b:Bn,Gx:BigInt("0x17f1d3a73197d7942695638c4fa9ac0fc3688c4f9774b905a14e3a3f171bac586c55e83ff97a1aeffb3af00adb22c6bb"),Gy:BigInt("0x08b3f481e3aaa0f1a09e30ed741d8ae4fcf5e095d5d00af600db18cb2c04b3edd03cc744a2888ae40caa232946c5e7e1")},bl=sr(Sr.n,{modOnDecode:!0}),{Fp:pe,Fp2:le,Fp6:Fs,Fp4Square:ds,Fp12:Ee}=wl({ORDER:Sr.p,FP2_NONRESIDUE:[vi,vi],Fp2mulByB:({c0:t,c1:e})=>{const r=pe.mul(t,Bn),n=pe.mul(e,Bn);return{c0:pe.sub(r,n),c1:pe.add(r,n)}},Fp12cyclotomicSquare:({c0:t,c1:e})=>{const{c0:r,c1:n,c2:i}=t,{c0:a,c1:f,c2:s}=e,{first:p,second:w}=ds(r,f),{first:S,second:v}=ds(a,i),{first:b,second:m}=ds(n,s),g=le.mulByNonresidue(m);return{c0:Fs.create({c0:le.add(le.mul(le.sub(p,r),Le),p),c1:le.add(le.mul(le.sub(S,n),Le),S),c2:le.add(le.mul(le.sub(b,i),Le),b)}),c1:Fs.create({c0:le.add(le.mul(le.add(g,a),Le),g),c1:le.add(le.mul(le.add(w,f),Le),w),c2:le.add(le.mul(le.add(v,s),Le),v)})}},Fp12cyclotomicExp(t,e){let r=Ee.ONE;for(let n=ml-1;n>=0;n--)r=Ee._cyclotomicSquare(r),G0(e,n)&&(r=Ee.mul(r,t));return r},Fp12finalExponentiate:t=>{const e=tr,r=Ee.div(Ee.frobeniusMap(t,6),t),n=Ee.mul(Ee.frobeniusMap(r,2),r),i=Ee.conjugate(Ee._cyclotomicExp(n,e)),a=Ee.mul(Ee.conjugate(Ee._cyclotomicSquare(n)),i),f=Ee.conjugate(Ee._cyclotomicExp(a,e)),s=Ee.conjugate(Ee._cyclotomicExp(f,e)),p=Ee.mul(Ee.conjugate(Ee._cyclotomicExp(s,e)),Ee._cyclotomicSquare(i)),w=Ee.conjugate(Ee._cyclotomicExp(p,e)),S=Ee.frobeniusMap(Ee.mul(i,s),2),v=Ee.frobeniusMap(Ee.mul(f,n),3),b=Ee.frobeniusMap(Ee.mul(p,Ee.conjugate(n)),1),m=Ee.mul(Ee.mul(w,Ee.conjugate(a)),n);return Ee.mul(Ee.mul(Ee.mul(S,v),b),m)}}),{G2psi:Go,G2psi2:_l}=gl(pe,le,le.div(le.ONE,le.NONRESIDUE)),ps=Object.freeze({DST:"BLS_SIG_BLS12381G2_XMD:SHA-256_SSWU_RO_NUL_",encodeDST:"BLS_SIG_BLS12381G2_XMD:SHA-256_SSWU_RO_NUL_",p:pe.ORDER,m:2,k:128,expand:"xmd",hash:Gs}),Qs={p:le.ORDER,n:Sr.n,h:BigInt("0x5d543a95414e7f1091d50792876a202cd91de4547085abaa68a205b2e5a7ddfa628f1cb4d9e82ef21537e293a6691ae1616ec6e786f0c70cf1c38e31c7238e5"),a:le.ZERO,b:le.fromBigTuple([Bn,Bn]),Gx:le.fromBigTuple([BigInt("0x024aa2b2f08f0a91260805272dc51051c6e47ad4fa403b02b4510b647ae3d1770bac0326a805bbefd48056c8c121bdb8"),BigInt("0x13e02b6052719f607dacd3a088274f65596bd0d09920b61ab5da61bbdc7f5049334cf11213945d57e5ac7d055d042b7e")]),Gy:le.fromBigTuple([BigInt("0x0ce5d527727d6e118cc9cdc6da2e351aadfd9baa8cbdd3a76d429a695160d12c923ac9cc3baca289e193548608b82801"),BigInt("0x0606c4a02ea734cc32acd2b02bc28b99cb3e287e85a763af267492ab572e99ab3f370d275cec1da1aaa9075ff05f79be")])},qi=$n(pe.toBytes(nt),{infinity:!0,compressed:!0});function Vi(t){t=t.slice();const e=t[0]&224,r=!!(e>>7&1),n=!!(e>>6&1),i=!!(e>>5&1);return t[0]&=31,{compressed:r,infinity:n,sort:i,value:t}}function $n(t,e){if(t[0]&224)throw new Error("setMask: non-empty mask");return e.compressed&&(t[0]|=128),e.infinity&&(t[0]|=64),e.sort&&(t[0]|=32),t}function xl(t,e,r){const{BYTES:n,ORDER:i}=pe,a=e.is0(),{x:f,y:s}=e.toAffine();if(r){if(a)return qi.slice();const p=!!(s*Le/i);return $n(Je(f,n),{compressed:!0,sort:p})}else return a?Ce(Uint8Array.of(64),new Uint8Array(2*n-1)):Ce(Je(f,n),Je(s,n))}function ys(t){t.assertValidity();const{BYTES:e,ORDER:r}=pe,{x:n,y:i}=t.toAffine();if(t.is0())return qi.slice();const a=!!(i*Le/r);return $n(Je(n,e),{compressed:!0,sort:a})}function El(t){const{compressed:e,infinity:r,sort:n,value:i}=Vi(t),{BYTES:a,ORDER:f}=pe;if(i.length===48&&e){const s=Ft(i),p=pe.create(s&pe.MASK);if(r){if(p!==nt)throw new Error("invalid G1 point: non-empty, at infinity, with compression");return{x:nt,y:nt}}const w=pe.add(pe.pow(p,Ci),pe.create(Sr.b));let S=pe.sqrt(w);if(!S)throw new Error("invalid G1 point: compressed point");return S*Le/f!==BigInt(n)&&(S=pe.neg(S)),{x:pe.create(p),y:pe.create(S)}}else if(i.length===96&&!e){const s=Ft(i.subarray(0,a)),p=Ft(i.subarray(a));if(r){if(s!==nt||p!==nt)throw new Error("G1: non-empty point at infinity");return Gi.G1.Point.ZERO.toAffine()}return{x:pe.create(s),y:pe.create(p)}}else throw new Error("invalid G1 point: expected 48/96 bytes")}function Ho(t){const{infinity:e,sort:r,value:n}=Vi(ut("signatureHex",t,48)),i=pe.ORDER,a=Gi.G1.Point,f=Ft(n);if(e)return a.ZERO;const s=pe.create(f&pe.MASK),p=pe.add(pe.pow(s,Ci),pe.create(Sr.b));let w=pe.sqrt(p);if(!w)throw new Error("invalid G1 point: compressed");const S=BigInt(r);w*Le/i!==S&&(w=pe.neg(w));const v=a.fromAffine({x:s,y:w});return v.assertValidity(),v}function Al(t,e,r){const{BYTES:n,ORDER:i}=pe,a=e.is0(),{x:f,y:s}=e.toAffine();if(r){if(a)return Ce(qi,Je(nt,n));const p=!!(s.c1===nt?s.c0*Le/i:s.c1*Le/i);return Ce($n(Je(f.c1,n),{compressed:!0,sort:p}),Je(f.c0,n))}else{if(a)return Ce(Uint8Array.of(64),new Uint8Array(4*n-1));const{re:p,im:w}=le.reim(f),{re:S,im:v}=le.reim(s);return Ce(Je(w,n),Je(p,n),Je(v,n),Je(S,n))}}function gs(t){t.assertValidity();const{BYTES:e}=pe;if(t.is0())return Ce(qi,Je(nt,e));const{x:r,y:n}=t.toAffine(),{re:i,im:a}=le.reim(r),{re:f,im:s}=le.reim(n),w=!!((s>nt?s*Le:f*Le)/pe.ORDER&vi),S=i;return Ce($n(Je(a,e),{sort:w,compressed:!0}),Je(S,e))}function vl(t){const{BYTES:e,ORDER:r}=pe,{compressed:n,infinity:i,sort:a,value:f}=Vi(t);if(!n&&!i&&a||!n&&i&&a||a&&i&&n)throw new Error("invalid encoding flag: "+(t[0]&224));const s=(p,w,S)=>Ft(p.slice(w,S));if(f.length===96&&n){if(i){if(f.reduce((g,k)=>g!==0?k+1:k,0)>0)throw new Error("invalid G2 point: compressed");return{x:le.ZERO,y:le.ZERO}}const p=s(f,0,e),w=s(f,e,2*e),S=le.create({c0:pe.create(w),c1:pe.create(p)}),v=le.add(le.pow(S,Ci),Qs.b);let b=le.sqrt(v);const m=b.c1===nt?b.c0*Le/r:b.c1*Le/r?vi:nt;return b=a&&m>0?b:le.neg(b),{x:S,y:b}}else if(f.length===192&&!n){if(i){if(f.reduce((b,m)=>b!==0?m+1:m,0)>0)throw new Error("invalid G2 point: uncompressed");return{x:le.ZERO,y:le.ZERO}}const p=s(f,0*e,1*e),w=s(f,1*e,2*e),S=s(f,2*e,3*e),v=s(f,3*e,4*e);return{x:le.fromBigTuple([w,p]),y:le.fromBigTuple([v,S])}}else throw new Error("invalid G2 point: expected 96/192 bytes")}function jo(t){const{ORDER:e}=pe,{infinity:r,sort:n,value:i}=Vi(ut("signatureHex",t)),a=Gi.G2.Point,f=i.length/2;if(f!==48&&f!==96)throw new Error("invalid compressed signature length, expected 96/192 bytes");const s=Ft(i.slice(0,f)),p=Ft(i.slice(f));if(r)return a.ZERO;const w=pe.create(s&pe.MASK),S=pe.create(p),v=le.create({c0:S,c1:w}),b=le.add(le.pow(v,Ci),Qs.b);let m=le.sqrt(b);if(!m)throw new Error("Failed to find a square root");const{re:g,im:k}=le.reim(m),q=BigInt(n),X=k>nt&&k*Le/e!==q,K=k===nt&&g*Le/e!==q;(X||K)&&(m=le.neg(m));const j=a.fromAffine({x:v,y:m});return j.assertValidity(),j}const Gi=yl({fields:{Fp:pe,Fp2:le,Fp6:Fs,Fp12:Ee,Fr:bl},G1:{...Sr,Fp:pe,htfDefaults:{...ps,m:1,DST:"BLS_SIG_BLS12381G1_XMD:SHA-256_SSWU_RO_NUL_"},wrapPrivateKey:!0,allowInfinityPoint:!0,isTorsionFree:(t,e)=>{const r=BigInt("0x5f19672fdf76ce51ba69c6076a0f77eaddb3a93be6f89688de17d813620a00022e01fffffffefffe"),n=new t(pe.mul(e.X,r),e.Y,e.Z);return e.multiplyUnsafe(tr).negate().multiplyUnsafe(tr).equals(n)},clearCofactor:(t,e)=>e.multiplyUnsafe(tr).add(e),mapToCurve:Il,fromBytes:El,toBytes:xl,ShortSignature:{fromBytes(t){return it(t),Ho(t)},fromHex(t){return Ho(t)},toBytes(t){return ys(t)},toRawBytes(t){return ys(t)},toHex(t){return Jr(ys(t))}}},G2:{...Qs,Fp:le,hEff:BigInt("0xbc69f08f2ee75b3584c6a0ea91b352888e2a8e9145ad7689986ff031508ffe1329c2f178731db956d82bf015d1212b02ec0ec69d7477c1ae954cbc06689f6a359894c0adebbf6b4e8020005aaa95551"),htfDefaults:{...ps},wrapPrivateKey:!0,allowInfinityPoint:!0,mapToCurve:Rl,isTorsionFree:(t,e)=>e.multiplyUnsafe(tr).negate().equals(Go(t,e)),clearCofactor:(t,e)=>{const r=tr;let n=e.multiplyUnsafe(r).negate(),i=Go(t,e),a=e.double();return a=_l(t,a),a=a.subtract(i),i=n.add(i),i=i.multiplyUnsafe(r).negate(),a=a.add(i),a=a.subtract(n),a.subtract(e)},fromBytes:vl,toBytes:Al,Signature:{fromBytes(t){return it(t),jo(t)},fromHex(t){return jo(t)},toBytes(t){return gs(t)},toRawBytes(t){return gs(t)},toHex(t){return Jr(gs(t))}}},params:{ateLoopSize:tr,r:Sr.n,xNegative:!0,twistType:"multiplicative"},htfDefaults:ps,hash:Gs}),Bl=jc(le,[[["0x5c759507e8e333ebb5b7a9a47d7ed8532c52d39fd3a042a88b58423c50ae15d5c2638e343d9c71c6238aaaaaaaa97d6","0x5c759507e8e333ebb5b7a9a47d7ed8532c52d39fd3a042a88b58423c50ae15d5c2638e343d9c71c6238aaaaaaaa97d6"],["0x0","0x11560bf17baa99bc32126fced787c88f984f87adf7ae0c7f9a208c6b4f20a4181472aaa9cb8d555526a9ffffffffc71a"],["0x11560bf17baa99bc32126fced787c88f984f87adf7ae0c7f9a208c6b4f20a4181472aaa9cb8d555526a9ffffffffc71e","0x8ab05f8bdd54cde190937e76bc3e447cc27c3d6fbd7063fcd104635a790520c0a395554e5c6aaaa9354ffffffffe38d"],["0x171d6541fa38ccfaed6dea691f5fb614cb14b4e7f4e810aa22d6108f142b85757098e38d0f671c7188e2aaaaaaaa5ed1","0x0"]],[["0x0","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaa63"],["0xc","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaa9f"],["0x1","0x0"]],[["0x1530477c7ab4113b59a4c18b076d11930f7da5d4a07f649bf54439d87d27e500fc8c25ebf8c92f6812cfc71c71c6d706","0x1530477c7ab4113b59a4c18b076d11930f7da5d4a07f649bf54439d87d27e500fc8c25ebf8c92f6812cfc71c71c6d706"],["0x0","0x5c759507e8e333ebb5b7a9a47d7ed8532c52d39fd3a042a88b58423c50ae15d5c2638e343d9c71c6238aaaaaaaa97be"],["0x11560bf17baa99bc32126fced787c88f984f87adf7ae0c7f9a208c6b4f20a4181472aaa9cb8d555526a9ffffffffc71c","0x8ab05f8bdd54cde190937e76bc3e447cc27c3d6fbd7063fcd104635a790520c0a395554e5c6aaaa9354ffffffffe38f"],["0x124c9ad43b6cf79bfbf7043de3811ad0761b0f37a1e26286b0e977c69aa274524e79097a56dc4bd9e1b371c71c718b10","0x0"]],[["0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffa8fb","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffa8fb"],["0x0","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffa9d3"],["0x12","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaa99"],["0x1","0x0"]]].map(t=>t.map(e=>le.fromBigTuple(e.map(BigInt))))),Tl=jc(pe,[["0x11a05f2b1e833340b809101dd99815856b303e88a2d7005ff2627b56cdb4e2c85610c2d5f2e62d6eaeac1662734649b7","0x17294ed3e943ab2f0588bab22147a81c7c17e75b2f6a8417f565e33c70d1e86b4838f2a6f318c356e834eef1b3cb83bb","0xd54005db97678ec1d1048c5d10a9a1bce032473295983e56878e501ec68e25c958c3e3d2a09729fe0179f9dac9edcb0","0x1778e7166fcc6db74e0609d307e55412d7f5e4656a8dbf25f1b33289f1b330835336e25ce3107193c5b388641d9b6861","0xe99726a3199f4436642b4b3e4118e5499db995a1257fb3f086eeb65982fac18985a286f301e77c451154ce9ac8895d9","0x1630c3250d7313ff01d1201bf7a74ab5db3cb17dd952799b9ed3ab9097e68f90a0870d2dcae73d19cd13c1c66f652983","0xd6ed6553fe44d296a3726c38ae652bfb11586264f0f8ce19008e218f9c86b2a8da25128c1052ecaddd7f225a139ed84","0x17b81e7701abdbe2e8743884d1117e53356de5ab275b4db1a682c62ef0f2753339b7c8f8c8f475af9ccb5618e3f0c88e","0x80d3cf1f9a78fc47b90b33563be990dc43b756ce79f5574a2c596c928c5d1de4fa295f296b74e956d71986a8497e317","0x169b1f8e1bcfa7c42e0c37515d138f22dd2ecb803a0c5c99676314baf4bb1b7fa3190b2edc0327797f241067be390c9e","0x10321da079ce07e272d8ec09d2565b0dfa7dccdde6787f96d50af36003b14866f69b771f8c285decca67df3f1605fb7b","0x6e08c248e260e70bd1e962381edee3d31d79d7e22c837bc23c0bf1bc24c6b68c24b1b80b64d391fa9c8ba2e8ba2d229"],["0x8ca8d548cff19ae18b2e62f4bd3fa6f01d5ef4ba35b48ba9c9588617fc8ac62b558d681be343df8993cf9fa40d21b1c","0x12561a5deb559c4348b4711298e536367041e8ca0cf0800c0126c2588c48bf5713daa8846cb026e9e5c8276ec82b3bff","0xb2962fe57a3225e8137e629bff2991f6f89416f5a718cd1fca64e00b11aceacd6a3d0967c94fedcfcc239ba5cb83e19","0x3425581a58ae2fec83aafef7c40eb545b08243f16b1655154cca8abc28d6fd04976d5243eecf5c4130de8938dc62cd8","0x13a8e162022914a80a6f1d5f43e7a07dffdfc759a12062bb8d6b44e833b306da9bd29ba81f35781d539d395b3532a21e","0xe7355f8e4e667b955390f7f0506c6e9395735e9ce9cad4d0a43bcef24b8982f7400d24bc4228f11c02df9a29f6304a5","0x772caacf16936190f3e0c63e0596721570f5799af53a1894e2e073062aede9cea73b3538f0de06cec2574496ee84a3a","0x14a7ac2a9d64a8b230b3f5b074cf01996e7f63c21bca68a81996e1cdf9822c580fa5b9489d11e2d311f7d99bbdcc5a5e","0xa10ecf6ada54f825e920b3dafc7a3cce07f8d1d7161366b74100da67f39883503826692abba43704776ec3a79a1d641","0x95fc13ab9e92ad4476d6e3eb3a56680f682b4ee96f7d03776df533978f31c1593174e4b4b7865002d6384d168ecdd0a","0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001"],["0x90d97c81ba24ee0259d1f094980dcfa11ad138e48a869522b52af6c956543d3cd0c7aee9b3ba3c2be9845719707bb33","0x134996a104ee5811d51036d776fb46831223e96c254f383d0f906343eb67ad34d6c56711962fa8bfe097e75a2e41c696","0xcc786baa966e66f4a384c86a3b49942552e2d658a31ce2c344be4b91400da7d26d521628b00523b8dfe240c72de1f6","0x1f86376e8981c217898751ad8746757d42aa7b90eeb791c09e4a3ec03251cf9de405aba9ec61deca6355c77b0e5f4cb","0x8cc03fdefe0ff135caf4fe2a21529c4195536fbe3ce50b879833fd221351adc2ee7f8dc099040a841b6daecf2e8fedb","0x16603fca40634b6a2211e11db8f0a6a074a7d0d4afadb7bd76505c3d3ad5544e203f6326c95a807299b23ab13633a5f0","0x4ab0b9bcfac1bbcb2c977d027796b3ce75bb8ca2be184cb5231413c4d634f3747a87ac2460f415ec961f8855fe9d6f2","0x987c8d5333ab86fde9926bd2ca6c674170a05bfe3bdd81ffd038da6c26c842642f64550fedfe935a15e4ca31870fb29","0x9fc4018bd96684be88c9e221e4da1bb8f3abd16679dc26c1e8b6e6a1f20cabe69d65201c78607a360370e577bdba587","0xe1bba7a1186bdb5223abde7ada14a23c42a0ca7915af6fe06985e7ed1e4d43b9b3f7055dd4eba6f2bafaaebca731c30","0x19713e47937cd1be0dfd0b8f1d43fb93cd2fcbcb6caf493fd1183e416389e61031bf3a5cce3fbafce813711ad011c132","0x18b46a908f36f6deb918c143fed2edcc523559b8aaf0c2462e6bfe7f911f643249d9cdf41b44d606ce07c8a4d0074d8e","0xb182cac101b9399d155096004f53f447aa7b12a3426b08ec02710e807b4633f06c851c1919211f20d4c04f00b971ef8","0x245a394ad1eca9b72fc00ae7be315dc757b3b080d4c158013e6632d3c40659cc6cf90ad1c232a6442d9d3f5db980133","0x5c129645e44cf1102a159f748c4a3fc5e673d81d7e86568d9ab0f5d396a7ce46ba1049b6579afb7866b1e715475224b","0x15e6be4e990f03ce4ea50b3b42df2eb5cb181d8f84965a3957add4fa95af01b2b665027efec01c7704b456be69c8b604"],["0x16112c4c3a9c98b252181140fad0eae9601a6de578980be6eec3232b5be72e7a07f3688ef60c206d01479253b03663c1","0x1962d75c2381201e1a0cbd6c43c348b885c84ff731c4d59ca4a10356f453e01f78a4260763529e3532f6102c2e49a03d","0x58df3306640da276faaae7d6e8eb15778c4855551ae7f310c35a5dd279cd2eca6757cd636f96f891e2538b53dbf67f2","0x16b7d288798e5395f20d23bf89edb4d1d115c5dbddbcd30e123da489e726af41727364f2c28297ada8d26d98445f5416","0xbe0e079545f43e4b00cc912f8228ddcc6d19c9f0f69bbb0542eda0fc9dec916a20b15dc0fd2ededda39142311a5001d","0x8d9e5297186db2d9fb266eaac783182b70152c65550d881c5ecd87b6f0f5a6449f38db9dfa9cce202c6477faaf9b7ac","0x166007c08a99db2fc3ba8734ace9824b5eecfdfa8d0cf8ef5dd365bc400a0051d5fa9c01a58b1fb93d1a1399126a775c","0x16a3ef08be3ea7ea03bcddfabba6ff6ee5a4375efa1f4fd7feb34fd206357132b920f5b00801dee460ee415a15812ed9","0x1866c8ed336c61231a1be54fd1d74cc4f9fb0ce4c6af5920abc5750c4bf39b4852cfe2f7bb9248836b233d9d55535d4a","0x167a55cda70a6e1cea820597d94a84903216f763e13d87bb5308592e7ea7d4fbc7385ea3d529b35e346ef48bb8913f55","0x4d2f259eea405bd48f010a01ad2911d9c6dd039bb61a6290e591b36e636a5c871a5c29f4f83060400f8b49cba8f6aa8","0xaccbb67481d033ff5852c1e48c50c477f94ff8aefce42d28c0f9a88cea7913516f968986f7ebbea9684b529e2561092","0xad6b9514c767fe3c3613144b45f1496543346d98adf02267d5ceef9a00d9b8693000763e3b90ac11e99b138573345cc","0x2660400eb2e4f3b628bdd0d53cd76f2bf565b94e72927c1cb748df27942480e420517bd8714cc80d1fadc1326ed06f7","0xe0fa1d816ddc03e6b24255e0d7819c171c40f65e273b853324efcd6356caa205ca2f570f13497804415473a1d634b8f","0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001"]].map(t=>t.map(e=>BigInt(e)))),Sl=Zc(pe,{A:pe.create(BigInt("0x144698a3b8e9433d693a02c96d4982b0ea985383ee66a8d8e8981aefd881ac98936f8da0e0f97f5cf428082d584c1d")),B:pe.create(BigInt("0x12e2908d11688030018b12e8753eee3b2016c1f0f24f4070a0b9c14fcef35ef55a23215a316ceaa5d1cc48e98e172be0")),Z:pe.create(BigInt(11))}),Nl=Zc(le,{A:le.create({c0:pe.create(nt),c1:pe.create(BigInt(240))}),B:le.create({c0:pe.create(BigInt(1012)),c1:pe.create(BigInt(1012))}),Z:le.create({c0:pe.create(BigInt(-2)),c1:pe.create(BigInt(-1))})});function Il(t){const{x:e,y:r}=Sl(pe.create(t[0]));return Tl(e,r)}function Rl(t){const{x:e,y:r}=Nl(le.fromBigTuple(t));return Bl(e,r)}function Ul(t,e,r){const n=typeof t=="string"?t:We(t),i=typeof e=="string"?e:We(e),a=typeof r=="string"?r:We(r);return Gi.verifyShortSignature(i,a,n)}const Kc=t=>Ke(new tn(t)),Ds=t=>{const e=Kc(t);return new Date(Number(e)/1e6)};var Ol=globalThis&&globalThis.__classPrivateFieldSet||function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},Fl=globalThis&&globalThis.__classPrivateFieldGet||function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},Dn;class It extends Me{constructor(e){super(`Invalid certificate: ${e}`)}}var lt;(function(t){t[t.Empty=0]="Empty",t[t.Fork=1]="Fork",t[t.Labeled=2]="Labeled",t[t.Leaf=3]="Leaf",t[t.Pruned=4]="Pruned"})(lt||(lt={}));function $l(t,e){const r=new Uint8Array(t),n=new Uint8Array(e);for(let i=0;i<r.length;i++)if(r[i]>n[i])return!0;return!1}class xr{constructor(e,r,n,i,a=5,f=!1){this._rootKey=r,this._canisterId=n,this._blsVerify=i,this._maxAgeInMinutes=a,Dn.set(this,!1),Ol(this,Dn,f,"f"),this.cert=Ht(new Uint8Array(e))}static async create(e){const r=xr.createUnverified(e);return await r.verify(),r}static createUnverified(e){let r=e.blsVerify;return r||(r=Ul),new xr(e.certificate,e.rootKey,e.canisterId,r,e.maxAgeInMinutes,e.disableTimeVerification)}lookup(e){return en(e,this.cert.tree)}lookup_label(e){return this.lookup([e])}async verify(){const e=await ei(this.cert.tree),r=await this._checkDelegationAndGetKey(this.cert.delegation),n=this.cert.signature,i=kl(r),a=Ot(fn("ic-state-root"),e);let f=!1;const s=pt(this.lookup(["time"]));if(!s)throw new It("Certificate does not contain a time");if(!Fl(this,Dn,"f")){const w=this._maxAgeInMinutes*60*1e3,S=Date.now(),v=S-w,b=S+3e5,m=Ds(s);if(m.getTime()<v)throw new It(`Certificate is signed more than ${this._maxAgeInMinutes} minutes in the past. Certificate time: `+m.toISOString()+" Current time: "+new Date(S).toISOString());if(m.getTime()>b)throw new It("Certificate is signed more than 5 minutes in the future. Certificate time: "+m.toISOString()+" Current time: "+new Date(S).toISOString())}try{f=await this._blsVerify(new Uint8Array(i),new Uint8Array(n),new Uint8Array(a))}catch{f=!1}if(!f)throw new It("Signature verification failed")}async _checkDelegationAndGetKey(e){if(!e)return this._rootKey;const r=await xr.createUnverified({certificate:e.certificate,rootKey:this._rootKey,canisterId:this._canisterId,blsVerify:this._blsVerify,maxAgeInMinutes:1/0});if(r.cert.delegation)throw new It("Delegation certificates cannot be nested");if(await r.verify(),this._canisterId.toString()!==fh&&!Wc({canisterId:this._canisterId,subnetId:_e.fromUint8Array(new Uint8Array(e.subnet_id)),tree:r.cert.tree}))throw new It(`Canister ${this._canisterId} not in range of delegations for subnet 0x${We(e.subnet_id)}`);const n=pt(r.lookup(["subnet",e.subnet_id,"public_key"]));if(!n)throw new Error(`Could not find subnet key for subnet 0x${We(e.subnet_id)}`);return n}}Dn=new WeakMap;const on=yi("308182301d060d2b0601040182dc7c0503010201060c2b0601040182dc7c05030201036100"),Ml=96;function kl(t){const e=on.byteLength+Ml;if(t.byteLength!==e)throw new TypeError(`BLS DER-encoded public key must be ${e} bytes long`);const r=t.slice(0,on.byteLength);if(!Ni(r,on))throw new TypeError(`BLS DER-encoded public key is invalid. Expect the following prefix: ${on}, but get ${r}`);return t.slice(on.byteLength)}function pt(t){if(t.status===He.Found){if(t.value instanceof ArrayBuffer)return t.value;if(t.value instanceof Uint8Array)return t.value.buffer}}async function ei(t){switch(t[0]){case lt.Empty:return _t(fn("ic-hashtree-empty"));case lt.Pruned:return t[1];case lt.Leaf:return _t(Ot(fn("ic-hashtree-leaf"),t[1]));case lt.Labeled:return _t(Ot(fn("ic-hashtree-labeled"),t[1],await ei(t[2])));case lt.Fork:return _t(Ot(fn("ic-hashtree-fork"),await ei(t[1]),await ei(t[2])));default:throw new Error("unreachable")}}function fn(t){const e=new Uint8Array([t.length]),r=new TextEncoder().encode(t);return Ot(e,r)}var He;(function(t){t.Unknown="unknown",t.Absent="absent",t.Found="found"})(He||(He={}));var Vt;(function(t){t.Less="less",t.Greater="greater"})(Vt||(Vt={}));function en(t,e){if(t.length===0)switch(e[0]){case lt.Leaf:{if(!e[1])throw new Error("Invalid tree structure for leaf");return e[1]instanceof ArrayBuffer?{status:He.Found,value:e[1]}:e[1]instanceof Uint8Array?{status:He.Found,value:e[1].buffer}:{status:He.Found,value:e[1]}}default:return{status:He.Found,value:e}}const r=typeof t[0]=="string"?new TextEncoder().encode(t[0]):t[0],n=ti(r,e);switch(n.status){case He.Found:return en(t.slice(1),n.value);case Vt.Greater:case Vt.Less:return{status:He.Absent};default:return n}}function $s(t){switch(t[0]){case lt.Empty:return[];case lt.Fork:return $s(t[1]).concat($s(t[2]));default:return[t]}}function ti(t,e){switch(e[0]){case lt.Labeled:return $l(t,e[1])?{status:Vt.Greater}:Ni(t,e[1])?{status:He.Found,value:e[2]}:{status:Vt.Less};case lt.Fork:const r=ti(t,e[1]);switch(r.status){case Vt.Greater:{const n=ti(t,e[2]);return n.status===Vt.Less?{status:He.Absent}:n}case He.Unknown:{let n=ti(t,e[2]);return n.status===Vt.Less?{status:He.Unknown}:n}default:return r}case lt.Pruned:return{status:He.Unknown};default:return{status:He.Absent}}}function Wc(t){const{canisterId:e,subnetId:r,tree:n}=t,i=en(["subnet",r.toUint8Array(),"canister_ranges"],n);if(i.status!==He.Found||!(i.value instanceof ArrayBuffer))throw new Error(`Could not find canister ranges for subnet ${r}`);return Ht(i.value).map(p=>[_e.fromUint8Array(p[0]),_e.fromUint8Array(p[1])]).some(p=>p[0].ltEq(e)&&p[1].gtEq(e))}class Pl{constructor(e,r,n){this.key=e,this.path=r,this.decodeStrategy=n}}const zc=async t=>{const{agent:e,paths:r}=t,n=_e.from(t.canisterId),i=[...new Set(r)],a=i.map(p=>Ms(p,n)),f=new Map,s=i.map((p,w)=>(async()=>{var S;try{const v=await e.readState(n,{paths:[a[w]]});if(e.rootKey==null)throw new Error("Agent is missing root key");const b=await xr.create({certificate:v.certificate,rootKey:e.rootKey,canisterId:n,disableTimeVerification:!0}),m=(q,X)=>{if(X==="subnet"){if(e.rootKey==null)throw new Error("Agent is missing root key");const K=Lc(v.certificate,n,e.rootKey);return{path:X,data:K}}else return{path:X,data:pt(q.lookup(Ms(X,n)))}},{path:g,data:k}=m(b,i[w]);if(!k)console.warn(`Expected to find result for path ${g}, but instead found nothing.`),typeof g=="string"?f.set(g,null):f.set(g.key,null);else switch(g){case"time":{f.set(g,Ds(k));break}case"controllers":{f.set(g,ql(k));break}case"module_hash":{f.set(g,Yo(k));break}case"subnet":{f.set(g,k);break}case"candid":{f.set(g,new TextDecoder().decode(k));break}default:if(typeof g!="string"&&"key"in g&&"path"in g)switch(g.decodeStrategy){case"raw":f.set(g.key,k);break;case"leb128":{f.set(g.key,Kc(k));break}case"cbor":{f.set(g.key,Xc(k));break}case"hex":{f.set(g.key,Yo(k));break}case"utf-8":f.set(g.key,Cl(k))}}}catch(v){if(!((S=v==null?void 0:v.message)===null||S===void 0)&&S.includes("Invalid certificate"))throw new Me(v.message);typeof p!="string"&&"key"in p&&"path"in p?f.set(p.key,null):f.set(p,null),console.group(),console.warn(`Expected to find result for path ${p}, but instead found nothing.`),console.warn(v),console.groupEnd()}})());return await Promise.all(s),f},Lc=(t,e,r)=>{if(!e._isPrincipal)throw new Error("Invalid canisterId");const n=Ht(new Uint8Array(t)),i=n.tree;let a=n.delegation,f;if(a&&a.subnet_id?f=_e.fromUint8Array(new Uint8Array(a.subnet_id)):!a&&typeof r<"u"?(f=_e.selfAuthenticating(new Uint8Array(r)),a={subnet_id:f.toUint8Array(),certificate:new ArrayBuffer(0)}):(f=_e.selfAuthenticating(_e.fromText("tdb26-jop6k-aogll-7ltgs-eruif-6kk7m-qpktf-gdiqx-mxtrf-vb5e6-eqe").toUint8Array()),a={subnet_id:f.toUint8Array(),certificate:new ArrayBuffer(0)}),!Wc({canisterId:e,subnetId:f,tree:i}))throw new Error("Canister not in range");const p=en(["subnet",a.subnet_id,"node"],i);if(p.status!==He.Found)throw new Error("Node not found");if(p.value instanceof ArrayBuffer)throw new Error("Invalid node tree");const w=$s(p.value),S=new Map;return w.forEach(v=>{const b=_e.from(new Uint8Array(v[1])).toText(),m=en(["public_key"],v[2]);if(m.status!==He.Found)throw new Error("Public key not found");const g=m.value;if(g.byteLength!==44)throw new Error("Invalid public key length");S.set(b,g)}),{subnetId:_e.fromUint8Array(new Uint8Array(a.subnet_id)).toText(),nodeKeys:S}},Ms=(t,e)=>{const r=new TextEncoder,n=a=>new DataView(r.encode(a).buffer).buffer,i=new DataView(e.toUint8Array().buffer).buffer;switch(t){case"time":return[n("time")];case"controllers":return[n("canister"),i,n("controllers")];case"module_hash":return[n("canister"),i,n("module_hash")];case"subnet":return[n("subnet")];case"candid":return[n("canister"),i,n("metadata"),n("candid:service")];default:if("key"in t&&"path"in t)if(typeof t.path=="string"||t.path instanceof ArrayBuffer){const a=t.path,f=typeof a=="string"?n(a):a;return[n("canister"),i,n("metadata"),f]}else return t.path}throw new Error(`An unexpeected error was encountered while encoding your path for canister status. Please ensure that your path, ${t} was formatted correctly.`)},Yo=t=>We(t),Xc=t=>Ht(t),Cl=t=>new TextDecoder().decode(t),ql=t=>Xc(t).map(r=>_e.fromUint8Array(new Uint8Array(r))),Vl=Object.freeze(Object.defineProperty({__proto__:null,CustomPath:Pl,encodePath:Ms,fetchNodeKeys:Lc,request:zc},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Bt=BigInt(0),Ge=BigInt(1),ws=BigInt(2),Gl=BigInt(8);function Hl(t,e,r,n){const i=t.sqr(r),a=t.sqr(n),f=t.add(t.mul(e.a,i),a),s=t.add(t.ONE,t.mul(e.d,t.mul(i,a)));return t.eql(f,s)}function jl(t,e={}){const{Fp:r,Fn:n}=Gc("edwards",t,e),{h:i,n:a}=t;Fn(e,{},{uvRatio:"function"});const f=ws<<BigInt(n.BYTES*8)-Ge,s=k=>r.create(k),p=e.uvRatio||((k,q)=>{try{return{isValid:!0,value:r.sqrt(r.div(k,q))}}catch{return{isValid:!1,value:Bt}}});if(!Hl(r,t,t.Gx,t.Gy))throw new Error("bad curve params: generator point");function w(k,q,X=!1){const K=X?Ge:Bt;return un("coordinate "+k,q,K,f),q}function S(k){if(!(k instanceof m))throw new Error("ExtendedPoint expected")}const v=An((k,q)=>{const{X,Y:K,Z:j}=k,D=k.is0();q==null&&(q=D?Gl:r.inv(j));const R=s(X*q),C=s(K*q),z=r.mul(j,q);if(D)return{x:Bt,y:Ge};if(z!==Ge)throw new Error("invZ was invalid");return{x:R,y:C}}),b=An(k=>{const{a:q,d:X}=t;if(k.is0())throw new Error("bad point: ZERO");const{X:K,Y:j,Z:D,T:R}=k,C=s(K*K),z=s(j*j),te=s(D*D),re=s(te*te),U=s(C*q),H=s(te*s(U+z)),J=s(re+s(X*s(C*z)));if(H!==J)throw new Error("bad point: equation left != right (1)");const x=s(K*j),N=s(D*R);if(x!==N)throw new Error("bad point: equation left != right (2)");return!0});class m{constructor(q,X,K,j){this.X=w("x",q),this.Y=w("y",X),this.Z=w("z",K,!0),this.T=w("t",j),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}get ex(){return this.X}get ey(){return this.Y}get ez(){return this.Z}get et(){return this.T}static normalizeZ(q){return jt(m,q)}static msm(q,X){return Vc(m,n,q,X)}_setWindowSize(q){this.precompute(q)}static fromAffine(q){if(q instanceof m)throw new Error("extended point not allowed");const{x:X,y:K}=q||{};return w("x",X),w("y",K),new m(X,K,Ge,s(X*K))}precompute(q=8,X=!0){return g.createCache(this,q),X||this.multiply(ws),this}assertValidity(){b(this)}equals(q){S(q);const{X,Y:K,Z:j}=this,{X:D,Y:R,Z:C}=q,z=s(X*C),te=s(D*j),re=s(K*C),U=s(R*j);return z===te&&re===U}is0(){return this.equals(m.ZERO)}negate(){return new m(s(-this.X),this.Y,this.Z,s(-this.T))}double(){const{a:q}=t,{X,Y:K,Z:j}=this,D=s(X*X),R=s(K*K),C=s(ws*s(j*j)),z=s(q*D),te=X+K,re=s(s(te*te)-D-R),U=z+R,H=U-C,J=z-R,x=s(re*H),N=s(U*J),$=s(re*J),L=s(H*U);return new m(x,N,L,$)}add(q){S(q);const{a:X,d:K}=t,{X:j,Y:D,Z:R,T:C}=this,{X:z,Y:te,Z:re,T:U}=q,H=s(j*z),J=s(D*te),x=s(C*K*U),N=s(R*re),$=s((j+D)*(z+te)-H-J),L=N-x,ee=N+x,Q=s(J-X*H),ne=s($*L),he=s(ee*Q),oe=s($*Q),ie=s(L*ee);return new m(ne,he,ie,oe)}subtract(q){return this.add(q.negate())}multiply(q){const X=q;un("scalar",X,Ge,a);const{p:K,f:j}=g.cached(this,X,D=>jt(m,D));return jt(m,[K,j])[0]}multiplyUnsafe(q,X=m.ZERO){const K=q;return un("scalar",K,Bt,a),K===Bt?m.ZERO:this.is0()||K===Ge?this:g.unsafe(this,K,j=>jt(m,j),X)}isSmallOrder(){return this.multiplyUnsafe(i).is0()}isTorsionFree(){return g.unsafe(this,a).is0()}toAffine(q){return v(this,q)}clearCofactor(){return i===Ge?this:this.multiplyUnsafe(i)}static fromBytes(q,X=!1){return it(q),m.fromHex(q,X)}static fromHex(q,X=!1){const{d:K,a:j}=t,D=r.BYTES;q=ut("pointHex",q,D),xn("zip215",X);const R=q.slice(),C=q[D-1];R[D-1]=C&-129;const z=En(R),te=X?f:r.ORDER;un("pointHex.y",z,Bt,te);const re=s(z*z),U=s(re-Ge),H=s(K*re-j);let{isValid:J,value:x}=p(U,H);if(!J)throw new Error("Point.fromHex: invalid y coordinate");const N=(x&Ge)===Ge,$=(C&128)!==0;if(!X&&x===Bt&&$)throw new Error("Point.fromHex: x=0 and x_0=1");return $!==N&&(x=s(-x)),m.fromAffine({x,y:z})}toBytes(){const{x:q,y:X}=this.toAffine(),K=Pi(X,r.BYTES);return K[K.length-1]|=q&Ge?128:0,K}toRawBytes(){return this.toBytes()}toHex(){return Jr(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}m.BASE=new m(t.Gx,t.Gy,Ge,s(t.Gx*t.Gy)),m.ZERO=new m(Bt,Ge,Ge,Bt),m.Fp=r,m.Fn=n;const g=new qc(m,n.BYTES*8);return m}function Yl(t,e,r){if(typeof e!="function")throw new Error('"hash" function param is required');Fn(r,{},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});const{prehash:n}=r,{BASE:i,Fp:a,Fn:f}=t,s=f.ORDER,p=r.randomBytes||ha,w=r.adjustScalarBytes||(H=>H),S=r.domain||((H,J,x)=>{if(xn("phflag",x),J.length||x)throw new Error("Contexts/pre-hash are not supported");return H});function v(H){return f.create(H)}function b(H){return v(En(H))}function m(H){const J=a.BYTES;H=ut("private key",H,J);const x=ut("hashed private key",e(H),2*J),N=w(x.slice(0,J)),$=x.slice(J,2*J),L=b(N);return{head:N,prefix:$,scalar:L}}function g(H){const{head:J,prefix:x,scalar:N}=m(H),$=i.multiply(N),L=$.toBytes();return{head:J,prefix:x,scalar:N,point:$,pointBytes:L}}function k(H){return g(H).pointBytes}function q(H=Uint8Array.of(),...J){const x=Ce(...J);return b(e(S(x,ut("context",H),!!n)))}function X(H,J,x={}){H=ut("message",H),n&&(H=n(H));const{prefix:N,scalar:$,pointBytes:L}=g(J),ee=q(x.context,N,H),Q=i.multiply(ee).toBytes(),ne=q(x.context,Q,L,H),he=v(ee+ne*$);un("signature.s",he,Bt,s);const oe=a.BYTES,ie=Ce(Q,Pi(he,oe));return ut("result",ie,oe*2)}const K={zip215:!0};function j(H,J,x,N=K){const{context:$,zip215:L}=N,ee=a.BYTES;H=ut("signature",H,2*ee),J=ut("message",J),x=ut("publicKey",x,ee),L!==void 0&&xn("zip215",L),n&&(J=n(J));const Q=En(H.slice(ee,2*ee));let ne,he,oe;try{ne=t.fromHex(x,L),he=t.fromHex(H.slice(0,ee),L),oe=i.multiplyUnsafe(Q)}catch{return!1}if(!L&&ne.isSmallOrder())return!1;const ie=q($,he.toBytes(),ne.toBytes(),J);return he.add(ne.multiplyUnsafe(ie)).subtract(oe).clearCofactor().is0()}i.precompute(8);const D=a.BYTES,R={secret:D,public:D,signature:2*D,seed:D};function C(H=p(R.seed)){return H}const z={getExtendedPublicKey:g,randomSecretKey:C,isValidSecretKey:re,isValidPublicKey:U,randomPrivateKey:C,toMontgomery(H){const{y:J}=t.fromBytes(H),x=D===32;if(!x&&D!==57)throw new Error("only defined for 25519 and 448");const N=x?a.div(Ge+J,Ge-J):a.div(J-Ge,J+Ge);return a.toBytes(N)},toMontgomeryPriv(H){it(H,D);const J=e(H.subarray(0,D));return w(J).subarray(0,D)},precompute(H=8,J=t.BASE){return J.precompute(H,!1)}};function te(H){const J=z.randomSecretKey(H);return{secretKey:J,publicKey:k(J)}}function re(H){try{return!!f.fromBytes(H,!1)}catch{return!1}}function U(H,J){try{return!!t.fromBytes(H,J)}catch{return!1}}return Object.freeze({keygen:te,getPublicKey:k,sign:X,verify:j,utils:z,Point:t,info:{type:"edwards",lengths:R}})}function Zl(t){const e={a:t.a,d:t.d,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},r=t.Fp,n=sr(e.n,t.nBitLength,!0),i={Fp:r,Fn:n,uvRatio:t.uvRatio},a={randomBytes:t.randomBytes,adjustScalarBytes:t.adjustScalarBytes,domain:t.domain,prehash:t.prehash,mapToCurve:t.mapToCurve};return{CURVE:e,curveOpts:i,hash:t.hash,eddsaOpts:a}}function Kl(t,e){return Object.assign({},e,{ExtendedPoint:e.Point,CURVE:t})}function Wl(t){const{CURVE:e,curveOpts:r,hash:n,eddsaOpts:i}=Zl(t),a=jl(e,r),f=Yl(a,n,i);return Kl(t,f)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */BigInt(0);const zl=BigInt(1),Zo=BigInt(2);BigInt(3);const Ll=BigInt(5),Xl=BigInt(8),Hi={p:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:Xl,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function Jl(t){const e=BigInt(10),r=BigInt(20),n=BigInt(40),i=BigInt(80),a=Hi.p,s=t*t%a*t%a,p=At(s,Zo,a)*s%a,w=At(p,zl,a)*t%a,S=At(w,Ll,a)*w%a,v=At(S,e,a)*S%a,b=At(v,r,a)*v%a,m=At(b,n,a)*b%a,g=At(m,i,a)*m%a,k=At(g,i,a)*m%a,q=At(k,e,a)*S%a;return{pow_p_5_8:At(q,Zo,a)*t%a,b2:s}}function Ql(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const Ko=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function Dl(t,e){const r=Hi.p,n=Pe(e*e*e,r),i=Pe(n*n*e,r),a=Jl(t*i).pow_p_5_8;let f=Pe(t*n*a,r);const s=Pe(e*f*f,r),p=f,w=Pe(f*Ko,r),S=s===t,v=s===Pe(-t,r),b=s===Pe(-t*Ko,r);return S&&(f=p),(v||b)&&(f=w),z0(f,r)&&(f=Pe(-f,r)),{isValid:S||v,value:f}}const eh=(()=>sr(Hi.p,{isLE:!0}))(),th=(()=>({...Hi,Fp:eh,hash:Ef,adjustScalarBytes:Ql,uvRatio:Dl}))(),rh=(()=>Wl(th))();var Wo=globalThis&&globalThis.__classPrivateFieldSet||function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},at=globalThis&&globalThis.__classPrivateFieldGet||function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},tt,ln,Jc,Qc;class nh{constructor(e={}){tt.set(this,void 0),ln.set(this,void 0),this[Jc]=this.entries.bind(this),this[Qc]="ExpirableMap";const{source:r=[],expirationTime:n=10*60*1e3}=e,i=Date.now();Wo(this,tt,new Map([...r].map(([a,f])=>[a,{value:f,timestamp:i}])),"f"),Wo(this,ln,n,"f")}prune(){const e=Date.now();for(const[r,n]of at(this,tt,"f").entries())e-n.timestamp>at(this,ln,"f")&&at(this,tt,"f").delete(r);return this}set(e,r){this.prune();const n={value:r,timestamp:Date.now()};return at(this,tt,"f").set(e,n),this}get(e){const r=at(this,tt,"f").get(e);if(r!==void 0){if(Date.now()-r.timestamp>at(this,ln,"f")){at(this,tt,"f").delete(e);return}return r.value}}clear(){at(this,tt,"f").clear()}entries(){const e=at(this,tt,"f").entries();return function*(){for(const[n,i]of e)yield[n,i.value]}()}values(){const e=at(this,tt,"f").values();return function*(){for(const n of e)yield n.value}()}keys(){return at(this,tt,"f").keys()}forEach(e,r){for(const[n,i]of at(this,tt,"f").entries())e.call(r,i.value,n,this)}has(e){return at(this,tt,"f").has(e)}delete(e){return at(this,tt,"f").delete(e)}get size(){return at(this,tt,"f").size}}tt=new WeakMap,ln=new WeakMap,Jc=Symbol.iterator,Qc=Symbol.toStringTag;const zo=t=>{if(t<=127)return 1;if(t<=255)return 2;if(t<=65535)return 3;if(t<=16777215)return 4;throw new Error("Length too long (> 4 bytes)")},Lo=(t,e,r)=>{if(r<=127)return t[e]=r,1;if(r<=255)return t[e]=129,t[e+1]=r,2;if(r<=65535)return t[e]=130,t[e+1]=r>>8,t[e+2]=r,3;if(r<=16777215)return t[e]=131,t[e+1]=r>>16,t[e+2]=r>>8,t[e+3]=r,4;throw new Error("Length too long (> 4 bytes)")},ks=(t,e)=>{if(t[e]<128)return 1;if(t[e]===128)throw new Error("Invalid length 0");if(t[e]===129)return 2;if(t[e]===130)return 3;if(t[e]===131)return 4;throw new Error("Length too long (> 4 bytes)")},ih=(t,e)=>{const r=ks(t,e);if(r===1)return t[e];if(r===2)return t[e+1];if(r===3)return(t[e+1]<<8)+t[e+2];if(r===4)return(t[e+1]<<16)+(t[e+2]<<8)+t[e+3];throw new Error("Length too long (> 4 bytes)")};Uint8Array.from([48,12,6,10,43,6,1,4,1,131,184,67,1,1]);const Xo=Uint8Array.from([48,5,6,3,43,101,112]);Uint8Array.from([48,16,6,7,42,134,72,206,61,2,1,6,5,43,129,4,0,10]);function sh(t,e){const r=2+zo(t.byteLength+1),n=e.byteLength+r+t.byteLength;let i=0;const a=new Uint8Array(1+zo(n)+n);return a[i++]=48,i+=Lo(a,i,n),a.set(e,i),i+=e.byteLength,a[i++]=3,i+=Lo(a,i,t.byteLength+1),a[i++]=0,a.set(new Uint8Array(t),i),a}const oh=(t,e)=>{let r=0;const n=(s,p)=>{if(i[r++]!==s)throw new Error("Expected: "+p)},i=new Uint8Array(t);if(n(48,"sequence"),r+=ks(i,r),!Ni(i.slice(r,r+e.byteLength),e))throw new Error("Not the expected OID.");r+=e.byteLength,n(3,"bit string");const a=ih(i,r)-1;r+=ks(i,r),n(0,"0 padding");const f=i.slice(r);if(a!==f.length)throw new Error(`DER payload mismatch: Expected length ${a} actual length ${f.length}`);return f};var Jo=globalThis&&globalThis.__classPrivateFieldSet||function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},Qo=globalThis&&globalThis.__classPrivateFieldGet||function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},ri,ni;class wr{constructor(e){if(ri.set(this,void 0),ni.set(this,void 0),e.byteLength!==wr.RAW_KEY_LENGTH)throw new Error("An Ed25519 public key must be exactly 32bytes long");Jo(this,ri,e,"f"),Jo(this,ni,wr.derEncode(e),"f")}static from(e){return this.fromDer(e.toDer())}static fromRaw(e){return new wr(e)}static fromDer(e){return new wr(this.derDecode(e))}static derEncode(e){return sh(e,Xo).buffer}static derDecode(e){const r=oh(e,Xo);if(r.length!==this.RAW_KEY_LENGTH)throw new Error("An Ed25519 public key must be exactly 32bytes long");return r}get rawKey(){return Qo(this,ri,"f")}get derKey(){return Qo(this,ni,"f")}toDer(){return this.derKey}toRaw(){return this.rawKey}}ri=new WeakMap,ni=new WeakMap;wr.RAW_KEY_LENGTH=32;class ah{constructor(){this.observers=[]}subscribe(e){this.observers.push(e)}unsubscribe(e){this.observers=this.observers.filter(r=>r!==e)}notify(e,...r){this.observers.forEach(n=>n(e,...r))}}class ch extends ah{constructor(){super()}print(e,...r){this.notify({message:e,level:"info"},...r)}warn(e,...r){this.notify({message:e,level:"warn"},...r)}error(e,r,...n){this.notify({message:e,level:"error",error:r},...n)}}var vt=globalThis&&globalThis.__classPrivateFieldSet||function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},et=globalThis&&globalThis.__classPrivateFieldGet||function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},Tt,ii,si,oi,ai,ci,ui,fi,kr;const Dc=.5,eu=1.5,tu=500,ru=6e4,nu=9e5,iu=10;class ji{constructor(e=ji.default){Tt.set(this,void 0),ii.set(this,void 0),si.set(this,void 0),oi.set(this,void 0),ai.set(this,void 0),ci.set(this,void 0),ui.set(this,void 0),fi.set(this,void 0),kr.set(this,0);const{initialInterval:r=tu,randomizationFactor:n=Dc,multiplier:i=eu,maxInterval:a=ru,maxElapsedTime:f=nu,maxIterations:s=iu,date:p=Date}=e;vt(this,Tt,r,"f"),vt(this,ii,n,"f"),vt(this,si,i,"f"),vt(this,oi,a,"f"),vt(this,fi,p,"f"),vt(this,ai,p.now(),"f"),vt(this,ci,f,"f"),vt(this,ui,s,"f")}get ellapsedTimeInMsec(){return et(this,fi,"f").now()-et(this,ai,"f")}get currentInterval(){return et(this,Tt,"f")}get count(){return et(this,kr,"f")}get randomValueFromInterval(){const e=et(this,ii,"f")*et(this,Tt,"f"),r=et(this,Tt,"f")-e,n=et(this,Tt,"f")+e;return Math.random()*(n-r)+r}incrementCurrentInterval(){var e;return vt(this,Tt,Math.min(et(this,Tt,"f")*et(this,si,"f"),et(this,oi,"f")),"f"),vt(this,kr,(e=et(this,kr,"f"),e++,e),"f"),et(this,Tt,"f")}next(){return this.ellapsedTimeInMsec>=et(this,ci,"f")||et(this,kr,"f")>=et(this,ui,"f")?null:(this.incrementCurrentInterval(),this.randomValueFromInterval)}}Tt=new WeakMap,ii=new WeakMap,si=new WeakMap,oi=new WeakMap,ai=new WeakMap,ci=new WeakMap,ui=new WeakMap,fi=new WeakMap,kr=new WeakMap;ji.default={initialInterval:tu,randomizationFactor:Dc,multiplier:eu,maxInterval:ru,maxElapsedTime:nu,maxIterations:iu,date:Date};var Xe=globalThis&&globalThis.__classPrivateFieldSet||function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},ae=globalThis&&globalThis.__classPrivateFieldGet||function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},rt,ar,Kr,St,Pt,jr,hn,Pr,mt,bt,cr,ur,dn,Cr,qr,fr,hr,su,li,hi,lr,Ct;(function(t){t.Received="received",t.Processing="processing",t.Replied="replied",t.Rejected="rejected",t.Unknown="unknown",t.Done="done"})(Ct||(Ct={}));const Kn=60*1e3,uh="308182301d060d2b0601040182dc7c0503010201060c2b0601040182dc7c05030201036100814c0e6ec71fab583b08bd81373c255c3c371b2e84863c98a4f1e08b74235d14fb5d9c0cd546d9685f913a0c0b2cc5341583bf4b4392e467db96d65b9bb4cb717112f8472e0d5a4d14505ffd7484b01291091c5f87b98883463f98091a0baaae",fh="aaaaa-aa",lh="ic0.app",hh=".ic0.app",dh="icp0.io",ph=".icp0.io",yh="icp-api.io",gh=".icp-api.io";class ms extends Me{constructor(e){super(e),this.message=e}}class Wn extends Me{constructor(e){super(e),this.message=e}}function wh(){let t;if(typeof window<"u")if(window.fetch)t=window.fetch.bind(window);else throw new ms("Fetch implementation was not available. You appear to be in a browser context, but window.fetch was not present.");else if(typeof global<"u")if(global.fetch)t=global.fetch.bind(global);else throw new ms("Fetch implementation was not available. You appear to be in a Node.js context, but global.fetch was not available.");else typeof self<"u"&&self.fetch&&(t=self.fetch.bind(self));if(t)return t;throw new ms("Fetch implementation was not available. Please provide fetch to the HttpAgent constructor, or ensure it is available in the window or global context.")}function mh(t){let e;if(t!==void 0)!t.match(/^[a-z]+:/)&&typeof window<"u"?e=new URL(window.location.protocol+"//"+t):e=new URL(t);else{const r=["ic0.app","icp0.io","127.0.0.1","localhost"],n=[".github.dev",".gitpod.io"],i=typeof window<"u"?window.location:void 0,a=i==null?void 0:i.hostname;let f;a&&typeof a=="string"&&(n.some(s=>a.endsWith(s))?f=a:f=r.find(s=>a.endsWith(s))),i&&f?e=new URL(`${i.protocol}//${f}${i.port?":"+i.port:""}`):e=new URL("https://icp-api.io")}return e.toString()}class Yr{constructor(e={}){var r,n;rt.add(this),ar.set(this,null),Kr.set(this,!1),St.set(this,void 0),Pt.set(this,void 0),jr.set(this,void 0),hn.set(this,void 0),Pr.set(this,0),mt.set(this,void 0),bt.set(this,void 0),cr.set(this,void 0),ur.set(this,void 0),this._isAgent=!0,this.config={},dn.set(this,0),this.log=new ch,Cr.set(this,[]),qr.set(this,[]),fr.set(this,new nh({expirationTime:5*60*1e3})),hr.set(this,!0),hi.set(this,(f,s)=>{if(ae(this,hr,"f")===!1)return f;if(!s)throw new It("Invalid signature from replica signed query: no matching node key found.");const{status:p,signatures:w=[],requestId:S}=f,v=an(new TextEncoder().encode("\vic-response"));for(const b of w){const{timestamp:m,identity:g}=b,k=_e.fromUint8Array(g).toText();let q;if(p==="replied"){const{reply:R}=f;q=bi({status:p,reply:R,timestamp:BigInt(m),request_id:S})}else if(p==="rejected"){const{reject_code:R,reject_message:C,error_code:z}=f;q=bi({status:p,reject_code:R,reject_message:C,error_code:z,timestamp:BigInt(m),request_id:S})}else throw new Error(`Unknown status: ${p}`);const X=Ot(v,an(new Uint8Array(q))),K=s==null?void 0:s.nodeKeys.get(k);if(!K)throw new It("Invalid signature from replica signed query: no matching node key found.");const j=wr.fromDer(K).rawKey;if(rh.verify(b.signature,new Uint8Array(X),new Uint8Array(j)))return f;throw new It(`Invalid signature from replica ${k} signed query.`)}return f}),this.config=e,Xe(this,Pt,e.fetch||wh()||fetch.bind(global),"f"),Xe(this,jr,e.fetchOptions,"f"),Xe(this,hn,e.callOptions,"f"),Xe(this,Kr,(r=e.shouldFetchRootKey)!==null&&r!==void 0?r:!1,"f"),e.rootKey?this.rootKey=e.rootKey:ae(this,Kr,"f")?this.rootKey=null:this.rootKey=yi(uh);const i=mh(e.host);this.host=new URL(i),e.verifyQuerySignatures!==void 0&&Xe(this,hr,e.verifyQuerySignatures,"f"),Xe(this,bt,(n=e.retryTimes)!==null&&n!==void 0?n:3,"f");const a=()=>new ji({maxIterations:ae(this,bt,"f")});if(Xe(this,cr,e.backoffStrategy||a,"f"),this.host.hostname.endsWith(hh)?this.host.hostname=lh:this.host.hostname.endsWith(ph)?this.host.hostname=dh:this.host.hostname.endsWith(gh)&&(this.host.hostname=yh),e.credentials){const{name:f,password:s}=e.credentials;Xe(this,mt,`${f}${s?":"+s:""}`,"f")}if(Xe(this,St,Promise.resolve(e.identity||new Bo),"f"),e.ingressExpiryInMinutes&&e.ingressExpiryInMinutes>5)throw new Me(`The maximum ingress expiry time is 5 minutes. Provided ingress expiry time is ${e.ingressExpiryInMinutes} minutes.`);if(e.ingressExpiryInMinutes&&e.ingressExpiryInMinutes<=0)throw new Me(`Ingress expiry time must be greater than 0. Provided ingress expiry time is ${e.ingressExpiryInMinutes} minutes.`);Xe(this,ur,e.ingressExpiryInMinutes||5,"f"),this.addTransform("update",No(Us)),e.useQueryNonces&&this.addTransform("query",No(Us)),e.logToConsole&&this.log.subscribe(f=>{f.level==="error"?console.error(f.message):f.level==="warn"?console.warn(f.message):console.log(f.message)})}get waterMark(){return ae(this,dn,"f")}static createSync(e={}){return new this(Object.assign({},e))}static async create(e={shouldFetchRootKey:!1}){const r=Yr.createSync(e),n=[r.syncTime()];return r.host.toString()!=="https://icp-api.io"&&e.shouldFetchRootKey&&n.push(r.fetchRootKey()),await Promise.all(n),r}static async from(e){var r;try{return"config"in e?await Yr.create(e.config):await Yr.create({fetch:e._fetch,fetchOptions:e._fetchOptions,callOptions:e._callOptions,host:e._host.toString(),identity:(r=e._identity)!==null&&r!==void 0?r:void 0})}catch{throw new Me("Failed to create agent from provided agent")}}isLocal(){const e=this.host.hostname;return e==="127.0.0.1"||e.endsWith("127.0.0.1")}addTransform(e,r,n=r.priority||0){if(e==="update"){const i=ae(this,qr,"f").findIndex(a=>(a.priority||0)<n);ae(this,qr,"f").splice(i>=0?i:ae(this,qr,"f").length,0,Object.assign(r,{priority:n}))}else if(e==="query"){const i=ae(this,Cr,"f").findIndex(a=>(a.priority||0)<n);ae(this,Cr,"f").splice(i>=0?i:ae(this,Cr,"f").length,0,Object.assign(r,{priority:n}))}}async getPrincipal(){if(!ae(this,St,"f"))throw new Wn("This identity has expired due this application's security policy. Please refresh your authentication.");return(await ae(this,St,"f")).getPrincipal()}async call(e,r,n){var i,a;await ae(this,rt,"m",lr).call(this);const f=(i=r.callSync)!==null&&i!==void 0?i:!0,s=await(n!==void 0?await n:await ae(this,St,"f"));if(!s)throw new Wn("This identity has expired due this application's security policy. Please refresh your authentication.");const p=_e.from(e),w=r.effectiveCanisterId?_e.from(r.effectiveCanisterId):p,S=s.getPrincipal()||_e.anonymous();let v=new Yn(ae(this,ur,"f")*Kn);Math.abs(ae(this,Pr,"f"))>1e3*30&&(v=new Yn(ae(this,ur,"f")*Kn+ae(this,Pr,"f")));const b={request_type:Rs.Call,canister_id:p,method_name:r.methodName,arg:r.arg,sender:S,ingress_expiry:v};let m=await this._transform({request:{body:null,method:"POST",headers:Object.assign({"Content-Type":"application/cbor"},ae(this,mt,"f")?{Authorization:"Basic "+btoa(ae(this,mt,"f"))}:{})},endpoint:"call",body:b}),g;r!=null&&r.nonce?g=k(r.nonce):m.body.nonce?g=k(m.body.nonce):g=void 0,b.nonce=g;function k(j){return new Uint8Array(j)}m=await s.transformRequest(m);const q=is(m.body),X=ae(this,cr,"f").call(this),K=vo(b);try{const j=()=>(this.log.print(`fetching "/api/v3/canister/${w.toText()}/call" with request:`,m),ae(this,Pt,"f").call(this,""+new URL(`/api/v3/canister/${w.toText()}/call`,this.host),Object.assign(Object.assign(Object.assign({},ae(this,hn,"f")),m.request),{body:q}))),D=()=>(this.log.print(`fetching "/api/v2/canister/${w.toText()}/call" with request:`,m),ae(this,Pt,"f").call(this,""+new URL(`/api/v2/canister/${w.toText()}/call`,this.host),Object.assign(Object.assign(Object.assign({},ae(this,hn,"f")),m.request),{body:q}))),C=await ae(this,rt,"m",li).call(this,{request:f?j:D,backoff:X,tries:0}),z=await C.arrayBuffer(),te=C.status===200&&z.byteLength>0?Ht(z):null;if(te&&"certificate"in te){const re=await this.parseTimeFromResponse({certificate:te.certificate});Xe(this,dn,re,"f")}return{requestId:K,response:{ok:C.ok,status:C.status,statusText:C.statusText,body:te,headers:cn(C.headers)},requestDetails:b}}catch(j){if(j.message.includes("v3 api not supported."))return this.log.warn("v3 api not supported. Fall back to v2"),this.call(e,Object.assign(Object.assign({},r),{callSync:!1}),n);const D=`Error while making call: ${(a=j.message)!==null&&a!==void 0?a:String(j)}`,R=new C0(D,j,We(K),We(m.body.sender_pubkey),We(m.body.sender_sig),String(m.body.content.ingress_expiry._value));throw this.log.error(D,R),R}}async query(e,r,n){var i,a,f,s;await ae(this,rt,"m",lr).call(this);const p=ae(this,cr,"f").call(this),w=r.effectiveCanisterId?_e.from(r.effectiveCanisterId):_e.from(e);this.log.print(`ecid ${w.toString()}`),this.log.print(`canisterId ${e.toString()}`);let S,v;const b=await(n!==void 0?n:ae(this,St,"f"));if(!b)throw new Wn("This identity has expired due this application's security policy. Please refresh your authentication.");const m=_e.from(e),g=(b==null?void 0:b.getPrincipal())||_e.anonymous(),k={request_type:"query",canister_id:m,method_name:r.methodName,arg:r.arg,sender:g,ingress_expiry:new Yn(ae(this,ur,"f")*Kn)},q=vo(k);S=await this._transform({request:{method:"POST",headers:Object.assign({"Content-Type":"application/cbor"},ae(this,mt,"f")?{Authorization:"Basic "+btoa(ae(this,mt,"f"))}:{})},endpoint:"read",body:k}),S=await(b==null?void 0:b.transformRequest(S));const X=is(S.body),K={canister:m.toText(),ecid:w,transformedRequest:S,body:X,requestId:q,backoff:p,tries:0},j=async()=>({requestDetails:k,query:await ae(this,rt,"m",su).call(this,K)}),D=async()=>{if(!ae(this,hr,"f"))return;const R=ae(this,fr,"f").get(w.toString());return R||(await this.fetchSubnetKeys(w.toString()),ae(this,fr,"f").get(w.toString()))};try{const[R,C]=await Promise.all([j(),D()]);v=R;const{requestDetails:z,query:te}=v,re=Object.assign(Object.assign({},te),{requestDetails:z});if(this.log.print("Query response:",re),!ae(this,hr,"f"))return re;try{return ae(this,hi,"f").call(this,re,C)}catch{this.log.warn("Query response verification failed. Retrying with fresh subnet keys."),ae(this,fr,"f").delete(e.toString()),await this.fetchSubnetKeys(w.toString());const H=ae(this,fr,"f").get(e.toString());if(!H)throw new It("Invalid signature from replica signed query: no matching node key found.");return ae(this,hi,"f").call(this,re,H)}}catch(R){const C=`Error while making call: ${(i=R.message)!==null&&i!==void 0?i:String(R)}`,z=new q0(C,R,String(q),We((a=S==null?void 0:S.body)===null||a===void 0?void 0:a.sender_pubkey),We((f=S==null?void 0:S.body)===null||f===void 0?void 0:f.sender_sig),String((s=S==null?void 0:S.body)===null||s===void 0?void 0:s.content.ingress_expiry._value));throw this.log.error(C,z),z}}async createReadStateRequest(e,r){await ae(this,rt,"m",lr).call(this);const n=await(r!==void 0?await r:await ae(this,St,"f"));if(!n)throw new Wn("This identity has expired due this application's security policy. Please refresh your authentication.");const i=(n==null?void 0:n.getPrincipal())||_e.anonymous(),a=await this._transform({request:{method:"POST",headers:Object.assign({"Content-Type":"application/cbor"},ae(this,mt,"f")?{Authorization:"Basic "+btoa(ae(this,mt,"f"))}:{})},endpoint:"read_state",body:{request_type:"read_state",paths:e.paths,sender:i,ingress_expiry:new Yn(ae(this,ur,"f")*Kn)}});return n==null?void 0:n.transformRequest(a)}async readState(e,r,n,i){var a,f,s,p;function w(k){for(const q of k.paths){const[X,K]=q,j=an(new TextEncoder().encode("request_status"));if(Ni(X,j))return K}}const S=w(r);await ae(this,rt,"m",lr).call(this);const v=typeof e=="string"?_e.fromText(e):e,b=i??await this.createReadStateRequest(r,n),m=is(b.body);this.log.print(`fetching "/api/v2/canister/${v}/read_state" with request:`,b);const g=ae(this,cr,"f").call(this);try{const k=await ae(this,rt,"m",li).call(this,{request:()=>ae(this,Pt,"f").call(this,""+new URL(`/api/v2/canister/${v.toString()}/read_state`,this.host),Object.assign(Object.assign(Object.assign({},ae(this,jr,"f")),b.request),{body:m})),backoff:g,tries:0});if(!k.ok)throw new Error(`Server returned an error:
  Code: ${k.status} (${k.statusText})
  Body: ${await k.text()}
`);const q=Ht(await k.arrayBuffer());this.log.print("Read state response:",q);const X=await this.parseTimeFromResponse(q);return X>0&&(this.log.print("Read state response time:",X),Xe(this,dn,X,"f")),q}catch(k){const q=`Caught exception while attempting to read state: ${(a=k.message)!==null&&a!==void 0?a:String(k)}`,X=new V0(q,k,String(S),We((f=b==null?void 0:b.body)===null||f===void 0?void 0:f.sender_pubkey),We((s=b==null?void 0:b.body)===null||s===void 0?void 0:s.sender_sig),String((p=b==null?void 0:b.body)===null||p===void 0?void 0:p.content.ingress_expiry._value));throw this.log.error(q,X),X}}async parseTimeFromResponse(e){let r;if(e.certificate){const n=Ht(e.certificate);if(n&&"tree"in n)r=n.tree;else throw new Error("Could not decode time from response");const i=en(["time"],r);if(i.status!==He.Found)throw new Error("Time was not found in the response or was not in its expected format.");if(!(i.value instanceof ArrayBuffer)&&!ArrayBuffer.isView(i))throw new Error("Time was not found in the response or was not in its expected format.");const a=Ds(an(i.value));return this.log.print("Time from response:",a),this.log.print("Time from response in milliseconds:",Number(a)),Number(a)}else this.log.warn("No certificate found in response");return 0}async syncTime(e){await ae(this,rt,"m",lr).call(this);const r=await Lu(()=>Promise.resolve().then(()=>Vl),void 0),n=Date.now();try{e||this.log.print("Syncing time with the IC. No canisterId provided, so falling back to ryjl3-tyaaa-aaaaa-aaaba-cai");const i=Yr.createSync({identity:new Bo,host:this.host.toString(),fetch:ae(this,Pt,"f"),retryTimes:0}),f=(await r.request({canisterId:e??_e.from("ryjl3-tyaaa-aaaaa-aaaba-cai"),agent:i,paths:["time"]})).get("time");f&&(Xe(this,Pr,Number(f)-Number(n),"f"),this.log.notify({message:`Syncing time: offset of ${ae(this,Pr,"f")}`,level:"info"}))}catch(i){this.log.error("Caught exception while attempting to sync time",i)}}async status(){const e=ae(this,mt,"f")?{Authorization:"Basic "+btoa(ae(this,mt,"f"))}:{};this.log.print('fetching "/api/v2/status"');const r=ae(this,cr,"f").call(this),n=await ae(this,rt,"m",li).call(this,{backoff:r,request:()=>ae(this,Pt,"f").call(this,""+new URL("/api/v2/status",this.host),Object.assign({headers:e},ae(this,jr,"f"))),tries:0});return Ht(await n.arrayBuffer())}async fetchRootKey(){let e;return ae(this,ar,"f")?e=await ae(this,ar,"f"):(Xe(this,ar,new Promise((r,n)=>{this.status().then(i=>{const a=i.root_key;this.rootKey=a,r(a)}).catch(n)}),"f"),e=await ae(this,ar,"f")),Xe(this,ar,null,"f"),e}invalidateIdentity(){Xe(this,St,null,"f")}replaceIdentity(e){Xe(this,St,Promise.resolve(e),"f")}async fetchSubnetKeys(e){await ae(this,rt,"m",lr).call(this);const r=_e.from(e),i=(await zc({canisterId:r,paths:["subnet"],agent:this})).get("subnet");if(i&&typeof i=="object"&&"nodeKeys"in i)return ae(this,fr,"f").set(r.toText(),i),i}_transform(e){let r=Promise.resolve(e);if(e.endpoint==="call")for(const n of ae(this,qr,"f"))r=r.then(i=>n(i).then(a=>a||i));else for(const n of ae(this,Cr,"f"))r=r.then(i=>n(i).then(a=>a||i));return r}}ar=new WeakMap,Kr=new WeakMap,St=new WeakMap,Pt=new WeakMap,jr=new WeakMap,hn=new WeakMap,Pr=new WeakMap,mt=new WeakMap,bt=new WeakMap,cr=new WeakMap,ur=new WeakMap,dn=new WeakMap,Cr=new WeakMap,qr=new WeakMap,fr=new WeakMap,hr=new WeakMap,hi=new WeakMap,rt=new WeakSet,su=async function t(e){var r,n;const{ecid:i,transformedRequest:a,body:f,requestId:s,backoff:p,tries:w}=e,S=w===0?0:p.next();if(this.log.print(`fetching "/api/v2/canister/${i.toString()}/query" with tries:`,{tries:w,backoff:p,delay:S}),S===null)throw new Me(`Timestamp failed to pass the watermark after retrying the configured ${ae(this,bt,"f")} times. We cannot guarantee the integrity of the response since it could be a replay attack.`);S>0&&await new Promise(g=>setTimeout(g,S));let v;try{this.log.print(`fetching "/api/v2/canister/${i.toString()}/query" with request:`,a);const g=await ae(this,Pt,"f").call(this,""+new URL(`/api/v2/canister/${i.toString()}/query`,this.host),Object.assign(Object.assign(Object.assign({},ae(this,jr,"f")),a.request),{body:f}));if(g.status===200){const k=Ht(await g.arrayBuffer());v=Object.assign(Object.assign({},k),{httpDetails:{ok:g.ok,status:g.status,statusText:g.statusText,headers:cn(g.headers)},requestId:s})}else throw new ss(`Gateway returned an error:
  Code: ${g.status} (${g.statusText})
  Body: ${await g.text()}
`,{ok:g.ok,status:g.status,statusText:g.statusText,headers:cn(g.headers)})}catch(g){if(w<ae(this,bt,"f"))return this.log.warn(`Caught exception while attempting to make query:
  ${g}
  Retrying query.`),await ae(this,rt,"m",t).call(this,Object.assign(Object.assign({},e),{tries:w+1}));throw g}const b=(n=(r=v.signatures)===null||r===void 0?void 0:r[0])===null||n===void 0?void 0:n.timestamp;if(!ae(this,hr,"f"))return v;if(!b)throw new Error("Timestamp not found in query response. This suggests a malformed or malicious response.");const m=Number(BigInt(b)/BigInt(1e6));if(this.log.print("watermark and timestamp",{waterMark:this.waterMark,timestamp:m}),Number(this.waterMark)>m){const g=new Me("Timestamp is below the watermark. Retrying query.");if(this.log.error("Timestamp is below",g,{timestamp:b,waterMark:this.waterMark}),w<ae(this,bt,"f"))return await ae(this,rt,"m",t).call(this,Object.assign(Object.assign({},e),{tries:w+1}));throw new Me(`Timestamp failed to pass the watermark after retrying the configured ${ae(this,bt,"f")} times. We cannot guarantee the integrity of the response since it could be a replay attack.`)}return v},li=async function t(e){const{request:r,backoff:n,tries:i}=e,a=i===0?0:n.next();if(a===null)throw new Me(`Timestamp failed to pass the watermark after retrying the configured ${ae(this,bt,"f")} times. We cannot guarantee the integrity of the response since it could be a replay attack.`);a>0&&await new Promise(w=>setTimeout(w,a));let f;try{f=await r()}catch(w){if(ae(this,bt,"f")>i)return this.log.warn(`Caught exception while attempting to make request:
  ${w}
  Retrying request.`),await ae(this,rt,"m",t).call(this,{request:r,backoff:n,tries:i+1});throw w}if(f.ok)return f;const s=await f.clone().text(),p=`Server returned an error:
  Code: ${f.status} (${f.statusText})
  Body: ${s}
`;if(f.status===404&&f.url.includes("api/v3"))throw new ss("v3 api not supported. Fall back to v2",{ok:f.ok,status:f.status,statusText:f.statusText,headers:cn(f.headers)});if(i<ae(this,bt,"f"))return await ae(this,rt,"m",t).call(this,{request:r,backoff:n,tries:i+1});throw new ss(p,{ok:f.ok,status:f.status,statusText:f.statusText,headers:cn(f.headers)})},lr=async function(){if(!this.rootKey)if(this.rootKey===null&&ae(this,Kr,"f"))await this.fetchRootKey();else throw new Me(`Invalid root key detected. The root key for this agent is ${this.rootKey} and the shouldFetchRootKey value is set to ${ae(this,Kr,"f")}. The root key should only be unknown if you are in local development. Otherwise you should avoid fetching and use the default IC Root Key or the known root key of your environment.`)};var Do;(function(t){t.Error="err",t.GetPrincipal="gp",t.GetPrincipalResponse="gpr",t.Query="q",t.QueryResponse="qr",t.Call="c",t.CallResponse="cr",t.ReadState="rs",t.ReadStateResponse="rsr",t.Status="s",t.StatusResponse="sr"})(Do||(Do={}));function ea(){const t=typeof window>"u"?typeof global>"u"?typeof self>"u"?void 0:self.ic.agent:global.ic.agent:window.ic.agent;if(!t)throw new Error("No Agent could be found.");return t}const bh=5*60*1e3;function ou(){return vh(xh(_h(),1e3),Ah(1e3,1.2),Eh(bh))}function _h(){let t=!0;return async()=>t?(t=!1,!0):!1}function xh(t,e){return async(r,n,i)=>{if(await t(r,n,i))return new Promise(a=>setTimeout(a,e))}}function Eh(t){const e=Date.now()+t;return async(r,n,i)=>{if(Date.now()>e)throw new Error(`Request timed out after ${t} msec:
  Request ID: ${We(n)}
  Request status: ${i}
`)}}function Ah(t,e){let r=t;return()=>new Promise(n=>setTimeout(()=>{r*=e,n()},r))}function vh(...t){return async(e,r,n)=>{for(const i of t)await i(e,r,n)}}async function au(t,e,r,n=ou(),i,a){var f;const s=[new TextEncoder().encode("request_status"),r],p=i??await((f=t.createReadStateRequest)===null||f===void 0?void 0:f.call(t,{paths:[s]})),w=await t.readState(e,{paths:[s]},void 0,p);if(t.rootKey==null)throw new Error("Agent root key not initialized before polling");const S=await xr.create({certificate:w.certificate,rootKey:t.rootKey,canisterId:e,blsVerify:a}),v=pt(S.lookup([...s,new TextEncoder().encode("status")]));let b;switch(typeof v>"u"?b=Ct.Unknown:b=new TextDecoder().decode(v),b){case Ct.Replied:return{reply:pt(S.lookup([...s,"reply"])),certificate:S};case Ct.Received:case Ct.Unknown:case Ct.Processing:return await n(e,r,b),au(t,e,r,n,p,a);case Ct.Rejected:{const m=new Uint8Array(pt(S.lookup([...s,"reject_code"])))[0],g=new TextDecoder().decode(pt(S.lookup([...s,"reject_message"])));throw new Error(`Call was rejected:
  Request ID: ${We(r)}
  Reject code: ${m}
  Reject text: ${g}
`)}case Ct.Done:throw new Error(`Call was marked as done but we never saw the reply:
  Request ID: ${We(r)}
`)}throw new Error("unreachable")}const Bh=({IDL:t})=>{const e=t.Variant({mainnet:t.Null,testnet:t.Null}),r=t.Text,n=t.Record({network:e,address:r,min_confirmations:t.Opt(t.Nat32)}),i=t.Nat64,a=i,f=t.Nat32,s=t.Record({start_height:f,end_height:t.Opt(f),network:e}),p=t.Vec(t.Nat8),w=t.Record({tip_height:f,block_headers:t.Vec(p)}),S=t.Record({network:e}),v=t.Nat64,b=t.Vec(v),m=t.Record({network:e,filter:t.Opt(t.Variant({page:t.Vec(t.Nat8),min_confirmations:t.Nat32})),address:r}),g=t.Vec(t.Nat8),k=t.Record({txid:t.Vec(t.Nat8),vout:t.Nat32}),q=t.Record({height:t.Nat32,value:i,outpoint:k}),X=t.Record({next_page:t.Opt(t.Vec(t.Nat8)),tip_height:f,tip_block_hash:g,utxos:t.Vec(q)}),K=t.Record({transaction:t.Vec(t.Nat8),network:e}),j=t.Principal,D=t.Record({canister_id:j,num_requested_changes:t.Opt(t.Nat64)}),R=t.Variant({from_user:t.Record({user_id:t.Principal}),from_canister:t.Record({canister_version:t.Opt(t.Nat64),canister_id:t.Principal})}),C=t.Vec(t.Nat8),z=t.Variant({creation:t.Record({controllers:t.Vec(t.Principal)}),code_deployment:t.Record({mode:t.Variant({reinstall:t.Null,upgrade:t.Null,install:t.Null}),module_hash:t.Vec(t.Nat8)}),load_snapshot:t.Record({canister_version:t.Nat64,taken_at_timestamp:t.Nat64,snapshot_id:C}),controllers_change:t.Record({controllers:t.Vec(t.Principal)}),code_uninstall:t.Null}),te=t.Record({timestamp_nanos:t.Nat64,canister_version:t.Nat64,origin:R,details:z}),re=t.Record({controllers:t.Vec(t.Principal),module_hash:t.Opt(t.Vec(t.Nat8)),recent_changes:t.Vec(te),total_num_changes:t.Nat64}),U=t.Record({canister_id:j}),H=t.Variant({controllers:t.Null,public:t.Null,allowed_viewers:t.Vec(t.Principal)}),J=t.Record({freezing_threshold:t.Nat,controllers:t.Vec(t.Principal),reserved_cycles_limit:t.Nat,log_visibility:H,wasm_memory_limit:t.Nat,memory_allocation:t.Nat,compute_allocation:t.Nat}),x=t.Record({status:t.Variant({stopped:t.Null,stopping:t.Null,running:t.Null}),memory_size:t.Nat,cycles:t.Nat,settings:J,query_stats:t.Record({response_payload_bytes_total:t.Nat,num_instructions_total:t.Nat,num_calls_total:t.Nat,request_payload_bytes_total:t.Nat}),idle_cycles_burned_per_day:t.Nat,module_hash:t.Opt(t.Vec(t.Nat8)),reserved_cycles:t.Nat}),N=t.Record({canister_id:j}),$=t.Record({freezing_threshold:t.Opt(t.Nat),controllers:t.Opt(t.Vec(t.Principal)),reserved_cycles_limit:t.Opt(t.Nat),log_visibility:t.Opt(H),wasm_memory_limit:t.Opt(t.Nat),memory_allocation:t.Opt(t.Nat),compute_allocation:t.Opt(t.Nat)}),L=t.Record({settings:t.Opt($),sender_canister_version:t.Opt(t.Nat64)}),ee=t.Record({canister_id:j}),Q=t.Record({canister_id:j}),ne=t.Record({canister_id:j,snapshot_id:C}),he=t.Record({canister_id:j}),oe=t.Variant({secp256k1:t.Null}),ie=t.Record({key_id:t.Record({name:t.Text,curve:oe}),canister_id:t.Opt(j),derivation_path:t.Vec(t.Vec(t.Nat8))}),Se=t.Record({public_key:t.Vec(t.Nat8),chain_code:t.Vec(t.Nat8)}),A=t.Record({canister_id:j}),Fe=t.Record({idx:t.Nat64,timestamp_nanos:t.Nat64,content:t.Vec(t.Nat8)}),Be=t.Record({canister_log_records:t.Vec(Fe)}),$e=t.Record({value:t.Text,name:t.Text}),ce=t.Record({status:t.Nat,body:t.Vec(t.Nat8),headers:t.Vec($e)}),de=t.Record({url:t.Text,method:t.Variant({get:t.Null,head:t.Null,post:t.Null}),max_response_bytes:t.Opt(t.Nat64),body:t.Opt(t.Vec(t.Nat8)),transform:t.Opt(t.Record({function:t.Func([t.Record({context:t.Vec(t.Nat8),response:ce})],[ce],["query"]),context:t.Vec(t.Nat8)})),headers:t.Vec($e)}),E=t.Variant({reinstall:t.Null,upgrade:t.Opt(t.Record({wasm_memory_persistence:t.Opt(t.Variant({keep:t.Null,replace:t.Null})),skip_pre_upgrade:t.Opt(t.Bool)})),install:t.Null}),T=t.Record({hash:t.Vec(t.Nat8)}),O=t.Record({arg:t.Vec(t.Nat8),wasm_module_hash:t.Vec(t.Nat8),mode:E,chunk_hashes_list:t.Vec(T),target_canister:j,store_canister:t.Opt(j),sender_canister_version:t.Opt(t.Nat64)}),V=t.Vec(t.Nat8),P=t.Record({arg:t.Vec(t.Nat8),wasm_module:V,mode:E,canister_id:j,sender_canister_version:t.Opt(t.Nat64)}),G=t.Record({canister_id:j}),h=t.Record({id:C,total_size:t.Nat64,taken_at_timestamp:t.Nat64}),o=t.Vec(h),c=t.Record({canister_id:j,sender_canister_version:t.Opt(t.Nat64),snapshot_id:C}),y=t.Record({start_at_timestamp_nanos:t.Nat64,subnet_id:t.Principal}),_=t.Record({num_block_failures_total:t.Nat64,node_id:t.Principal,num_blocks_proposed_total:t.Nat64}),I=t.Vec(t.Record({timestamp_nanos:t.Nat64,node_metrics:t.Vec(_)})),Y=t.Record({settings:t.Opt($),specified_id:t.Opt(j),amount:t.Opt(t.Nat),sender_canister_version:t.Opt(t.Nat64)}),se=t.Record({canister_id:j}),ue=t.Record({canister_id:j,amount:t.Nat}),fe=t.Vec(t.Nat8),me=t.Variant({ed25519:t.Null,bip340secp256k1:t.Null}),d=t.Record({key_id:t.Record({algorithm:me,name:t.Text}),canister_id:t.Opt(j),derivation_path:t.Vec(t.Vec(t.Nat8))}),u=t.Record({public_key:t.Vec(t.Nat8),chain_code:t.Vec(t.Nat8)}),l=t.Record({key_id:t.Record({name:t.Text,curve:oe}),derivation_path:t.Vec(t.Vec(t.Nat8)),message_hash:t.Vec(t.Nat8)}),B=t.Record({signature:t.Vec(t.Nat8)}),M=t.Variant({bip341:t.Record({merkle_root_hash:t.Vec(t.Nat8)})}),W=t.Record({aux:t.Opt(M),key_id:t.Record({algorithm:me,name:t.Text}),derivation_path:t.Vec(t.Vec(t.Nat8)),message:t.Vec(t.Nat8)}),Z=t.Record({signature:t.Vec(t.Nat8)}),ge=t.Record({canister_id:j}),be=t.Record({canister_id:j}),we=t.Record({canister_id:j}),ye=t.Vec(T),Te=t.Record({subnet_id:t.Principal}),Oe=t.Record({replica_version:t.Text}),Zi=t.Record({replace_snapshot:t.Opt(C),canister_id:j}),Ki=h,Wi=t.Record({canister_id:j,sender_canister_version:t.Opt(t.Nat64)}),zi=t.Record({canister_id:t.Principal,settings:$,sender_canister_version:t.Opt(t.Nat64)}),Li=t.Record({chunk:t.Vec(t.Nat8),canister_id:t.Principal}),Kt=T;return t.Service({bitcoin_get_balance:t.Func([n],[a],[]),bitcoin_get_block_headers:t.Func([s],[w],[]),bitcoin_get_current_fee_percentiles:t.Func([S],[b],[]),bitcoin_get_utxos:t.Func([m],[X],[]),bitcoin_send_transaction:t.Func([K],[],[]),canister_info:t.Func([D],[re],[]),canister_status:t.Func([U],[x],[]),clear_chunk_store:t.Func([N],[],[]),create_canister:t.Func([L],[ee],[]),delete_canister:t.Func([Q],[],[]),delete_canister_snapshot:t.Func([ne],[],[]),deposit_cycles:t.Func([he],[],[]),ecdsa_public_key:t.Func([ie],[Se],[]),fetch_canister_logs:t.Func([A],[Be],["query"]),http_request:t.Func([de],[ce],[]),install_chunked_code:t.Func([O],[],[]),install_code:t.Func([P],[],[]),list_canister_snapshots:t.Func([G],[o],[]),load_canister_snapshot:t.Func([c],[],[]),node_metrics_history:t.Func([y],[I],[]),provisional_create_canister_with_cycles:t.Func([Y],[se],[]),provisional_top_up_canister:t.Func([ue],[],[]),raw_rand:t.Func([],[fe],[]),schnorr_public_key:t.Func([d],[u],[]),sign_with_ecdsa:t.Func([l],[B],[]),sign_with_schnorr:t.Func([W],[Z],[]),start_canister:t.Func([ge],[],[]),stop_canister:t.Func([be],[],[]),stored_chunks:t.Func([we],[ye],[]),subnet_info:t.Func([Te],[Oe],[]),take_canister_snapshot:t.Func([Zi],[Ki],[]),uninstall_code:t.Func([Wi],[],[]),update_settings:t.Func([zi],[],[]),upload_chunk:t.Func([Li],[Kt],[])})};class cu extends Me{constructor(e,r,n,i){super(["Call failed:",`  Canister: ${e.toText()}`,`  Method: ${r} (${n})`,...Object.getOwnPropertyNames(i).map(a=>`  "${a}": ${JSON.stringify(i[a])}`)].join(`
`)),this.canisterId=e,this.methodName=r,this.type=n,this.props=i}}class Th extends cu{constructor(e,r,n){var i;super(e,r,"query",{Status:n.status,Code:(i=_s[n.reject_code])!==null&&i!==void 0?i:`Unknown Code "${n.reject_code}"`,Message:n.reject_message}),this.result=n}}class ta extends cu{constructor(e,r,n,i,a,f,s){super(e,r,"update",Object.assign({"Request ID":We(n)},i.body?Object.assign(Object.assign({},s?{"Error code":s}:{}),{"Reject code":String(a),"Reject message":f}):{"HTTP status code":i.status.toString(),"HTTP status text":i.statusText})),this.requestId=n,this.response=i,this.reject_code=a,this.reject_message=f,this.error_code=s}}const dt=Symbol.for("ic-agent-metadata");class Yi{constructor(e){this[dt]=Object.freeze(e)}static agentOf(e){return e[dt].config.agent}static interfaceOf(e){return e[dt].service}static canisterIdOf(e){return _e.from(e[dt].config.canisterId)}static async install(e,r){const n=e.mode===void 0?{install:null}:e.mode,i=e.arg?[...new Uint8Array(e.arg)]:[],a=[...new Uint8Array(e.module)],f=typeof r.canisterId=="string"?_e.fromText(r.canisterId):r.canisterId;await ra(r).install_code({mode:n,arg:i,wasm_module:a,canister_id:f,sender_canister_version:[]})}static async createCanister(e,r){function n(a){return[{controllers:a.controllers?[a.controllers]:[],compute_allocation:a.compute_allocation?[a.compute_allocation]:[],freezing_threshold:a.freezing_threshold?[a.freezing_threshold]:[],memory_allocation:a.memory_allocation?[a.memory_allocation]:[],reserved_cycles_limit:[],log_visibility:[],wasm_memory_limit:[]}]}const{canister_id:i}=await ra(e||{}).provisional_create_canister_with_cycles({amount:[],settings:n(r||{}),specified_id:[],sender_canister_version:[]});return i}static async createAndInstallCanister(e,r,n){const i=await this.createCanister(n);return await this.install(Object.assign({},r),Object.assign(Object.assign({},n),{canisterId:i})),this.createActor(e,Object.assign(Object.assign({},n),{canisterId:i}))}static createActorClass(e,r){const n=e({IDL:Pf});class i extends Yi{constructor(f){if(!f.canisterId)throw new Me(`Canister ID is required, but received ${typeof f.canisterId} instead. If you are using automatically generated declarations, this may be because your application is not setting the canister ID in process.env correctly.`);const s=typeof f.canisterId=="string"?_e.fromText(f.canisterId):f.canisterId;super({config:Object.assign(Object.assign(Object.assign({},uu),f),{canisterId:s}),service:n});for(const[p,w]of n._fields)r!=null&&r.httpDetails&&w.annotations.push(Ps),r!=null&&r.certificate&&w.annotations.push(fu),this[p]=Sh(this,p,w,f.blsVerify)}}return i}static createActor(e,r){if(!r.canisterId)throw new Me(`Canister ID is required, but received ${typeof r.canisterId} instead. If you are using automatically generated declarations, this may be because your application is not setting the canister ID in process.env correctly.`);return new(this.createActorClass(e))(r)}static createActorWithHttpDetails(e,r){return new(this.createActorClass(e,{httpDetails:!0}))(r)}static createActorWithExtendedDetails(e,r,n={httpDetails:!0,certificate:!0}){return new(this.createActorClass(e,n))(r)}}function Mr(t,e){const r=Na(t,aa.Buffer.from(e));switch(r.length){case 0:return;case 1:return r[0];default:return r}}const uu={pollingStrategyFactory:ou},Ps="http-details",fu="certificate";function Sh(t,e,r,n){let i;r.annotations.includes("query")||r.annotations.includes("composite_query")?i=async(f,...s)=>{var p,w;f=Object.assign(Object.assign({},f),(w=(p=t[dt].config).queryTransform)===null||w===void 0?void 0:w.call(p,e,s,Object.assign(Object.assign({},t[dt].config),f)));const S=f.agent||t[dt].config.agent||ea(),v=_e.from(f.canisterId||t[dt].config.canisterId),b=Es(r.argTypes,s),m=await S.query(v,{methodName:e,arg:b,effectiveCanisterId:f.effectiveCanisterId}),g=Object.assign(Object.assign({},m.httpDetails),{requestDetails:m.requestDetails});switch(m.status){case"rejected":throw new Th(v,e,m);case"replied":return r.annotations.includes(Ps)?{httpDetails:g,result:Mr(r.retTypes,m.reply.arg)}:Mr(r.retTypes,m.reply.arg)}}:i=async(f,...s)=>{var p,w;f=Object.assign(Object.assign({},f),(w=(p=t[dt].config).callTransform)===null||w===void 0?void 0:w.call(p,e,s,Object.assign(Object.assign({},t[dt].config),f)));const S=f.agent||t[dt].config.agent||ea(),{canisterId:v,effectiveCanisterId:b,pollingStrategyFactory:m}=Object.assign(Object.assign(Object.assign({},uu),t[dt].config),f),g=_e.from(v),k=b!==void 0?_e.from(b):g,q=Es(r.argTypes,s),{requestId:X,response:K,requestDetails:j}=await S.call(g,{methodName:e,arg:q,effectiveCanisterId:k});let D,R;if(K.body&&K.body.certificate){if(S.rootKey==null)throw new Error("Agent is missing root key");const re=K.body.certificate;R=await xr.create({certificate:gi(re),rootKey:S.rootKey,canisterId:_e.from(v),blsVerify:n});const U=[new TextEncoder().encode("request_status"),X];switch(new TextDecoder().decode(pt(R.lookup([...U,"status"])))){case"replied":D=pt(R.lookup([...U,"reply"]));break;case"rejected":{const J=new Uint8Array(pt(R.lookup([...U,"reject_code"])))[0],x=new TextDecoder().decode(pt(R.lookup([...U,"reject_message"]))),N=pt(R.lookup([...U,"error_code"])),$=N?new TextDecoder().decode(N):void 0;throw new ta(g,e,X,K,J,x,$)}}}else if(K.body&&"reject_message"in K.body){const{reject_code:re,reject_message:U,error_code:H}=K.body;throw new ta(g,e,X,K,re,U,H)}if(K.status===202){const re=m(),U=await au(S,k,X,re,n);R=U.certificate,D=U.reply}const C=r.annotations.includes(Ps),z=r.annotations.includes(fu),te=Object.assign(Object.assign({},K),{requestDetails:j});if(D!==void 0)return C&&z?{httpDetails:te,certificate:R,result:Mr(r.retTypes,D)}:z?{certificate:R,result:Mr(r.retTypes,D)}:C?{httpDetails:te,result:Mr(r.retTypes,D)}:Mr(r.retTypes,D);if(r.retTypes.length===0)return C?{httpDetails:K,result:void 0}:void 0;throw new Error(`Call was returned undefined, but type [${r.retTypes.join(",")}].`)};const a=(...f)=>i({},...f);return a.withOptions=f=>(...s)=>i(f,...s),a}function ra(t){function e(r,n){if(t.effectiveCanisterId)return{effectiveCanisterId:_e.from(t.effectiveCanisterId)};const i=n[0];let a=_e.fromHex("");return i&&typeof i=="object"&&i.target_canister&&r==="install_chunked_code"&&(a=_e.from(i.target_canister)),i&&typeof i=="object"&&i.canister_id&&(a=_e.from(i.canister_id)),{effectiveCanisterId:a}}return Yi.createActor(Bh,Object.assign(Object.assign(Object.assign({},t),{canisterId:_e.fromHex("")}),{callTransform:e,queryTransform:e}))}const Nh=({IDL:t})=>{const e=t.Variant({ICP:t.Null,ICRC1:t.Null});return t.Record({is_mint:t.Bool,ledger_type:e,ledger_canister:t.Principal}),t.Service({account_identifier:t.Func([],[t.Text],["query"]),transfer_icp:t.Func([t.Text],[],[]),transfer_icrc1:t.Func([t.Principal],[],[])})},Ih="ucua5-2qaaa-aaaao-qkeia-cai",Cs=(t,e={})=>{const r=e.agent||new Yr({...e.agentOptions});return e.agent&&e.agentOptions&&console.warn("Detected both agent and agentOptions passed to createActor. Ignoring agentOptions and proceeding with the provided agent."),r.fetchRootKey().catch(n=>{console.warn("Unable to fetch root key. Check to ensure that your local replica is running"),console.error(n)}),Yi.createActor(Nh,{agent:r,canisterId:t,...e.actorOptions})};Cs(Ih);const Rh="/assets/logo2-037eb7ae.svg",Qt={ICP:"ICP",ICRC1:"ICRC1"};var Bi,lu,Ti,mr,pn;class Uh{constructor(){kn(this,Bi);kn(this,mr);kn(this,Ti,async e=>{e.preventDefault();const r=document.getElementById("principal").value.trim();if(!r){const n=this.ledgerType===Qt.ICP?"Account Identifier":"Principal ID";this.greeting=`Please enter a valid ${n}.`,this.isError=!0,this.isSuccess=!1,Nr(this,mr,pn).call(this);return}try{this.isLoading=!0,this.isError=!1,this.isSuccess=!1,this.greeting="Processing your request...",Nr(this,mr,pn).call(this);let n;if(this.ledgerType===Qt.ICRC1){const i=_e.fromText(r);n=await this.backend.transfer_icrc1(i)}else this.ledgerType===Qt.ICP&&(n=await this.backend.transfer_icp(r));this.greeting=n||`Success! 10 ${this.tokenSymbol} tokens have been transferred to your account.`,this.isError=!1,this.isSuccess=!0,Nr(this,Bi,lu).call(this)}catch(n){console.error(n);const i=this.ledgerType===Qt.ICP?"Account Identifier":"Principal ID";this.greeting=`Error: Invalid ${i} format. Please check and try again.`,this.isError=!0,this.isSuccess=!1}finally{this.isLoading=!1,Nr(this,mr,pn).call(this)}});this.tokenSymbol="TICRC1",this.tokenSymbol==="TESTICP"?(this.ledgerType=Qt.ICP,this.backend=Cs("ucua5-2qaaa-aaaao-qkeia-cai")):(this.ledgerType=Qt.ICRC1,this.backend=Cs("rmxgg-6iaaa-aaaac-qa7xa-cai")),this.greeting="",this.isLoading=!1,this.isError=!1,this.isSuccess=!1,Nr(this,mr,pn).call(this)}}Bi=new WeakSet,lu=function(){for(let e=0;e<15;e++)setTimeout(()=>{const r=document.createElement("div");r.className="coin",r.innerHTML="●",r.style.left=Math.random()*100+"%",r.style.animationDelay=Math.random()*.5+"s",r.style.animationDuration=Math.random()*1+2+"s",document.body.appendChild(r),setTimeout(()=>{r.parentNode&&r.parentNode.removeChild(r)},3e3)},e*100)},Ti=new WeakMap,mr=new WeakSet,pn=function(){const e=this.ledgerType===Qt.ICP?"Account Identifier":"Principal",r=this.ledgerType===Qt.ICP?"e.g. d4685b31b51450508aff0d02b4f023b2a7d1f74b...":"e.g. u6s2n-gx777-77774-qaaba-cai";let n=Iu`
      <main>
        <h1>${this.tokenSymbol} Token Faucet</h1>
        <p>Get 10 ${this.tokenSymbol} test tokens for development and testing</p>
        
        <form action="#">
          <label for="principal">Enter your ${e}:</label>
          <input 
            id="principal" 
            alt="${e}" 
            type="text" 
            placeholder="${r}"
            ?disabled=${this.isLoading}
          />
          <button type="submit" ?disabled=${this.isLoading}>
            ${this.isLoading?"Processing...":"Request Tokens"}
          </button>
        </form>
        
        <section id="message" class="${this.isError?"error":this.isSuccess?"success":""}">${this.greeting}</section>
        
        <div class="info">
          <p><strong>Instructions:</strong></p>
          <ul>
            <li>Enter your Internet Computer ${e} above</li>
            <li>Click "Request Tokens" to receive 10 ${this.tokenSymbol} tokens</li>
            <li>Use these tokens for testing and development purposes</li>
          </ul>
        </div>
        
        <img src="${Rh}" alt="100% onchain" />
      </main>
    `;Pu(n,document.getElementById("root")),document.querySelector("form").addEventListener("submit",to(this,Ti))};new Uh;
